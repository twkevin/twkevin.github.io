require=function a(r,l,s){function c(t,e){if(!l[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(p)return p(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=l[t]={exports:{}};r[t][0].call(i.exports,function(e){return c(r[t][1][e]||e)},i,i.exports,a,r,l,s)}return l[t].exports}for(var p="function"==typeof require&&require,e=0;e<s.length;e++)c(s[e]);return c}({About:[function(e,t,o){"use strict";cc._RF.push(t,"f8a1dkqKwZM8bplPTIiGtLG","About"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onFormClick=function(){this.node.destroy()},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],AchieveData:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"58aaeMM6slLyrDRdx2sHOPZ","AchieveData"),Object.defineProperty(o,"__esModule",{value:!0}),(i=n=o.AchieveType||(o.AchieveType={}))[i["过关达人"]=0]="过关达人",i[i["地狱达人"]=1]="地狱达人",i[i["重生达人"]=2]="重生达人",i[i["杀手"]=3]="杀手",i[i["抓金手"]=4]="抓金手",i[i["武器达人"]=5]="武器达人",i[i["过肩摔"]=6]="过肩摔",i[i["格斗达人"]=7]="格斗达人",o.ALL_ACHIEVE_DATA=[{id:n.过关达人,target:[1,2,5,10,20],award:[200,200,500,1e3,2e3],icon:"achieve/a1"},{id:n.地狱达人,target:[1,5,10,50,250],award:[200,400,800,1500,2e3],icon:"achieve/a2"},{id:n.重生达人,target:[1,2,4,8,16],award:[800,2e3,4e3,8e3,16e3],icon:"achieve/a3"},{id:n.杀手,target:[20,100,200,500,1e3],award:[200,400,500,800,1e3],icon:"achieve/a4"},{id:n.抓金手,target:[2e3,1e4,5e4,1e5,2e5],award:[200,1e3,2e3,5e3,1e4],icon:"achieve/a5"},{id:n.武器达人,target:[30,100,200,500,1e3],award:[200,300,400,500,800],icon:"achieve/a6"},{id:n.过肩摔,target:[1,10,50,100,500],award:[100,200,500,800,1e3],icon:"achieve/a7"},{id:n.格斗达人,target:[1,10,50,100,500],award:[200,400,600,1e3,2e3],icon:"achieve/a8"}],o.ALL_ACHIEVE_DATA_MAP={};for(var a=0,r=o.ALL_ACHIEVE_DATA;a<r.length;a++){var l=r[a];o.ALL_ACHIEVE_DATA_MAP[l.id]=l}cc._RF.pop()},{}],Achievement1:[function(e,t,o){"use strict";cc._RF.push(t,"70e5ebARo5HRYa3fRtugTTW","Achievement1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/AchieveData"),i=e("../UICommon"),a=[],r=!1,l=cc._decorator,s=l.ccclass,c=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=null,e.level=null,e}return __extends(e,t),e.prototype.start=function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.8),cc.callFunc(function(){e.node.destroy()}))),a.push(this.node),r=!0},e.prototype.onDestroy=function(){var e=a.indexOf(this.node);-1!=e&&(a.splice(e,1),r=!0)},e.prototype.update=function(e){if(r){for(var t=this.node.height,o=0;o<a.length;o++)a[o].setPositionX(0),a[o].setPositionY(t*(a.length-o-1));r=!1}},e.prototype.show=function(e,t){var o=n.ALL_ACHIEVE_DATA_MAP[e];i.setSpriteFromRawRes(o.icon,this.type),this.level.string=""+(t+1)},__decorate([c(cc.Sprite)],e.prototype,"type",void 0),__decorate([c(cc.Label)],e.prototype,"level",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../UICommon":"UICommon"}],Achievement:[function(e,t,o){"use strict";cc._RF.push(t,"fa0512hGyNN7IIA2vwnBGS1","Achievement"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("../Logic/PlayerAchieve"),c=e("../Logic/Player"),p=e("../Data/AchieveData"),n=e("../UICommon"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item1=null,e.item2=null,e.item3=null,e.item4=null,e.item5=null,e.item6=null,e.item7=null,e.item8=null,e._items=null,e}return __extends(e,t),e.prototype.onLoad=function(){this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8]},e.prototype.start=function(){for(var e=0;e<this._items.length;e++)this.updateAchieveItem(this._items[e],e)},e.prototype.updateAchieveItem=function(e,t){var o=c.PlayerAttr.成功过关次数;if(t==p.AchieveType.过关达人)o=c.PlayerAttr.成功过关次数;else if(t==p.AchieveType.地狱达人)o=c.PlayerAttr.主角死亡次数;else if(t==p.AchieveType.重生达人)o=c.PlayerAttr.主角复活次数;else if(t==p.AchieveType.杀手)o=c.PlayerAttr.杀敌数量;else if(t==p.AchieveType.抓金手)o=c.PlayerAttr.获得金币总数;else if(t==p.AchieveType.武器达人)o=c.PlayerAttr.武器耐久总消耗数;else if(t==p.AchieveType.过肩摔)o=c.PlayerAttr.过肩摔完成次数;else{if(t!=p.AchieveType.格斗达人)return;o=c.PlayerAttr.绝招使用次数}var n=s.PlayerAchieve.Instance.isAchievementMaxLvl(t),i=s.PlayerAchieve.Instance.getAchievementLvl(t),a=c.Player.Instance.get(o),r=p.ALL_ACHIEVE_DATA_MAP[t];e.getChildByName("gold").getComponent(cc.Label).string=n?"完成":""+r.award[i+1],e.getChildByName("level").getComponent(cc.Label).string=n?""+(i+1):""+(i+2);var l=e.getChildByName("n");l.getComponent(cc.ProgressBar).progress=n?1:a/r.target[i+1],l.getChildByName("num").getComponent(cc.Label).string=n?a+"/"+r.target[i]:a+"/"+r.target[i+1]},e.prototype.onFormClick=function(){n.onButtonClicked(),this.node.destroy()},__decorate([r(cc.Node)],e.prototype,"item1",void 0),__decorate([r(cc.Node)],e.prototype,"item2",void 0),__decorate([r(cc.Node)],e.prototype,"item3",void 0),__decorate([r(cc.Node)],e.prototype,"item4",void 0),__decorate([r(cc.Node)],e.prototype,"item5",void 0),__decorate([r(cc.Node)],e.prototype,"item6",void 0),__decorate([r(cc.Node)],e.prototype,"item7",void 0),__decorate([r(cc.Node)],e.prototype,"item8",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../Logic/Player":"Player","../Logic/PlayerAchieve":"PlayerAchieve","../UICommon":"UICommon"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"3c030S9uKFJi6zhqAgvpdLW","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.myAudioMgr=null,cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},onDestory:function(){console.log("AudioMgr onDestory 1"),o.myAudioMgr=null},onLoad:function(){console.log("AudioMgr onLoad 1"),o.myAudioMgr=this,console.log("AudioMgr onLoad 2"),this.init(),console.log("AudioMgr onLoad 3")},init:function(){var e=cc.sys.localStorage.getItem("bgmVolume");null!=e&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/sounds/"+e)},playBGM:function(e){var t=this.getUrl(e);console.log(t),0<=this.bgmAudioID&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){console.log("AudioMgr playSFX 1");var t=this.getUrl(e);if(console.log("AudioMgr playSFX 2 "+t),0<this.sfxVolume)cc.audioEngine.play(t,!1,this.sfxVolume)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},getSFXVolume:function(){return this.sfxVolume},getBGMVolume:function(){return this.bgmVolume},setBGMVolume:function(e,t){0<=this.bgmAudioID&&(0<e?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Begin1:[function(e,t,o){"use strict";cc._RF.push(t,"50c4cISdVZM4bhkeVxS5HM8","Begin1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=e("../UICommon"),a=e("../Data/HelpData"),r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onContinulick=function(){n.Player.Instance.set(n.PlayerAttr.关卡等级,0),n.Player.Instance.resetHelpGuide(a.HelpType.help18),this.node.destroy(),i.switchToScene("Weapon")},t.prototype.onCloseClick=function(){this.node.destroy()},t=__decorate([l],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../UICommon":"UICommon"}],Begin:[function(e,t,o){"use strict";cc._RF.push(t,"72f30Ze4l1E+4iluZLOvVr4","Begin"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=e("../UICommon"),a=e("../AudioMgr"),r=e("../Logic/PlayerShop"),l=e("../Logic/LocalData"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gifts=null,e.settingUI=null,e.helpUI=null,e.aboutUI=null,e.achievementUI=null,e.newBegin=null,e.btnBegin=null,e}return __extends(e,t),e.prototype.onLoad=function(){n.Player.Instance.addListener(this)},e.prototype.onDestroy=function(){n.Player.Instance.removeListener(this)},e.prototype.start=function(){a.myAudioMgr.pauseAll(),a.myAudioMgr.playBGM("menubg.ogg"),this.gifts.stopAllActions(),this.gifts.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)))),l.LocalData.Instance.read(),n.Player.Instance.checkDailyBonus(),this.updateNewBeginBtn()},e.prototype.onPlayerAttrNotify=function(e,t){e==n.PlayerAttr.关卡等级&&this.updateNewBeginBtn()},e.prototype.onBeginClick=function(){i.onButtonClicked(),0==n.Player.Instance.get(n.PlayerAttr.关卡等级)?i.switchToScene("Weapon"):this.node.addChild(cc.instantiate(this.newBegin))},e.prototype.onContinueClick=function(){i.onButtonClicked(),i.switchToScene("Weapon")},e.prototype.onSettingClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.settingUI))},e.prototype.onHelpClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.helpUI))},e.prototype.onAboutClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.aboutUI))},e.prototype.onEndClick=function(){i.onButtonClicked(),cc.game.end()},e.prototype.onGiftsClick=function(){i.onButtonClicked(),r.PlayerShop.Instance.showShopUI("present")},e.prototype.onAchievementClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.achievementUI))},e.prototype.updateNewBeginBtn=function(){0==n.Player.Instance.get(n.PlayerAttr.关卡等级)?this.btnBegin.normalSprite=this.btnBegin.hoverSprite:this.btnBegin.normalSprite=this.btnBegin.disabledSprite},__decorate([p(cc.Node)],e.prototype,"gifts",void 0),__decorate([p(cc.Prefab)],e.prototype,"settingUI",void 0),__decorate([p(cc.Prefab)],e.prototype,"helpUI",void 0),__decorate([p(cc.Prefab)],e.prototype,"aboutUI",void 0),__decorate([p(cc.Prefab)],e.prototype,"achievementUI",void 0),__decorate([p(cc.Prefab)],e.prototype,"newBegin",void 0),__decorate([p(cc.Button)],e.prototype,"btnBegin",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../Logic/LocalData":"LocalData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"f3824OLjNJJOqB9AOEaSTXL","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./AudioMgr"),a=e("./SpriteAnim"),n=cc._decorator,r=n.ccclass,l=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.myInit=function(t,e,o){(this.ownerRole=t,this.skillData=e,this.equipData=o,this.sprite=this.node.addComponent(cc.Sprite),9==o.equipid)?(this.sprite.sizeMode=cc.Sprite.SizeMode.TRIMMED,this.addComponent(a.default).init(["gunfe-2-1","gunfe-2-2","gunfe-2-3","gunfe-2-4"].map(function(e){return t.dragonBonesConfig.bulletAtlas.getSpriteFrame(e)}),15,!1)):this.sprite.spriteFrame=this.ownerRole.dragonBonesConfig.bulletAtlas.getSpriteFrame(o.bulletSprite);if(this.ownerRole.ownerMap.rolesNode.addChild(this.node),this.node.setAnchorPoint(0,.5),this.node.setPosition(this.ownerRole.node.getPositionX()+50*(this.ownerRole.isFaceRight?1:-1),this.ownerRole.node.getPositionY()+o.bulletHeight),this.ownerRole.isFaceRight||this.node.setScale(-Math.abs(this.node.scaleX),this.node.scaleY),o.gunfireSound&&i.myAudioMgr.playSFX(o.gunfireSound),o.gunfireParticle){var n=cc.instantiate(this.ownerRole.ownerMap.gunfireParticle);this.ownerRole.ownerMap.rolesNode.addChild(n),n.setPosition(this.ownerRole.node.getPositionX()+50*(this.ownerRole.isFaceRight?1:-1),this.ownerRole.node.getPositionY()+o.bulletHeight)}t==t.ownerMap.roleHero?t.ownerMap.bulletsOfHero.push(this):t.ownerMap.bulletsOfEnemy.push(this),t.isFaceRight?this.speed=2*o.bulletSpeed:this.speed=2*-o.bulletSpeed,this.lifeTime=20*o.shootRange/o.bulletSpeed},t.prototype.myUpdate=function(e){this.node.setPositionX(this.node.getPositionX()+this.speed*e),this.lifeTime-=e},t.prototype.myDestroy=function(){var e,t=(e=this.ownerRole==this.ownerRole.ownerMap.roleHero?this.ownerRole.ownerMap.bulletsOfHero:this.ownerRole.ownerMap.bulletsOfEnemy).indexOf(this);0<=t&&e.splice(t,1),this.node.removeFromParent()},t=__decorate([r],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./SpriteAnim":"SpriteAnim"}],ControlHeroByKeyboard:[function(e,t,o){"use strict";cc._RF.push(t,"a53631+aw1KCrSufnONAniM","ControlHeroByKeyboard"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./SkillData"),a=cc._decorator,r=a.ccclass;a.property;(n=o.ButtonState||(o.ButtonState={}))[n.Up=0]="Up",n[n.Down_FirstFrame=1]="Down_FirstFrame",n[n.Down=2]="Down";var l={},s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftKeyDown=!1,e.rightKeyDown=!1,e.targetInput=null,e}return __extends(e,t),e.prototype._clearButtonsState=function(){this.targetInput.setVariable(i.SMVariable.Input_Jump,0),this.targetInput.setVariable(i.SMVariable.Input_Attack1,0),this.targetInput.setVariable(i.SMVariable.Input_Attack2,0),this.targetInput.setVariable(i.SMVariable.Input_ChangeWeapon,0)},e.prototype._updateWalkDir=function(){var e=0;this.leftKeyDown&&(e-=200),this.rightKeyDown&&(e+=200),this.targetInput.setVariable(i.SMVariable.Input_WalkDir,e)},e.prototype.start=function(){var o=this;l[cc.KEY.l]=i.SMVariable.Input_Jump,l[cc.KEY.j]=i.SMVariable.Input_Attack1,l[cc.KEY.k]=i.SMVariable.Input_Attack2,l[cc.KEY.i]=i.SMVariable.Input_ChangeWeapon,this.keyDown=function(e){var t=l[e.keyCode];t?o.targetInput.setVariable(t,1):e.keyCode!=cc.KEY.a||o.leftKeyDown?e.keyCode!=cc.KEY.d||o.rightKeyDown||(o.rightKeyDown=!0,o._updateWalkDir()):(o.leftKeyDown=!0,o._updateWalkDir())},this.keyUp=function(e){var t=l[e.keyCode];t?o.targetInput.setVariable(t,0):e.keyCode==cc.KEY.a&&o.leftKeyDown?(o.leftKeyDown=!1,o._updateWalkDir()):e.keyCode==cc.KEY.d&&o.rightKeyDown&&(o.rightKeyDown=!1,o._updateWalkDir())},cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp),this._clearButtonsState(),this._updateWalkDir()},e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"./SkillData":"SkillData"}],ControlHeroByTouch:[function(e,t,o){"use strict";cc._RF.push(t,"15fd9EIuPtDdpsgsRq1B6F3","ControlHeroByTouch"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ControlHeroByKeyboard"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttons=[],e.keyboard=null,e.functions=[],e}return __extends(e,t),e.prototype.start=function(){var i=this;this.functions=[];for(var a=[cc.KEY.a,cc.KEY.d,cc.KEY.j,cc.KEY.k,cc.KEY.l,cc.KEY.i],e=function(e){var t=function(){i.keyboard.keyDown({keyCode:a[e]})},o=function(){i.keyboard.keyUp({keyCode:a[e]})},n=r.buttons[e].node;n.on(cc.Node.EventType.TOUCH_START,t),n.on(cc.Node.EventType.TOUCH_END,o),n.on(cc.Node.EventType.TOUCH_CANCEL,o),r.functions.push(t),r.functions.push(o)},r=this,t=0;t<this.buttons.length;++t)e(t)},e.prototype.onDestroy=function(){for(var e=0;e<this.buttons.length;++e){var t=this.functions[2*e],o=this.functions[2*e+1],n=this.buttons[e].node;n.on(cc.Node.EventType.TOUCH_START,t),n.on(cc.Node.EventType.TOUCH_END,o),n.on(cc.Node.EventType.TOUCH_CANCEL,o)}},__decorate([r(cc.Button)],e.prototype,"buttons",void 0),__decorate([r(n.default)],e.prototype,"keyboard",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./ControlHeroByKeyboard":"ControlHeroByKeyboard"}],DailyBonus:[function(e,t,o){"use strict";cc._RF.push(t,"3e695xTvDlAS4b8xVy1kfnQ","DailyBonus"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.covers=[],e}return __extends(e,t),e.prototype.start=function(){for(var e=n.Player.Instance.get(n.PlayerAttr.已登陆天数),t=0;t<this.covers.length;t++)this.covers[t].active=t==e},e.prototype.onGetClick=function(){this.node.destroy(),n.Player.Instance.ReceiveDailyBonus()},__decorate([r(cc.Node)],e.prototype,"covers",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/Player":"Player"}],DragonBonesConfig:[function(e,t,o){"use strict";cc._RF.push(t,"8f4cbAb419L/IKj8ZmrZDVc","DragonBonesConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragonAsset=null,e.dragonAtlasAsset=null,e.dragonArmatureName="armatureName",e.bulletAtlas=null,e}return __extends(e,t),__decorate([a(dragonBones.DragonBonesAsset)],e.prototype,"dragonAsset",void 0),__decorate([a(dragonBones.DragonBonesAtlasAsset)],e.prototype,"dragonAtlasAsset",void 0),__decorate([a],e.prototype,"dragonArmatureName",void 0),__decorate([a(cc.SpriteAtlas)],e.prototype,"bulletAtlas",void 0),e=__decorate([i],e)}(cc.Component);o.default=r,cc._RF.pop()},{}],EquipData:[function(e,t,u){"use strict";cc._RF.push(t,"ba7d1xbUeZBiL54EDk0zJxZ","EquipData"),Object.defineProperty(u,"__esModule",{value:!0}),u.ALL_EQUIP_DATA=[],u.ALL_EQUIP_DATA_MAP={},u.loadEquipData=function(){0<u.ALL_EQUIP_DATA.length||cc.loader.loadRes("excel_json/EquipData",function(e,t){if(e)console.log(e);else{for(var o=t[0],n={},i=0;i<o.length;++i)n[o[i]]=i;for(var a=0,r=t[1];a<r.length;a++){var l=r[a],s={equipid:l[n.equipid],power:l[n.power],delay:l[n.delay],shootRange:l[n.shootRange],maxBulletCount:l[n.maxBulletCount],bulletSpeed:l[n.bulletSpeed],bulletHeight:l[n.bulletHeight],bulletSprite:l[n.bulletSprite],gunfireParticle:l[n.gunfireParticle],gunfireSound:l[n.gunfireSound],useSound:l[n.useSound]};u.ALL_EQUIP_DATA.push(s)}for(var c=0,p=u.ALL_EQUIP_DATA;c<p.length;c++)s=p[c],u.ALL_EQUIP_DATA_MAP[s.equipid]=s}})},cc._RF.pop()},{}],FenShen:[function(e,t,o){"use strict";cc._RF.push(t,"7515ckyrlROHYVkG3bU1+S8","FenShen"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/HelpData"),a=e("../Logic/Player"),r=e("../Logic/PlayerBattle"),l=e("../Logic/PlayerShop"),s=cc._decorator,c=s.ccclass,p=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCloseClick=function(){n.onButtonClicked(),this.node.destroy(),a.Player.Instance.completeGuide(i.HelpType.help7),3==r.PlayerBattle.Instance.getAttackGuanQia()&&l.PlayerShop.Instance.showGiftPresent()},t=__decorate([c],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],GameBegin:[function(e,t,o){"use strict";cc._RF.push(t,"be8d1gFfz1ECZae/OEZsoah","GameBegin"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return __extends(e,t),e.prototype.start=function(){var e=n.PlayerBattle.Instance.getAttackGuanQia();this.label.string=""+e;var t=this;this.node.runAction(cc.sequence(cc.delayTime(.8),cc.fadeOut(.3),cc.callFunc(function(){t.node.destroy(),n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_Begin)})))},__decorate([r(cc.Label)],e.prototype,"label",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"bba081bGWFGJr/tLnYPUI/z","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../UICommon"),a=e("../AudioMgr"),r=e("../Logic/PlayerBattle"),l=e("../Logic/PlayerWeapon"),s=e("../Logic/PlayerShop"),c=e("../Data/HelpData"),p=e("../Logic/Player"),u=cc._decorator,h=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pauseUI=null,e.changeBtn=null,e.defenceBtn=null,e.helpBtn=null,e.defenceLabel=null,e.bloodProgressBar=null,e.naiJiu=null,e.gunSprite=null,e.weapon1UI=null,e.gunBuyeUI=null,e.comboNode=null,e.posXWeapon=0,e.comboHitNum=0,e.comboHitShowTimes=0,e}return __extends(e,t),e.prototype.onLoad=function(){this.defenceLabel.string="0",this.helpBtn.active=!1,p.Player.Instance.isGuideComplete(c.HelpType.help1)||(this.defenceLabel.string="100"),r.PlayerBattle.Instance.setGameUI(this)},e.prototype.setWudiTime=function(e){var t=Math.floor(e/1e3);this.defenceLabel.string=""+t},e.prototype.onDestroy=function(){r.PlayerBattle.Instance.setGameUI(null)},e.prototype.start=function(){a.myAudioMgr.pauseAll(),a.myAudioMgr.playBGM("gamebg.ogg"),this.updateWeapon()},e.prototype.update=function(e){this.comboNode.active&&(this.comboHitShowTimes-=e,this.comboHitShowTimes<0&&(this.comboHitShowTimes=0,this.comboNode.active=!1))},e.prototype.doScaleAction=function(e){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))))},e.prototype.onPauseClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.pauseUI))},e.prototype.onBtnChangeClick=function(){i.onButtonClicked(),r.PlayerBattle.Instance.changeWeapon()},e.prototype.onDefenseClick=function(){i.onButtonClicked(),p.Player.Instance.isGuideComplete(c.HelpType.help1)?this.onWeaponRMBClick(n.ShopItemType.无敌盾):(p.Player.Instance.completeGuide(c.HelpType.help1),p.Player.Instance.isWuDi=!0)},e.prototype.showHelpBtn=function(){1!=this.helpBtn.active&&(this.helpBtn.active=!0,this.doScaleAction(this.helpBtn))},e.prototype.onBtnHelpClick=function(){i.onButtonClicked(),s.PlayerShop.Instance.showShopUI("shop_weapon")},e.prototype.onBtnHitClick=function(){},e.prototype.onBtnGunClick=function(){},e.prototype.onBtnJumpClick=function(){},e.prototype.onWeaponRMBClick=function(e){var t=cc.instantiate(this.weapon1UI);this.node.addChild(t),t.getComponent("Weapon1").init(e)},e.prototype.onBattleEventNotify=function(e){if(e==r.BattleEvent.BattleEvent_ChangeWeapon)this.updateWeapon();else if(e==r.BattleEvent.BattleEvent_HitEnemy){var t=this.comboNode.getChildByName("num");this.comboNode.active?(this.comboHitNum+=1,t.getComponent(cc.Label).string=""+this.comboHitNum,null==t.getActionByTag(100)&&this.playComboNumAct(100)):(this.comboHitNum=1,this.comboHitShowTimes=1.5,this.comboNode.active=!0,t.getComponent(cc.Label).string=""+this.comboHitNum,this.playComboNumAct(100))}else if(e==r.BattleEvent.BattleEvent_UseBullet){var o=r.PlayerBattle.Instance.getEquipID();this.gunSprite.node.active=!0,this.naiJiu.node.active=!0;var n=l.PlayerWeapon.Instance.getGunLocal(o);this.naiJiu.string=":"+n.valueDurability,0==n.valueDurability&&r.PlayerBattle.Instance.changeWeapon()}},e.prototype.playComboNumAct=function(e){var t=this.comboNode.getChildByName("num");t.setScale(.1);var o=this,n=cc.sequence(cc.scaleTo(.16,1),cc.callFunc(function(){o.comboHitShowTimes=1.5}));n.setTag(e),t.runAction(n)},e.prototype.updateWeapon=function(){var e=r.PlayerBattle.Instance.getEquipID();if(0==e)return this.gunSprite.node.active=!1,void(this.naiJiu.node.active=!1);this.gunSprite.node.active=!0,this.naiJiu.node.active=!0;var t=l.PlayerWeapon.Instance.getOwnGun(e),o=l.PlayerWeapon.Instance.getGunLocal(e);i.setSpriteFromRawRes(t.icon,this.gunSprite),this.naiJiu.string=":"+o.valueDurability},__decorate([d(cc.Prefab)],e.prototype,"pauseUI",void 0),__decorate([d(cc.Node)],e.prototype,"changeBtn",void 0),__decorate([d(cc.Node)],e.prototype,"defenceBtn",void 0),__decorate([d(cc.Node)],e.prototype,"helpBtn",void 0),__decorate([d(cc.Label)],e.prototype,"defenceLabel",void 0),__decorate([d(cc.ProgressBar)],e.prototype,"bloodProgressBar",void 0),__decorate([d(cc.Label)],e.prototype,"naiJiu",void 0),__decorate([d(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([d(cc.Prefab)],e.prototype,"weapon1UI",void 0),__decorate([d(cc.Prefab)],e.prototype,"gunBuyeUI",void 0),__decorate([d(cc.Node)],e.prototype,"comboNode",void 0),e=__decorate([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../Data/HelpData":"HelpData","../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],GunBuy:[function(e,t,o){"use strict";cc._RF.push(t,"71718GnBwVDK6k1VTlzeEVV","GunBuy"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Data/GunData"),a=e("../Data/ShopData"),r=e("../Logic/PlayerShop"),l=e("../UICommon"),n=cc._decorator,s=n.ccclass,c=n.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gunSprite=null,e.nameLabel=null,e.atkLabel=null,e.valueLabel=null,e.moneyLabel=null,e.gunType=i.GunType.火箭炮,e}return __extends(e,t),e.prototype.start=function(){this.init(i.GunType.火箭炮)},e.prototype.init=function(e){this.gunType=e;var t=i.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,l.setSpriteFromRawRes(t.icon,this.gunSprite);var o=r.PlayerShop.Instance.gunTypeToShopType(this.gunType);if(0<o){var n=a.ALL_SHOP_ITEM_DATA_MAP[o];this.moneyLabel.string=n.price+"元"}},e.prototype.onFormClick=function(){l.onButtonClicked(),this.node.destroy()},e.prototype.onGetClick=function(){l.onButtonClicked();var e=r.PlayerShop.Instance.gunTypeToShopType(this.gunType);0<e&&this.buyItem(e)},e.prototype.buyItem=function(e){r.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([c(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([c(cc.Label)],e.prototype,"nameLabel",void 0),__decorate([c(cc.Label)],e.prototype,"atkLabel",void 0),__decorate([c(cc.Label)],e.prototype,"valueLabel",void 0),__decorate([c(cc.Label)],e.prototype,"moneyLabel",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],GunData:[function(e,t,o){"use strict";var n;cc._RF.push(t,"48d9fWQdG9BrKketQyHCan2","GunData"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.GunType||(o.GunType={}))[n["黄瓜"]=1]="黄瓜",n[n["辣椒"]=2]="辣椒",n[n["火影初级"]=3]="火影初级",n[n["火影中级"]=4]="火影中级",n[n["火影高级"]=5]="火影高级",n[n["光影初极"]=6]="光影初极",n[n["光影中级"]=7]="光影中级",n[n["光影高级"]=8]="光影高级",n[n["火力喷射炮"]=9]="火力喷射炮",n[n["黄金重狙枪"]=10]="黄金重狙枪",n[n["火箭炮"]=11]="火箭炮",n[n["Spas光线弹"]=12]="Spas光线弹",o.ALL_GUN_DATA=[{id:1,atk:2,speed:0,delay:0,rect:50,name:"黄瓜",value:50,icon:"weapon/w1",price:220},{id:2,atk:4,speed:0,delay:0,rect:45,name:"辣椒",value:50,icon:"weapon/w2",price:240},{id:3,atk:6,speed:3,delay:20,rect:370,name:"火影初级",value:7,icon:"weapon/w3",price:440},{id:4,atk:8,speed:5,delay:30,rect:350,name:"火影中级",value:30,icon:"weapon/w4",price:640},{id:5,atk:16,speed:4,delay:20,rect:350,name:"火影高级",value:30,icon:"weapon/w5",price:1200},{id:6,atk:14,speed:4,delay:20,rect:350,name:"光影初极",value:30,icon:"weapon/w6",price:1e3},{id:7,atk:10,speed:3,delay:20,rect:350,name:"光影中级",value:30,icon:"weapon/w7",price:800},{id:8,atk:20,speed:5,delay:20,rect:350,name:"光影高级",value:50,icon:"weapon/w8",price:1500},{id:9,atk:20,speed:3,delay:20,rect:350,name:"火力喷射炮",value:50,icon:"weapon/w9",price:0},{id:10,atk:62,speed:3,delay:20,rect:350,name:"黄金重狙枪",value:10,icon:"weapon/w10",price:0},{id:11,atk:50,speed:3,delay:20,rect:350,name:"火箭炮",value:20,icon:"weapon/w11",price:0},{id:12,atk:38,speed:2,delay:20,rect:350,name:"Spas光线弹",value:30,icon:"weapon/w12",price:0}],o.ALL_GUN_DATA_MAP={};for(var i=0,a=o.ALL_GUN_DATA;i<a.length;i++){var r=a[i];o.ALL_GUN_DATA_MAP[r.id]=r}cc._RF.pop()},{}],Help1:[function(e,t,o){"use strict";cc._RF.push(t,"67cc1X40VJNUYVjmVOEdLrn","Help1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/HelpData"),i=e("../UICommon"),a=e("../Logic/Player"),r=e("../Logic/PlayerBattle"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.helpSprite=null,e.desLabel=null,e.stepGuide=0,e}return __extends(e,t),e.prototype.init=function(e){this.stepGuide=e;var t=n.ALL_HELP_DATA_MAP[e];if(this.desLabel.string=t.des,i.setSpriteFromRawRes(t.icon,this.helpSprite),n.HelpType.help8==this.stepGuide||n.HelpType.help9==this.stepGuide||n.HelpType.help10==this.stepGuide||n.HelpType.help11==this.stepGuide||n.HelpType.help12==this.stepGuide||n.HelpType.help13==this.stepGuide||n.HelpType.help14==this.stepGuide||n.HelpType.help15==this.stepGuide||n.HelpType.help16==this.stepGuide||n.HelpType.help17==this.stepGuide)r.PlayerBattle.Instance.guideEnemyConfig&&this.setIntColor(r.PlayerBattle.Instance.guideEnemyConfig.color);else if(n.HelpType.help18==this.stepGuide){var o=Date.now();a.Player.Instance.set(a.PlayerAttr.金币商店双倍金币时间,o)}},e.prototype.onDestroy=function(){r.PlayerBattle.Instance.checkHelpGuide()},e.prototype.setIntColor=function(e){var t=e>>16&255,o=e>>8&255,n=255&e;this.helpSprite.node.color=new cc.Color(t,o,n,255)},e.prototype.onFormClick=function(){i.onButtonClicked(),this.node.destroy(),a.Player.Instance.completeGuide(this.stepGuide)},__decorate([c(cc.Sprite)],e.prototype,"helpSprite",void 0),__decorate([c(cc.RichText)],e.prototype,"desLabel",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../UICommon":"UICommon"}],HelpData:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"77911ZyzOVC5q7m3bIMBkUy","HelpData"),Object.defineProperty(o,"__esModule",{value:!0}),(i=n=o.HelpType||(o.HelpType={}))[i.help1=1]="help1",i[i.help2=2]="help2",i[i.help3=4]="help3",i[i.help4=8]="help4",i[i.help5=16]="help5",i[i.help6=32]="help6",i[i.help7=64]="help7",i[i.help8=128]="help8",i[i.help9=256]="help9",i[i.help10=512]="help10",i[i.help11=1024]="help11",i[i.help12=2048]="help12",i[i.help13=4096]="help13",i[i.help14=8192]="help14",i[i.help15=16384]="help15",i[i.help16=32768]="help16",i[i.help17=65536]="help17",i[i.help18=131072]="help18",o.ALL_HELP_DATA=[{id:n.help1,des:"",icon:""},{id:n.help2,des:"",icon:""},{id:n.help3,des:"左上方按键点击切换武器\n本关建议使用下方无敌盾",icon:"help/change"},{id:n.help4,des:"",icon:""},{id:n.help5,des:"永久获得武器一把",icon:"weapon/w3"},{id:n.help6,des:"",icon:""},{id:n.help7,des:"你也可以像孙猴子一样有分身哦，赶快体验吧！",icon:"help/s0"},{id:n.help8,des:"过路的路人乙一枚\n不攻击该角色\n不会主动攻击角色",icon:"help/s0"},{id:n.help9,des:"哈达，看我无敌剪刀脚\n主动攻击角色\n贱人主动攻击",icon:"help/s0"},{id:n.help10,des:"我是个有难同当的人\n主动共计角色\n被打召唤小弟",icon:"help/s0"},{id:n.help11,des:"从天而降的路人丙一枚\n主动攻击角色\n能力暂且不详",icon:"help/s0"},{id:n.help12,des:"这年头谁还用棍子，看棒\n主动攻击角色\n自带武器于身",icon:"help/s0"},{id:n.help13,des:"小样，看你往哪里跑\n主动攻击角色\n快速追击技能",icon:"help/s0"},{id:n.help14,des:"小样，大我可不会痛的！\n主动攻击角色\n自带霸体技能",icon:"help/s0"},{id:n.help15,des:"爱挥拳头的喽喽。。。\n主动攻击角色\n见人主动攻击",icon:"help/s0"},{id:n.help16,des:"警告！出现守关Boss\nBoss带有武器在身上",icon:"help/s0"},{id:n.help17,des:"警告！出现守关Boss\n自身被攻击后会招唤小弟",icon:"help/s0"},{id:n.help18,des:"开启双倍金币购买时间！\n体验更多精彩武器内容！",icon:"help/goldshop"}],o.ALL_HELP_DATA_MAP={};for(var a=0,r=o.ALL_HELP_DATA;a<r.length;a++){var l=r[a];o.ALL_HELP_DATA_MAP[l.id]=l}cc._RF.pop()},{}],Help:[function(e,t,o){"use strict";cc._RF.push(t,"d3176nvhS5AWZym5NOUTXz5","Help"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onFormClick=function(){this.node.destroy()},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],LevelData:[function(e,t,o){"use strict";cc._RF.push(t,"5ca25qK2w5BxYNQiynkLuOZ","LevelData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ALL_LVL_DATA=[{lvl:1,passGuanQia:2,haveWeapon:2,haveMoney:2e3},{lvl:2,passGuanQia:4,haveWeapon:4,haveMoney:4e3},{lvl:3,passGuanQia:6,haveWeapon:8,haveMoney:8e3},{lvl:4,passGuanQia:8,haveWeapon:10,haveMoney:16e3},{lvl:5,passGuanQia:10,haveWeapon:12,haveMoney:32e3}],o.ALL_LVL_DATA_MAP={};for(var n=0,i=o.ALL_LVL_DATA;n<i.length;n++){var a=i[n];o.ALL_LVL_DATA_MAP[a.lvl]=a}cc._RF.pop()},{}],LevelUp:[function(e,t,o){"use strict";cc._RF.push(t,"65b50OtoNlEc6vX7JmnJj2m","LevelUp"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=e("../UICommon"),l=e("../Logic/PlayerLvl"),s=e("../Data/LevelData"),c=e("../Logic/Player"),p=e("../Logic/PlayerWeapon"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lvlStar=[],e.condition=[],e.lvl1Star=[],e.lvl2Star=[],e.lvl3Star=[],e.lvl4Star=[],e.lvl5Star=[],e.effectLab=[],e.btnGet=null,e}return __extends(e,t),e.prototype.onLoad=function(){l.PlayerLvl.Instance.addListener(this)},e.prototype.onDestroy=function(){l.PlayerLvl.Instance.removeListener(this)},e.prototype.start=function(){var e=l.PlayerLvl.Instance.getLvl();this.showLvlStars(e),this.updateCondition(e),this.updateEffect(e)},e.prototype.onUpLvlSuccessNotify=function(){var e=l.PlayerLvl.Instance.getLvl();this.showLvlStars(e),this.updateCondition(e),this.updateEffect(e)},e.prototype.updateEffect=function(o){for(var n=[this.lvl1Star,this.lvl2Star,this.lvl3Star,this.lvl4Star,this.lvl5Star],e=function(e){var t=e<o?cc.Color.WHITE:cc.Color.GRAY;i.effectLab[e].color=t,n[e].forEach(function(e){e.color=t})},i=this,t=0;t<5;t++)e(t)},e.prototype.showLvlStars=function(e){for(var t=0;t<5;t++){var o=t<e;this.lvlStar[t].active=t<e,this.lvlStar[t].stopAllActions(),o&&(this.lvlStar[t].setScale(8),this.lvlStar[t].runAction(cc.scaleTo(.3,1)))}},e.prototype.updateCondition=function(e){if(5==e)this.condition.forEach(function(e){e.node.active=!1,e.node.color=cc.Color.WHITE}),this.condition[1].node.active=!0,this.condition[1].string="星级已满",this.btnGet.active=!1;else if(e<5){var t=e+1,o=s.ALL_LVL_DATA_MAP[t];this.condition[0].string="需要通过关卡"+o.passGuanQia,this.condition[0].node.color=c.Player.Instance.get(c.PlayerAttr.关卡等级)>=o.passGuanQia?cc.Color.WHITE:cc.Color.GRAY,this.condition[1].string="拥有武器数量"+o.haveWeapon,this.condition[1].node.color=p.PlayerWeapon.Instance.getGunLocalNum()>=o.haveWeapon?cc.Color.WHITE:cc.Color.GRAY,this.condition[2].string="拥有金币数量"+o.haveMoney,this.condition[2].node.color=c.Player.Instance.get(c.PlayerAttr.金币)>=o.haveMoney?cc.Color.WHITE:cc.Color.GRAY,this.btnGet.active=!0}},e.prototype.onLvlUpClick=function(){r.onButtonClicked(),l.PlayerLvl.Instance.reqUpLvl()},e.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},__decorate([a(cc.Node)],e.prototype,"lvlStar",void 0),__decorate([a(cc.Label)],e.prototype,"condition",void 0),__decorate([a(cc.Node)],e.prototype,"lvl1Star",void 0),__decorate([a(cc.Node)],e.prototype,"lvl2Star",void 0),__decorate([a(cc.Node)],e.prototype,"lvl3Star",void 0),__decorate([a(cc.Node)],e.prototype,"lvl4Star",void 0),__decorate([a(cc.Node)],e.prototype,"lvl5Star",void 0),__decorate([a(cc.Node)],e.prototype,"effectLab",void 0),__decorate([a(cc.Node)],e.prototype,"btnGet",void 0),e=__decorate([i],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/LevelData":"LevelData","../Logic/Player":"Player","../Logic/PlayerLvl":"PlayerLvl","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"5fc6dfTZdJC6L8p3nZ6IlbG","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressTime=null,e.time=0,e.leftTime=0,e}return __extends(e,t),e.prototype.start=function(){console.log("Loading start function")},e.prototype.startLoading=function(){this.node.active=!0,this.time<0&&(this.time=1),this.leftTime=0},e.prototype.update=function(e){this.leftTime+=e;var t=n.PlayerBattle.Instance.getLoadingStep();t==n.LoadingStep.Loading_Scene&&this.leftTime>this.time/3?this.leftTime=this.time/3:t==n.LoadingStep.Loading_UI&&this.leftTime>this.time/3*2&&(this.leftTime=this.time/3*2),this.progressTime.progress=this.leftTime/this.time,this.leftTime>this.time&&(this.node.active=!1,n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_StartCountDown))},__decorate([r(cc.ProgressBar)],e.prototype,"progressTime",void 0),__decorate([r],e.prototype,"time",void 0),e=__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}],LocalData:[function(e,t,o){"use strict";cc._RF.push(t,"8d83anZJLhCXal2uuK1P2ho","LocalData"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Player"),i=e("./PlayerAchieve"),a=e("./PlayerLvl"),r=e("./PlayerWeapon"),l=function(){function e(){this.bInit=!1,this.bRead=!1,this.init()}return e.prototype.init=function(){if(!this.bInit){console.log("LocalData.init()"),this.bInit=!0;var e=this;cc.game.on(cc.game.EVENT_HIDE,function(){e.save()})}},e.prototype.read=function(){this.bRead||(this.bRead=!0,n.Player.Instance.read(),i.PlayerAchieve.Instance.read(),a.PlayerLvl.Instance.read(),r.PlayerWeapon.Instance.read(),console.log("LocalData.read()"))},e.prototype.save=function(){n.Player.Instance.save(),i.PlayerAchieve.Instance.save(),a.PlayerLvl.Instance.save(),r.PlayerWeapon.Instance.save(),console.log("LocalData.save()")},e.Instance=new e,e}();o.LocalData=l,cc._RF.pop()},{"./Player":"Player","./PlayerAchieve":"PlayerAchieve","./PlayerLvl":"PlayerLvl","./PlayerWeapon":"PlayerWeapon"}],Map:[function(e,t,o){"use strict";cc._RF.push(t,"deaefGaAaBF1K7lWJMLWw7k","Map"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleEnemy"),i=e("./RoleHero"),s=e("./RoleBase"),a=e("./ControlHeroByKeyboard"),p=e("./SkillData"),f=e("./AudioMgr"),r=e("./Logic/PlayerBattle"),l=e("./Logic/Player"),c=e("./EquipData"),u=e("./UI/Game"),m=e("./SpriteAnim"),h=cc._decorator,d=h.ccclass,y=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skyMoveFactor=.5,e.hitParticle=null,e.gunfireParticle=null,e.wudiParticle=null,e.gameNode=null,e.gameComponent=null,e.GROUND_HEIGHT=120,e}return __extends(e,t),e.prototype.onLoad=function(){this.gameComponent=this.gameNode.getComponent(u.default),r.PlayerBattle.Instance.setMap(this)},e.prototype.start=function(){this.isGameOver=!1,this.killEnemies=0;var e=new cc.Node;this.bgSprite1=e.addComponent(cc.Sprite),this.node.addChild(e);var t=new cc.Node;this.bgSprite2=t.addComponent(cc.Sprite),this.node.addChild(t);var o=new cc.Node;this.bgTiledMap=o.addComponent(cc.TiledMap),this.node.addChild(o),this.initPositionOfSprite1=null,this.initPositionOfTiled=null,this.initPositionOfRoles=null,this.scaleOfSprite=1,this.scaledSpriteWidth=0,this.scaleOfTiled=1,this.mapConfig=null,this.enemiesConfig=null,this.rolesNode=new cc.Node,this.node.addChild(this.rolesNode),this.roleEnemies=null,this.roleHero=null;this.scrollOffset=0;this.loadMap(r.PlayerBattle.Instance.getAttackGuanQia(),function(){r.PlayerBattle.Instance.loadingComplete(r.LoadingStep.Loading_UI)})},e.prototype.loadMap=function(e,y){var g=this;p.loadSkillData(),c.loadEquipData(),cc.loader.loadRes("map/map"+e,cc.TiledMapAsset,function(e,t){if(e)console.log(e);else{g.mapConfig=null,g.enemiesConfig=[],g.bgTiledMap.tmxAsset=t;for(var o=0,n=g.bgTiledMap.getObjectGroups();o<n.length;o++)for(var i=0,a=n[o].getObjects();i<a.length;i++){var r=a[i],l=r.getProperties();"map"==r.getObjectName()?g.mapConfig={bgid:Number(l.bgid),enemysum:Number(l.enemysum),isend:Number(l.isend)}:g.enemiesConfig.push({name:r.getObjectName(),x:l.x,y:l.y,width:l.width,height:l.height,act:Number(l.act),color:Number(l.color),delayTime:Number(l.delaytime),equipId:Number(l.equipid),hp:Number(l.hp),t0:Number(l.t0),t1:Number(l.t1),t2:Number(l.t2),t3:Number(l.t3),enemytype:Number(l.enemytype)})}var s=g.bgTiledMap.node.getChildByName("objects");s&&(s.active=!1);var c=g.bgTiledMap.node,p=g.bgTiledMap.node.getContentSize(),u=cc.director.getVisibleSize(),h=u.height/p.height;c.setScale(h),(l=c.getAnchorPoint()).x=1-l.x,l.y=1-l.y,l.mulSelf(h),l.x*=p.width,l.y*=p.height,l.addSelf(cc.director.getVisibleOrigin()),l.x-=.5*u.width,l.y-=.5*u.height,c.setPosition(l),g.initPositionOfTiled=l,g.scaleOfTiled=h,g.rolesNode.removeAllChildren(),g.rolesNode.setScale(h),g.rolesNode.setPosition(-.5*u.width,-.5*u.height),g.initPositionOfRoles=new cc.Vec2(-.5*u.width,-.5*u.height),g._initHero();var d=function(e){var t;e?(g.bgSprite1.spriteFrame=e,t=(g.bgSprite2.spriteFrame=e).getOriginalSize()):t=new cc.Size(0,0);var o=g.bgSprite1.node,n=g.bgSprite2.node,i=cc.director.getVisibleSize(),a=16*i.height/9/t.width;g.bgSprite1.node.setScale(a),g.bgSprite2.node.setScale(a);var r=o.getAnchorPoint();r.x=1-r.x,r.y=1-r.y,r.mulSelf(a),r.x*=t.width,r.y*=t.height,r.addSelf(cc.director.getVisibleOrigin()),r.x-=.5*i.width,r.y-=.5*i.height,r.y+=i.height-t.height*a,o.setPosition(r),g.initPositionOfSprite1=r,g.scaleOfSprite=a,g.scaledSpriteWidth=t.width*g.scaleOfSprite,n.setPosition(r.x+t.width*a,r.y),y&&y()};0!=g.mapConfig.bgid?cc.loader.loadRes("map/BG"+g.mapConfig.bgid,cc.SpriteFrame,function(e,t){e?(console.log(e),d(null)):d(t)}):d(null)}})},e.prototype._initHero=function(){this.bgTiledMap.node.getContentSize().height;this.roleEnemies=[];var e=new cc.Node,t=e.addComponent(i.default);this.rolesNode.addChild(e),(this.roleHero=t).ownerMap=this,t.initWithConfig();var o=this.getComponent(a.default);o&&(o.targetInput=t.stateMachine),this.bulletsOfEnemy=[],this.bulletsOfHero=[]},e.prototype.initEnemies=function(){this.roleEnemies=[];for(var e=0,t=this.enemiesConfig;e<t.length;e++){var o=t[e];this.addEnemy(o)}},e.prototype.setScroll=function(e){var t=cc.director.getVisibleSize().width,o=cc.clampf(e*this.scaleOfTiled-.5*t,0,this.bgTiledMap.node.getContentSize().width*this.scaleOfTiled-t),n=this.initPositionOfTiled.x-o;if(this.bgTiledMap.node.setPositionX(n),this.rolesNode.setPositionX(this.initPositionOfRoles.x-o),this.scrollOffset=o,this.bgSprite1.spriteFrame){for(var i=o*this.skyMoveFactor,a=this.scaledSpriteWidth,r=cc.director.getVisibleOrigin().x,l=this.initPositionOfSprite1.x-i;l+a<r;)l+=a;this.bgSprite1.node.setPositionX(l),this.bgSprite2.node.setPositionX(l+a)}},e.prototype._checkHit=function(){for(var a=this,r=s.default.RoleBoxIntersection,l=function(e,t){if(r(e.boxAttacking,t.boxBeAttacked))return e.boxAttacking;for(var o=0,n=e.fenshenList;o<n.length;o++){var i=n[o];if(r(i.boxAttacking,t.boxBeAttacked))return i.boxAttacking}return null},e=function(e,t){if(t.isWuDi)return!1;var o=t.hitters.indexOf(e);if(o<0){var n=void 0;if(t.stateMachine.getCurrentStateId()!=p.SMState.LYING&&null!=(n=l(e,t))){t.hitters.push(e),t.onHitByOther(e);var i=cc.instantiate(a.hitParticle);return a.rolesNode.addChild(i),i.setPosition(n.x,n.y),f.myAudioMgr.playSFX("w0-0.ogg"),!0}}else l(e,t)||t.hitters.splice(o,1);return!1},t=0,o=this.roleEnemies;t<o.length;t++){var n=o[t];e(this.roleHero,n)||e(n,this.roleHero)}},e.prototype.getGrabTarget=function(e,n,i){var a=this,r=e.node.getPositionX(),l=e.isFaceRight,t=function(e){if(e.lifePoint<=0||e.isWuDi)return!1;var t=e.stateMachine.getCurrentStateId();if(t==p.SMState.IDLE||t==p.SMState.BLOCKED){if(e.node.getPositionY()>a.GROUND_HEIGHT)return!1;if(t==p.SMState.BLOCKED&&e.stateMachine.getVariable(p.SMVariable.HitBySkillID)==i)return!1;var o=e.node.getPositionX();return l?r<=o&&o<=r+n:o<=r&&r-n<=o}return!1};if(e==this.roleHero)for(var o=0,s=this.roleEnemies;o<s.length;o++){var c=s[o];if(t(c))return c}else if(t(this.roleHero))return this.roleHero;return null},e.prototype.updateHeroHp=function(){var e=this.roleHero.maxLifePoint,t=this.roleHero.lifePoint/e;(this.gameComponent.bloodProgressBar.progress=t)<1/3&&this.gameComponent.showHelpBtn()},e.prototype.updateHeroFuhuoState=function(){if(l.Player.Instance.isFuHuo&&(this.roleHero.lifePoint=l.Player.Instance.getHp(),this.roleHero.stateMachine.setState(p.SMState.IDLE),this.isGameOver=!1,l.Player.Instance.isWuDi=!0,l.Player.Instance.isFuHuo=!1),l.Player.Instance.isWuDi){this.roleHero.isWuDi=!0,l.Player.Instance.isWuDi=!1,this.wudiBeginTime=Date.now(),this.roleHero.node.setScale(1.2*(this.roleHero.isFaceRight?1:-1),1.2);var e=cc.instantiate(this.wudiParticle);this.rolesNode.addChild(e),e.setPosition(this.roleHero.node.x,2*this.roleHero.node.y-20)}if(this.roleHero&&this.roleHero.isWuDi){var t=1e5-(Date.now()-this.wudiBeginTime);t<=0?(this.roleHero.isWuDi=!1,this.gameComponent.setWudiTime(0),this.roleHero.node.setScale(1*(this.roleHero.isFaceRight?1:-1),1)):this.gameComponent.setWudiTime(t)}},e.prototype.update=function(e){if(!r.PlayerBattle.Instance.isPause()&&(this.updateHeroFuhuoState(),r.BattleStatus.BattleStatus_Begin==r.PlayerBattle.Instance.getStatus())){if(this.roleHero&&(this.roleHero.myUpdate(e),this.setScroll(this.roleHero.node.getPositionX())),this.roleEnemies){for(var t=0,o=this.roleEnemies;t<o.length;t++){o[t].myUpdate(e)}this._checkHit(),this.updateHeroHp()}this.bulletsOfHero&&this.updateBullets(e,this.bulletsOfHero,this.roleEnemies),this.bulletsOfEnemy&&this.updateBullets(e,this.bulletsOfEnemy,[this.roleHero])}},e.prototype.updateBullets=function(e,u,h){for(var t=u.length-1;0<=t;--t){var o=u[t];if(o.myUpdate(e),o.lifeTime<=0)if(o.node.removeFromParent(),u.splice(t,1),9==o.equipData.equipid||10==o.equipData.equipid)for(var n=0,i=h;n<i.length;n++){var a=i[n],r=a.hitterBullets.indexOf(o);0<=r&&a.hitterBullets.splice(r,1)}}var d=s.default.RoleBoxIntersection,y={valid:!0,x:0,y:0,width:0,height:0},l=function(e){var t=u[e],o=t.node.getContentSize();y.width=o.width,y.height=o.height,y.x=t.node.getPositionX(),y.y=t.node.getPositionY(),t.speed<0&&(y.x-=y.width);for(var n=!1,i=9==t.equipData.equipid||10==t.equipData.equipid,a=9==t.equipData.equipid||11==t.equipData.equipid,r=!1,l=0,s=h;l<s.length;l++){var c=s[l];if(!c.isWuDi&&d(y,c.boxBeAttacked)&&c.hitterBullets.indexOf(t)<0){if(c.onHitByBullet(t),i&&c.hitterBullets.push(t),n=!0,!a)break;if(!r){r=!0;if(y.x-=2*y.width*.5,y.y-=2*y.height*.5,y.width+=2*y.width,y.height+=2*y.height,11==t.equipData.equipid){var p=new cc.Node;p.setPosition(t.node.getPosition()),g.rolesNode.addChild(p),p.addComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,p.addComponent(m.default).init(["gunb-2-1","gunb-2-2","gunb-2-3","gunb-2-4"].map(function(e){return t.ownerRole.dragonBonesConfig.bulletAtlas.getSpriteFrame(e)}),30,!0),f.myAudioMgr.playSFX("beq-11.ogg")}}}}!i&&n&&(t.node.removeFromParent(),u.splice(e,1))},g=this;for(t=u.length-1;0<=t;--t)l(t)},e.prototype.afterRoleDie=function(e){if(e===this.roleHero)this.isGameOver||(r.PlayerBattle.Instance.changeStatus(r.BattleStatus.BattleStatus_Failed),this.isGameOver=!0);else{var t=this.roleEnemies.indexOf(e);0<=t&&(this.roleEnemies.splice(t,1),e.node.removeFromParent(),l.Player.Instance.increase(l.PlayerAttr.杀敌数量,1)),this.killEnemies=this.killEnemies+1,0==this.roleEnemies.length&&(this.isGameOver=!0,r.PlayerBattle.Instance.BattleResultWin(this.killEnemies))}},e.prototype.addEnemy=function(e){var t=new cc.Node,o=t.addComponent(n.default);this.rolesNode.addChild(t),this.roleEnemies.push(o),o.ownerMap=this,o.initWithConfig(e)},e.prototype.summonEnemy=function(e){var t=this.enemiesConfig[Math.floor(Math.random()*this.enemiesConfig.length)],o={name:"summon",x:e.node.getPositionX()+300*(Math.random()-.5),y:0,width:0,height:0,act:t.act,color:t.color,delayTime:t.delayTime,equipId:0,hp:t.hp,t0:3,t1:8,t2:3,t3:8,enemytype:1};this.addEnemy(o)},__decorate([y],e.prototype,"skyMoveFactor",void 0),__decorate([y(cc.Prefab)],e.prototype,"hitParticle",void 0),__decorate([y(cc.Prefab)],e.prototype,"gunfireParticle",void 0),__decorate([y(cc.Prefab)],e.prototype,"wudiParticle",void 0),__decorate([y(cc.Node)],e.prototype,"gameNode",void 0),e=__decorate([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./ControlHeroByKeyboard":"ControlHeroByKeyboard","./EquipData":"EquipData","./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./RoleBase":"RoleBase","./RoleEnemy":"RoleEnemy","./RoleHero":"RoleHero","./SkillData":"SkillData","./SpriteAnim":"SpriteAnim","./UI/Game":"Game"}],Music:[function(e,t,o){"use strict";cc._RF.push(t,"fae49VAZOVI3JoJzUtodZ8y","Music"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../AudioMgr"),a=cc._decorator,r=a.ccclass,l=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bgOnBtn=null,e.bgOffBtn=null,e.effectOnBtn=null,e.effectOffBtn=null,e}return __extends(e,t),e.prototype.onLoad=function(){0<i.myAudioMgr.getSFXVolume()?(this.bgOnBtn.node.active=!0,this.bgOffBtn.node.active=!1):(this.bgOnBtn.node.active=!1,this.bgOffBtn.node.active=!0),0<i.myAudioMgr.getBGMVolume()?(this.effectOnBtn.node.active=!0,this.effectOffBtn.node.active=!1):(this.effectOnBtn.node.active=!1,this.effectOffBtn.node.active=!0)},e.prototype.onConformClick=function(){n.onButtonClicked(),this.node.destroy()},e.prototype.onBgOnClick=function(){n.onButtonClicked(),i.myAudioMgr.setBGMVolume(0),this.bgOnBtn.node.active=!1,this.bgOffBtn.node.active=!0},e.prototype.onBgOffClick=function(){n.onButtonClicked(),i.myAudioMgr.setBGMVolume(1),this.bgOnBtn.node.active=!0,this.bgOffBtn.node.active=!1},e.prototype.onEffectOnClick=function(){n.onButtonClicked(),i.myAudioMgr.setSFXVolume(0),this.effectOnBtn.node.active=!1,this.effectOffBtn.node.active=!0},e.prototype.onEffectOffClick=function(){n.onButtonClicked(),i.myAudioMgr.setSFXVolume(1),this.effectOnBtn.node.active=!0,this.effectOffBtn.node.active=!1},__decorate([l(cc.Button)],e.prototype,"bgOnBtn",void 0),__decorate([l(cc.Button)],e.prototype,"bgOffBtn",void 0),__decorate([l(cc.Button)],e.prototype,"effectOnBtn",void 0),__decorate([l(cc.Button)],e.prototype,"effectOffBtn",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../UICommon":"UICommon"}],Pause:[function(e,t,o){"use strict";cc._RF.push(t,"c5c211VUmlGopSMThJnK/V4","Pause"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money11Label=null,e.money22Label=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initOnlyMoney(n.ShopItemType.金币22500,this.money11Label),this.initOnlyMoney(n.ShopItemType.金币12500,this.money22Label)},e.prototype.start=function(){},e.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},e.prototype.onFormClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy()},e.prototype.onBtn1Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.金币22500)},e.prototype.onBtn2Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.金币12500)},e.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},e.prototype.onExitGameClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy(),a.switchToScene("Begin")},__decorate([s(cc.Label)],e.prototype,"money11Label",void 0),__decorate([s(cc.Label)],e.prototype,"money22Label",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],PlayerAchieve:[function(e,t,o){"use strict";cc._RF.push(t,"beef1GeSSFOS5UgPtYLkFA0","PlayerAchieve"),Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Player"),c=e("../Data/AchieveData"),l=e("../UI/Achievement1"),n=function(){function e(){this._arrlvl={}}return e.prototype.getAchievementLvl=function(e){var t=s.PlayerAttr.成功过关次数,o=-1;if(e==c.AchieveType.过关达人)t=s.PlayerAttr.成功过关次数;else if(e==c.AchieveType.地狱达人)t=s.PlayerAttr.主角死亡次数;else if(e==c.AchieveType.重生达人)t=s.PlayerAttr.主角复活次数;else if(e==c.AchieveType.杀手)t=s.PlayerAttr.杀敌数量;else if(e==c.AchieveType.抓金手)t=s.PlayerAttr.获得金币总数;else if(e==c.AchieveType.武器达人)t=s.PlayerAttr.武器耐久总消耗数;else if(e==c.AchieveType.过肩摔)t=s.PlayerAttr.过肩摔完成次数;else{if(e!=c.AchieveType.格斗达人)return o;t=s.PlayerAttr.绝招使用次数}return this.checkComplete(t),null==(o=this._arrlvl[e])&&(o=-1),o},e.prototype.isAchievementMaxLvl=function(e){return 4<=this.getAchievementLvl(e)},e.prototype.checkComplete=function(e){var t=c.AchieveType.过关达人;if(e==s.PlayerAttr.成功过关次数)t=c.AchieveType.过关达人;else if(e==s.PlayerAttr.主角死亡次数)t=c.AchieveType.地狱达人;else if(e==s.PlayerAttr.主角复活次数)t=c.AchieveType.重生达人;else if(e==s.PlayerAttr.杀敌数量)t=c.AchieveType.杀手;else if(e==s.PlayerAttr.获得金币总数)t=c.AchieveType.抓金手;else if(e==s.PlayerAttr.武器耐久总消耗数)t=c.AchieveType.武器达人;else if(e==s.PlayerAttr.过肩摔完成次数)t=c.AchieveType.过肩摔;else{if(e!=s.PlayerAttr.绝招使用次数)return;t=c.AchieveType.格斗达人}var o=s.Player.Instance.get(e),n=c.ALL_ACHIEVE_DATA_MAP[t],i=this._arrlvl[t];null==i&&(i=-1);for(var a=i,r=0,l=0;l<n.target.length;l++)o>=n.target[l]&&a<l&&(a=l,this._arrlvl[t]=a,console.log("获得成就"+c.AchieveType[t]+"等级"+a),r+=n.award[l]);a!=i&&this.showCompleteAchieveTip(t,a),0!=r&&s.Player.Instance.increase(s.PlayerAttr.金币,r)},e.prototype.showCompleteAchieveTip=function(a,r){r<0||4<r?console.log("error: showCompleteAchieveTip等级"+r):cc.loader.loadRes("prefab/achievement_1",function(e,t){if(e)console.log(e);else{var o=cc.director.getScene();if(null!=o){var n=o.getChildByName("Canvas");if(null!=n){var i=cc.instantiate(t);n.addChild(i,1),i.getComponent(l.default).show(a,r)}}}})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("ACHIEVE");for(var t in e&&(this._arrlvl=JSON.parse(e)),this._arrlvl)this._arrlvl.hasOwnProperty(t)&&console.log("成就"+c.AchieveType[t]+"等级"+this._arrlvl[t])},e.prototype.save=function(){var e=JSON.stringify(this._arrlvl);cc.sys.localStorage.setItem("ACHIEVE",e)},e.Instance=new e,e}();o.PlayerAchieve=n,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../UI/Achievement1":"Achievement1","./Player":"Player"}],PlayerBattle:[function(e,t,n){"use strict";cc._RF.push(t,"60b8dKeFx1FGbSEQthBTI5S","PlayerBattle"),Object.defineProperty(n,"__esModule",{value:!0});var i,o,a,r,l,s,c=e("../UICommon"),p=e("./Player"),u=e("../Data/GunData"),h=e("./PlayerWeapon"),d=e("../UI/Loading"),y=e("../Data/HelpData"),g=e("../UI/Help1"),f=e("./PlayerLvl"),m=e("./PlayerShop");n.MaxGuanQia=30,(o=i=n.BattleStatus||(n.BattleStatus={}))[o.BattleStatus_None=0]="BattleStatus_None",o[o.BattleStatus_Load=1]="BattleStatus_Load",o[o.BattleStatus_StartCountDown=2]="BattleStatus_StartCountDown",o[o.BattleStatus_Begin=3]="BattleStatus_Begin",o[o.BattleStatus_Win=4]="BattleStatus_Win",o[o.BattleStatus_Failed=5]="BattleStatus_Failed",o[o.BattleStatus_NextBattle=6]="BattleStatus_NextBattle",(r=a=n.BattleEvent||(n.BattleEvent={}))[r.BattleEvent_ChangeWeapon=0]="BattleEvent_ChangeWeapon",r[r.BattleEvent_UseBullet=1]="BattleEvent_UseBullet",r[r.BattleEvent_Bleed=2]="BattleEvent_Bleed",r[r.BattleEvent_HitEnemy=3]="BattleEvent_HitEnemy",(s=l=n.LoadingStep||(n.LoadingStep={}))[s.LoadingStep_Begin=0]="LoadingStep_Begin",s[s.Loading_Scene=1]="Loading_Scene",s[s.Loading_UI=2]="Loading_UI",s[s.LoadingStep_End=3]="LoadingStep_End";var _=function(){function o(){this.status=i.BattleStatus_None,this.gameUI=null,this.hero=null,this.map=null,this.killEnemies=0,this.getGlod=0,this.equipID=0,this.loadingNode=null,this.loadingStep=l.LoadingStep_Begin,this.arrPauseUI=[],this.guideEnemyConfig=null,this.cleanData()}return o.prototype.setStatus=function(e){this.status=e},o.prototype.changeStatus=function(e){if(this.status!=e)switch(this.status=e){case i.BattleStatus_Load:this.onEnterStatusLoad();break;case i.BattleStatus_StartCountDown:this.onEnterStatusStartCountDown();break;case i.BattleStatus_Begin:this.onEnterStatusBegin();break;case i.BattleStatus_Win:this.onEnterStatusWin();break;case i.BattleStatus_Failed:this.onEnterStatusFailed();break;case i.BattleStatus_NextBattle:this.onEnterStatusNextBattle()}},o.prototype.setHero=function(e){this.hero=e},o.prototype.setMap=function(e){this.map=e},o.prototype.setGameUI=function(e){this.gameUI=e},o.prototype.getEquipID=function(){return this.equipID},o.prototype.getStatus=function(){return this.status},o.prototype.setPause=function(e){null==this.arrPauseUI&&(this.arrPauseUI=[]),-1==this.arrPauseUI.indexOf(e)&&this.arrPauseUI.push(e)},o.prototype.removePause=function(e){null==this.arrPauseUI&&(this.arrPauseUI=[]);var t=this.arrPauseUI.indexOf(e);-1!=t&&this.arrPauseUI.splice(t,1)},o.prototype.isPause=function(){return this.arrPauseUI&&0!=this.arrPauseUI.length},o.prototype.getLoadingStep=function(){return this.loadingStep},o.prototype.loadingComplete=function(e){e==l.Loading_Scene?this.loadingStep=l.Loading_UI:e==l.Loading_UI&&(this.loadingStep=l.LoadingStep_End)},o.prototype.getAttackGuanQia=function(){var e=p.Player.Instance.get(p.PlayerAttr.关卡等级);return Math.min(e+1,n.MaxGuanQia)},o.prototype.changeWeapon=function(){var e=h.PlayerWeapon.Instance.getOwnUsableGuns();e.sort(function(e,t){return e.id-t.id});for(var t=0,o=0;o<e.length;o++){var n=e[o];if(this.equipID<n.id){t=n.id;break}}this.equipID=t,console.log("changeWeapon"+this.equipID),this.hero&&(this.hero.equipid=this.equipID),this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_ChangeWeapon)},o.prototype.UseBullet=function(e){h.PlayerWeapon.Instance.UseBullet(this.equipID,e),this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_UseBullet)},o.prototype.Bleed=function(e){this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_Bleed)},o.prototype.HitEnemy=function(e){this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_HitEnemy)},o.prototype.BattleResultWin=function(e){this.killEnemies=e;var t=p.Player.Instance.get(p.PlayerAttr.关卡等级);this.getGlod=this.killEnemies*(t+10),p.Player.Instance.increase(p.PlayerAttr.获得金币总数,this.getGlod),o.Instance.changeStatus(i.BattleStatus_Win)},o.prototype.getBattleWinResult=function(){return{killNum:this.killEnemies,getGold:this.getGlod}},o.prototype.enemyActive=function(e){var t=0,o=(this.guideEnemyConfig=e).enemytype;2==o?t=y.HelpType.help8:6==o?t=y.HelpType.help9:14==o?t=y.HelpType.help10:15==o?t=y.HelpType.help11:10==o?t=y.HelpType.help12:12==o?t=y.HelpType.help13:9==o?t=y.HelpType.help14:5==o||(32==o?t=y.HelpType.help16:30==o&&(t=y.HelpType.help17)),0!=t&&this.checkHelpSubGuide(t)},o.prototype.checkHelpGuide=function(){if(null!=cc.director.getScene()&&"Test"==cc.director.getScene().name){var e=p.Player.Instance.get(p.PlayerAttr.新手引导),t=[];t.push(y.HelpType.help3),t.push(y.HelpType.help15);for(var o=0;o<t.length;o++){var n=t[o];if(0==(e&n)){this.checkHelpSubGuide(n);break}}}},o.prototype.checkHelpSubGuide=function(n){if(!p.Player.Instance.isGuideComplete(n)){if(h.PlayerWeapon.Instance.isHaveGun(u.GunType.火箭炮)){if(y.HelpType.help2==n||y.HelpType.help4==n)return void p.Player.Instance.completeGuide(n)}else if(h.PlayerWeapon.Instance.isHaveGun(u.GunType.火影初级)){if(y.HelpType.help5==n)return void p.Player.Instance.completeGuide(n)}else if(f.PlayerLvl.Instance.isHaveThreeBody()&&y.HelpType.help7==n)return void p.Player.Instance.completeGuide(n);switch(n){case y.HelpType.help1:break;case y.HelpType.help2:cc.loader.loadRes("prefab/present_1",function(e,t){if(e)console.log(e);else{var o=cc.instantiate(t);cc.director.getScene().addChild(o)}});break;case y.HelpType.help3:case y.HelpType.help5:case y.HelpType.help8:case y.HelpType.help9:case y.HelpType.help10:case y.HelpType.help11:case y.HelpType.help12:case y.HelpType.help13:case y.HelpType.help14:case y.HelpType.help15:case y.HelpType.help16:case y.HelpType.help17:cc.loader.loadRes("prefab/help_1",function(e,t){if(e)console.log(e);else{var o=cc.instantiate(t);cc.director.getScene().addChild(o),o.getComponent(g.default).init(n)}});break;case y.HelpType.help4:cc.loader.loadRes("prefab/gun_buy",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t),10)});break;case y.HelpType.help6:break;case y.HelpType.help7:this.hero.setFenShen(!0),cc.loader.loadRes("prefab/fenshen",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))});break;case y.HelpType.help18:cc.loader.loadRes("prefab/help_1",function(e,t){if(e)console.log(e);else{var o=cc.instantiate(t);cc.director.getScene().addChild(o,1),o.getComponent(g.default).init(n)}})}}},o.prototype.cleanData=function(){this.killEnemies=0,this.getGlod=0,this.equipID=0,this.gameUI=null,this.hero=null,this.map=null,this.arrPauseUI=[],this.loadingStep=l.LoadingStep_Begin},o.prototype.onEnterStatusLoad=function(){this.cleanData(),this.loadingStep=l.Loading_Scene;var o=this;null==this.loadingNode?cc.loader.loadRes("prefab/loading",function(e,t){e?console.log(e):(o.loadingNode=cc.instantiate(t),cc.director.getScene().addChild(o.loadingNode),cc.game.addPersistRootNode(o.loadingNode),o.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){o.loadingComplete(l.Loading_Scene)}))}):(o.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){o.loadingComplete(l.Loading_Scene)}))},o.prototype.onEnterStatusStartCountDown=function(){cc.loader.loadRes("prefab/game_begin",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},o.prototype.onEnterStatusBegin=function(){var e=this.getAttackGuanQia();1==e?(this.checkHelpSubGuide(y.HelpType.help2),h.PlayerWeapon.Instance.isHaveGun(u.GunType.火箭炮)&&this.checkHelpGuide()):2==e?p.Player.Instance.isGuideComplete(y.HelpType.help5)||(h.PlayerWeapon.Instance.addOwnGun(u.GunType.火影初级),this.checkHelpSubGuide(y.HelpType.help5)):3==e?this.checkHelpSubGuide(y.HelpType.help7):this.checkHelpGuide(),this.map&&this.map.initEnemies(),3<=e&&1==e%2&&p.Player.Instance.isGuideComplete(y.HelpType.help7)&&m.PlayerShop.Instance.showGiftPresent()},o.prototype.onEnterStatusWin=function(){(cc.loader.loadRes("prefab/win",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))}),1==this.getAttackGuanQia())&&(0!=h.PlayerWeapon.Instance.getGuideGunID()&&o.Instance.checkHelpSubGuide(y.HelpType.help4),0==p.Player.Instance.get(p.PlayerAttr.金币商店双倍金币时间)&&o.Instance.checkHelpSubGuide(y.HelpType.help18));p.Player.Instance.increase(p.PlayerAttr.成功过关次数),this.getAttackGuanQia()>=p.Player.Instance.get(p.PlayerAttr.关卡等级)&&p.Player.Instance.increase(p.PlayerAttr.关卡等级)},o.prototype.onEnterStatusFailed=function(){cc.loader.loadRes("prefab/revive",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))}),p.Player.Instance.increase(p.PlayerAttr.主角死亡次数)},o.prototype.onEnterStatusNextBattle=function(){this.cleanData();var e=this;e.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){e.loadingComplete(l.Loading_Scene)})},o.Instance=new o,o}();n.PlayerBattle=_,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/HelpData":"HelpData","../UI/Help1":"Help1","../UI/Loading":"Loading","../UICommon":"UICommon","./Player":"Player","./PlayerLvl":"PlayerLvl","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],PlayerLvl:[function(e,t,o){"use strict";cc._RF.push(t,"edf559qu/dDaavHOueMixFz","PlayerLvl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/LevelData"),i=e("./Player"),a=e("./PlayerWeapon"),r=e("./PlayerShop"),l=e("../Data/ShopData"),s=0;o.PlayerMaxLvl=5;var c=function(){function e(){this.lvl=s,this._eventListener=null}return e.prototype.getLvl=function(){return this.lvl},e.prototype.reqUpLvl=function(){if(!(this.lvl>=o.PlayerMaxLvl)){var e=n.ALL_LVL_DATA_MAP[this.lvl+1];i.Player.Instance.get(i.PlayerAttr.关卡等级)>=e.passGuanQia&&a.PlayerWeapon.Instance.getGunLocalNum()>=e.haveWeapon&&i.Player.Instance.get(i.PlayerAttr.金币)>=e.haveMoney?this.upLvl():r.PlayerShop.Instance.buyByRMB(l.ShopItemType.直接过关,null)}},e.prototype.upLvl=function(){++this.lvl,this.lvl=Math.min(this.lvl,o.PlayerMaxLvl),this.eventNotify()},e.prototype.getLifeAdd=function(){return 1<=this.lvl?50:0},e.prototype.getAtkAdd=function(){return 2<=this.lvl?50:0},e.prototype.getReduceDamage=function(){return 3<=this.lvl?50:0},e.prototype.isHaveThreeBody=function(){return 4<=this.lvl},e.prototype.isNoneKnockDown=function(){return 5<=this.lvl},e.prototype.showLvlUpUI=function(){cc.loader.loadRes("prefab/level_up",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},e.prototype.addListener=function(e){null==this._eventListener&&(this._eventListener=[]),-1==this._eventListener.indexOf(e)&&this._eventListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._eventListener){var t=this._eventListener.indexOf(e);-1!=t&&this._eventListener.splice(t,1)}},e.prototype.eventNotify=function(){null!=this._eventListener&&this._eventListener.forEach(function(e){e.onUpLvlSuccessNotify()})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("LVL");e&&(this.lvl=parseInt(e)),console.log("角色等级="+this.lvl)},e.prototype.save=function(){cc.sys.localStorage.setItem("LVL",this.lvl.toString())},e.Instance=new e,e}();o.PlayerLvl=c,cc._RF.pop()},{"../Data/LevelData":"LevelData","../Data/ShopData":"ShopData","./Player":"Player","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],PlayerShop:[function(e,t,o){"use strict";cc._RF.push(t,"07eb8meZqxHuK/4DujVoLcO","PlayerShop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Data/GunData"),a=e("./Player"),r=e("./PlayerWeapon"),l=e("./PlayerLvl"),s=e("./LocalData"),c=e("../Logic/PlayerBattle"),p=function(){function e(){this.showNode=null,this._eventListener=null}return e.prototype.buyByRMB=function(e,t){this.showNode=t,this.buySuccessCallBack(e)},e.prototype.buySuccessCallBack=function(e){switch(this.showNode&&(this.showNode.destroy(),this.showNode=null),e){case n.ShopItemType.火箭炮:r.PlayerWeapon.Instance.addOwnGun(i.GunType.火箭炮);break;case n.ShopItemType.黄金重狙枪:r.PlayerWeapon.Instance.addOwnGun(i.GunType.黄金重狙枪);break;case n.ShopItemType.火力喷射炮:r.PlayerWeapon.Instance.addOwnGun(i.GunType.火力喷射炮);break;case n.ShopItemType.超级大礼包:r.PlayerWeapon.Instance.addOwnGun(i.GunType.Spas光线弹),a.Player.Instance.increase(a.PlayerAttr.金币,12500);break;case n.ShopItemType.角色复活:a.Player.Instance.isFuHuo=!0,c.PlayerBattle.Instance.setStatus(c.BattleStatus.BattleStatus_Begin),a.Player.Instance.increase(a.PlayerAttr.主角复活次数);break;case n.ShopItemType.无敌盾:a.Player.Instance.isWuDi=!0;break;case n.ShopItemType.金币8000:0<a.Player.Instance.getShopTime()?a.Player.Instance.increase(a.PlayerAttr.金币,16e3):a.Player.Instance.increase(a.PlayerAttr.金币,8e3);break;case n.ShopItemType.金币12500:0<a.Player.Instance.getShopTime()?a.Player.Instance.increase(a.PlayerAttr.金币,12500):a.Player.Instance.increase(a.PlayerAttr.金币,25e3);break;case n.ShopItemType.全攻击加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.全攻击加成);break;case n.ShopItemType.耐久加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.耐久加成);break;case n.ShopItemType.生命加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.生命加成);break;case n.ShopItemType.直接过关:l.PlayerLvl.Instance.upLvl(),a.Player.Instance.increase(a.PlayerAttr.关卡等级),c.PlayerBattle.Instance.changeStatus(c.BattleStatus.BattleStatus_NextBattle);break;case n.ShopItemType.特惠大礼包:r.PlayerWeapon.Instance.addBuffer(r.BuffType.全攻击加成),r.PlayerWeapon.Instance.addBuffer(r.BuffType.耐久加成),r.PlayerWeapon.Instance.addBuffer(r.BuffType.生命加成),a.Player.Instance.increase(a.PlayerAttr.金币,12500);break;case n.ShopItemType.角色升级:l.PlayerLvl.Instance.upLvl();break;case n.ShopItemType.关卡开启:break;case n.ShopItemType.金币22500:0<a.Player.Instance.getShopTime()?a.Player.Instance.increase(a.PlayerAttr.金币,22500):a.Player.Instance.increase(a.PlayerAttr.金币,45e3)}this.eventNotify(e),s.LocalData.Instance.save()},e.prototype.buyGunByCoin=function(e){var t=i.ALL_GUN_DATA_MAP[e];return!(null==t||t.price<=0||t.price>a.Player.Instance.get(a.PlayerAttr.金币))&&(a.Player.Instance.spendMoney(t.price),r.PlayerWeapon.Instance.addOwnGun(e),!0)},e.prototype.showShopUI=function(e){cc.loader.loadRes("prefab/"+e,function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},e.prototype.showGiftPresent=function(){r.PlayerWeapon.Instance.isHaveGun(i.GunType.Spas光线弹)?this.showShopUI("present_2"):this.showShopUI("present")},e.prototype.gunTypeToShopType=function(e){var t=0;switch(e){case i.GunType.火箭炮:t=n.ShopItemType.火箭炮;break;case i.GunType.黄金重狙枪:t=n.ShopItemType.黄金重狙枪;break;case i.GunType.火力喷射炮:t=n.ShopItemType.火力喷射炮;break;case i.GunType.Spas光线弹:t=n.ShopItemType.超级大礼包}return t},e.prototype.addListener=function(e){null==this._eventListener&&(this._eventListener=[]),-1==this._eventListener.indexOf(e)&&this._eventListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._eventListener){var t=this._eventListener.indexOf(e);-1!=t&&this._eventListener.splice(t,1)}},e.prototype.eventNotify=function(t){null!=this._eventListener&&this._eventListener.forEach(function(e){e.onBuySuccessNotify(t)})},e.Instance=new e,e}();o.PlayerShop=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/PlayerBattle":"PlayerBattle","./LocalData":"LocalData","./Player":"Player","./PlayerLvl":"PlayerLvl","./PlayerWeapon":"PlayerWeapon"}],PlayerWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"15835RRtidHtpBxfahlAZQy","PlayerWeapon"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,a=e("../Data/GunData"),r=e("./Player");(n=i=o.BuffType||(o.BuffType={}))[n["全攻击加成"]=1]="全攻击加成",n[n["耐久加成"]=2]="耐久加成",n[n["生命加成"]=3]="生命加成";var l=function(){function e(){this._gunItems={},this._buffItems=[],this.guideGunID=0,this._gunEventListener=null,this._buffEventListener=null}return e.prototype.isHaveGun=function(e){return null!=this._gunItems[e]&&e!=this.guideGunID},e.prototype.getGuideGunID=function(){return this.guideGunID},e.prototype.setGuideGunID=function(e){this.addOwnGun(e),this.guideGunID=e},e.prototype.getGunLocalNum=function(){var e=0;for(var t in this._gunItems)++e;return e},e.prototype.getOwnGun=function(e){var t=a.ALL_GUN_DATA_MAP[e];return{id:t.id,atk:r.Player.Instance.getAtk(t.atk),speed:t.speed,delay:t.delay,rect:t.rect,name:t.name,value:Math.floor(t.value*(100+this.getBuffDurabilityAdd())/100),icon:t.icon,price:t.price}},e.prototype.getOwnUsableGuns=function(){var e=[];for(var t in this._gunItems){var o=this._gunItems[t];0<o.valueDurability&&e.push(this.getOwnGun(o.id))}return e},e.prototype.getGunLocal=function(e){return null==this._gunItems[e]?{id:e,valueDurability:0}:this._gunItems[e]},e.prototype.addOwnGun=function(e){var t=a.ALL_GUN_DATA_MAP[e],o={id:e,valueDurability:Math.floor(t.value*(100+this.getBuffDurabilityAdd())/100)};this._gunItems[e]=o,this.guideGunID==e&&(this.guideGunID=0),this.gunEventNotify(e)},e.prototype.removeOwnGun=function(e){null!=this._gunItems[e]&&(delete this._gunItems[e],this.gunEventNotify(e))},e.prototype.UseBullet=function(e,t){if(0!=e){r.Player.Instance.increase(r.PlayerAttr.武器耐久总消耗数,t);var o=this.getGunLocal(e);o.valueDurability-=t,o.valueDurability=Math.max(0,o.valueDurability),e==this.guideGunID&&0==o.valueDurability&&(this.removeOwnGun(e),this.guideGunID=0)}},e.prototype.getRepairGunCostCoin=function(e){if(this.isHaveGun(e)){var t=this.getGunLocal(e),o=this.getOwnGun(e);return t.valueDurability+10<=o.value?10*this.getrepaircoin(e):t.valueDurability<o.value?this.getrepaircoin(e)*(o.value-t.valueDurability):0}},e.prototype.RepairGun=function(e){if(this.isHaveGun(e)){var t=this.getRepairGunCostCoin(e);if(!(t<0||t>r.Player.Instance.get(r.PlayerAttr.金币))){var o=this._gunItems[e].valueDurability+10,n=this.getOwnGun(e);this._gunItems[e].valueDurability=Math.min(n.value,o),r.Player.Instance.spendMoney(t)}}},e.prototype.getrepaircoin=function(e){return[100,100,480,480,480,480,480,480,480,480,480,480][e-1]},e.prototype.isHaveBuffer=function(e){return 0<this.getBuffer(e)},e.prototype.getBuffer=function(e){return null==this._buffItems[e]&&(this._buffItems[e]=0),this._buffItems[e]},e.prototype.addBuffer=function(e){var t=this.getBuffer(e);this._buffItems[e]=t+1,this.buffEventNotify(e)},e.prototype.getBuffLifeAdd=function(){return 50*this.getBuffer(i.生命加成)},e.prototype.getBuffAtkAdd=function(){return 50*this.getBuffer(i.全攻击加成)},e.prototype.getBuffDurabilityAdd=function(){return 50*this.getBuffer(i.耐久加成)},e.prototype.addGunListener=function(e){null==this._gunEventListener&&(this._gunEventListener=[]),-1==this._gunEventListener.indexOf(e)&&this._gunEventListener.push(e)},e.prototype.removeGunListener=function(e){if(null!=this._gunEventListener){var t=this._gunEventListener.indexOf(e);-1!=t&&this._gunEventListener.splice(t,1)}},e.prototype.gunEventNotify=function(t){null!=this._gunEventListener&&this._gunEventListener.forEach(function(e){e.onPlayGetGunNotify(t)})},e.prototype.addBuffListener=function(e){null==this._buffEventListener&&(this._buffEventListener=[]),-1==this._buffEventListener.indexOf(e)&&this._buffEventListener.push(e)},e.prototype.removeBuffListener=function(e){if(null!=this._buffEventListener){var t=this._buffEventListener.indexOf(e);-1!=t&&this._buffEventListener.splice(t,1)}},e.prototype.buffEventNotify=function(t){null!=this._buffEventListener&&this._buffEventListener.forEach(function(e){e.onPlayGetBuffNotify(t)})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("GUN");for(var t in e&&(this._gunItems=JSON.parse(e)),this._gunItems)if(this._gunItems.hasOwnProperty(t)){var o=this._gunItems[t];console.log("角色武器数据"+t+"耐久度"+o.valueDurability)}this.guideGunID=cc.sys.localStorage.getItem("guideGun"),null==this.guideGunID&&(this.guideGunID=0);var n=cc.sys.localStorage.getItem("BUFF");for(var t in n&&(this._buffItems=JSON.parse(n)),this._buffItems)if(this._buffItems.hasOwnProperty(t)){o=this._buffItems[t];console.log("角色Buff"+i[t]+"="+o)}},e.prototype.save=function(){var e=JSON.stringify(this._gunItems);cc.sys.localStorage.setItem("GUN",e),cc.sys.localStorage.setItem("guideGun",this.guideGunID),e=JSON.stringify(this._buffItems),cc.sys.localStorage.setItem("BUFF",e)},e.Instance=new e,e}();o.PlayerWeapon=l,cc._RF.pop()},{"../Data/GunData":"GunData","./Player":"Player"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"45f2fyWJnlNkLf48aRK84k+","Player"),Object.defineProperty(o,"__esModule",{value:!0});var i,n,a=e("./PlayerLvl"),r=e("./PlayerWeapon"),l=e("./PlayerAchieve"),s=e("./PlayerBattle"),c=e("./PlayerShop");(n=i=o.PlayerAttr||(o.PlayerAttr={}))[n["属性Begin"]=0]="属性Begin",n[n["金币"]=1]="金币",n[n["登陆时间"]=2]="登陆时间",n[n["已登陆天数"]=3]="已登陆天数",n[n["关卡等级"]=4]="关卡等级",n[n["成功过关次数"]=5]="成功过关次数",n[n["主角死亡次数"]=6]="主角死亡次数",n[n["主角复活次数"]=7]="主角复活次数",n[n["杀敌数量"]=8]="杀敌数量",n[n["获得金币总数"]=9]="获得金币总数",n[n["武器耐久总消耗数"]=10]="武器耐久总消耗数",n[n["过肩摔完成次数"]=11]="过肩摔完成次数",n[n["绝招使用次数"]=12]="绝招使用次数",n[n["新手引导"]=13]="新手引导",n[n["金币商店双倍金币时间"]=14]="金币商店双倍金币时间",n[n["属性End"]=15]="属性End";var p=function(){function e(){this._attrItems={},this._attrListener=null,this.isWuDi=!1,this.isFuHuo=!1}return e.prototype.set=function(e,t){this._attrItems[e]=t,console.log("set'"+i[e]+"'='"+t+"'"),this.attrNotify(e)},e.prototype.get=function(e){return void 0===this._attrItems[e]&&(this._attrItems[e]=0),this._attrItems[e]},e.prototype.increase=function(e,t){void 0===t&&(t=1),void 0===this._attrItems[e]&&(this._attrItems[e]=0,this._attrItems[e]+=t),i.关卡等级==e&&this._attrItems[e]>=s.MaxGuanQia?this._attrItems[e]=s.MaxGuanQia:this._attrItems[e]+=t,console.log("increase'"+i[e]+"'='"+this._attrItems[e]+"'"),this.attrNotify(e),l.PlayerAchieve.Instance.checkComplete(e),e==i.金币&&this.increase(i.获得金币总数,t)},e.prototype.getShopTime=function(){var e=this.get(i.金币商店双倍金币时间)+72e5-Date.now();return 0<e?e:0},e.prototype.spendMoney=function(e){var t=this.get(i.金币);this._attrItems[i.金币]=Math.max(0,t-e),console.log("花费金币'"+e+"'还剩下'"+this._attrItems[i.金币]+"'"),this.attrNotify(i.金币)},e.prototype.getHp=function(){return Math.floor(500*(100+r.PlayerWeapon.Instance.getBuffLifeAdd()+a.PlayerLvl.Instance.getLifeAdd())/100)},e.prototype.getAtk=function(e){var t=Math.floor(e*(100+a.PlayerLvl.Instance.getAtkAdd()+r.PlayerWeapon.Instance.getBuffAtkAdd())/100);return Math.max(t,1)},e.prototype.getTotleAtkAdd=function(){return a.PlayerLvl.Instance.getAtkAdd()+r.PlayerWeapon.Instance.getBuffAtkAdd()},e.prototype.checkDailyBonus=function(){var e=this.get(i.已登陆天数);if(!(e<0||7<=e)){var t=(new Date).getDate(),o=this.get(i.登陆时间);0!=o&&o==t||cc.loader.loadRes("prefab/daily_bonus",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})}},e.prototype.ReceiveDailyBonus=function(){var e=this.get(i.已登陆天数);if(!(e<0||7<=e)){0==e?this.increase(i.金币,200):1==e?this.increase(i.金币,300):2==e?c.PlayerShop.Instance.showGiftPresent():3==e?this.increase(i.金币,500):4==e?this.increase(i.金币,1e3):5==e?c.PlayerShop.Instance.showGiftPresent():6==e&&this.increase(i.金币,2e3),this.increase(i.已登陆天数);var t=new Date;this.set(i.登陆时间,t.getDate())}},e.prototype.completeGuide=function(e){var t=this.get(i.新手引导);this._attrItems[i.新手引导]=t|e,console.log(""+this._attrItems[i.新手引导])},e.prototype.isGuideComplete=function(e){return(this.get(i.新手引导)&e)==e},e.prototype.resetHelpGuide=function(e){var t=this.get(i.新手引导);this._attrItems[i.新手引导]=t&~e},e.prototype.addListener=function(e){null==this._attrListener&&(this._attrListener=[]),-1==this._attrListener.indexOf(e)&&this._attrListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._attrListener){var t=this._attrListener.indexOf(e);-1!=t&&this._attrListener.splice(t,1)}},e.prototype.attrNotify=function(t){var o=this;null!=this._attrListener&&this._attrListener.forEach(function(e){e.onPlayerAttrNotify(t,o._attrItems[t])})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("PLAYER");e&&(this._attrItems=JSON.parse(e));for(var t=i.属性Begin;t<=i.属性End;t++)void 0===this._attrItems[t]&&(this._attrItems[t]=0);for(var o in this._attrItems)if(this._attrItems.hasOwnProperty(o)){var n=this._attrItems[o];console.log(i[o]+"="+n)}},e.prototype.save=function(){var e=JSON.stringify(this._attrItems);cc.sys.localStorage.setItem("PLAYER",e)},e.Instance=new e,e}();o.Player=p,cc._RF.pop()},{"./PlayerAchieve":"PlayerAchieve","./PlayerBattle":"PlayerBattle","./PlayerLvl":"PlayerLvl","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],Present1:[function(e,t,o){"use strict";cc._RF.push(t,"a9a6aWNSk1AKa8FQUn2YRZE","Present1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/HelpData"),i=e("../Data/GunData"),a=e("../UICommon"),r=e("../Logic/PlayerWeapon"),l=e("../Logic/PlayerBattle"),s=e("../Logic/Player"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gunSprite=null,e.nameLabel=null,e.atkLabel=null,e.valueLabel=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.init(i.GunType.火箭炮)},e.prototype.onDestroy=function(){l.PlayerBattle.Instance.checkHelpGuide()},e.prototype.init=function(e){var t=i.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,a.setSpriteFromRawRes(t.icon,this.gunSprite)},e.prototype.onFormClick=function(){a.onButtonClicked(),this.node.destroy()},e.prototype.onGetClick=function(){a.onButtonClicked(),this.node.destroy(),s.Player.Instance.completeGuide(n.HelpType.help2),r.PlayerWeapon.Instance.setGuideGunID(i.GunType.火箭炮)},__decorate([u(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([u(cc.Label)],e.prototype,"nameLabel",void 0),__decorate([u(cc.Label)],e.prototype,"atkLabel",void 0),__decorate([u(cc.Label)],e.prototype,"valueLabel",void 0),e=__decorate([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Present2:[function(e,t,o){"use strict";cc._RF.push(t,"8cb0bXqRBNPApPqtifkZm3e","Present2"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/ShopData"),a=e("../Logic/PlayerShop"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.label1=null,e}return __extends(e,t),e.prototype.start=function(){var e=i.ALL_SHOP_ITEM_DATA_MAP[i.ShopItemType.特惠大礼包];this.label.string=e.price.toString(),this.label1.string=this.label.string},e.prototype.onBuyClick=function(){n.onButtonClicked(),a.PlayerShop.Instance.buyByRMB(i.ShopItemType.特惠大礼包,this.node)},e.prototype.onFormClick=function(){n.onButtonClicked(),this.node.destroy()},__decorate([s(cc.Label)],e.prototype,"label",void 0),__decorate([s(cc.Label)],e.prototype,"label1",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Present:[function(e,t,o){"use strict";cc._RF.push(t,"17ecdGOT2ZMI4/pXW0/Mupt","Present"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/ShopData"),a=e("../Logic/PlayerShop"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.label1=null,e}return __extends(e,t),e.prototype.start=function(){var e=i.ALL_SHOP_ITEM_DATA_MAP[i.ShopItemType.超级大礼包];this.label.string=e.price.toString(),this.label1.string=this.label.string},e.prototype.onBuyClick=function(){n.onButtonClicked(),a.PlayerShop.Instance.buyByRMB(i.ShopItemType.超级大礼包,this.node)},e.prototype.onFormClick=function(){n.onButtonClicked(),this.node.destroy()},__decorate([s(cc.Label)],e.prototype,"label",void 0),__decorate([s(cc.Label)],e.prototype,"label1",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Revive:[function(e,t,o){"use strict";cc._RF.push(t,"7a168CbWs1KD6lWTWTWuySb","Revive"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../Logic/PlayerWeapon"),r=e("../UICommon"),l=e("../Logic/Player"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.life=null,e.money22Label=null,e.money33Label=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.initOnlyMoney(n.ShopItemType.金币12500,this.money22Label),this.initOnlyMoney(n.ShopItemType.金币8000,this.money33Label),a.PlayerWeapon.Instance.addBuffListener(this)},e.prototype.onDestroy=function(){a.PlayerWeapon.Instance.removeBuffListener(this)},e.prototype.start=function(){this.updateLife()},e.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},e.prototype.onPlayGetBuffNotify=function(e){this.updateLife()},e.prototype.updateLife=function(){var e=l.Player.Instance.getHp();this.life.string=""+e},e.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy(),r.switchToScene("Begin")},e.prototype.onBtn1Click=function(){r.onButtonClicked(),i.PlayerShop.Instance.buyByRMB(n.ShopItemType.生命加成,null)},e.prototype.onBtn2Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.角色复活)},e.prototype.onBtn3Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.直接过关)},e.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([p(cc.Label)],e.prototype,"life",void 0),__decorate([p(cc.Label)],e.prototype,"money22Label",void 0),__decorate([p(cc.Label)],e.prototype,"money33Label",void 0),e=__decorate([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],RoleBase:[function(e,t,o){"use strict";cc._RF.push(t,"b5628aQwPRI24VGykI02T1V","RoleBase"),Object.defineProperty(o,"__esModule",{value:!0});var h,n,i=e("./DragonBonesConfig"),a=e("./StateMachine"),d=e("./SkillData"),r=e("./AudioMgr"),l=e("./EquipData"),s=e("./Bullet"),c=e("./Logic/PlayerLvl"),p=e("./Logic/PlayerBattle"),u=e("./Logic/PlayerWeapon"),y=e("./RoleEnemy"),g=e("./Logic/Player"),f=cc._decorator,m=f.ccclass;f.property;(n=h=o.BlockReason||(o.BlockReason={}))[n.None=0]="None",n[n.Skill=1]="Skill",n[n.BeHit=2]="BeHit",n[n.BeHitBlow=3]="BeHitBlow",n[n.Jump=4]="Jump",n[n.Grab=5]="Grab",n[n.BeGrab=6]="BeGrab";var _=function(){function e(){this.ownerRole=null,this.dragonBones=null,this.equipData=null,this.skillData=null,this.bulletDelay=99999999}return e.prototype.init=function(e,t,o,n){this.ownerRole=e;var i=new cc.Node;e.node.addChild(i),this.dragonBones=i.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(t,-1),this.equipData=n,this.skillData=o,this.bulletDelay=n.delay/100},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e.prototype.myUpdate=function(e){var t=this.bulletDelay,o=t-e;0<t&&o<=0&&this.createBullet(),this.bulletDelay=o},e.prototype.createBullet=function(){(new cc.Node).addComponent(s.default).myInit(this.ownerRole,this.skillData,this.equipData)},e}(),S=function(){function e(){this.ownerRole=null,this.offsetX=0,this.dragonBones=null,this.boxAttacking=null}return e.prototype.init=function(e,t){this.ownerRole=e,this.offsetX=t;var o=new cc.Node;e.node.addChild(o),o.setScale(1/1.2),o.setPosition(t,0),this.dragonBones=o.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(e.animState.name,-1),this.boxAttacking={valid:!1,x:0,y:0,width:0,height:0}},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e}(),v=function(){function e(){this.ownerRole=null,this.dragonBones=null}return e.prototype.init=function(e,t){this.ownerRole=e;var o=new cc.Node;e.node.addChild(o),this.dragonBones=o.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(t,-1)},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e}(),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragonBonesConfig=null,e.dragonBones=null,e.ownerMap=null,e.isFaceRight=!1,e.stateMachine=null,e.roleName=null,e.animName=null,e.animState=null,e.animAuxCounters=null,e.attacker=null,e.dragonSlotAttacking=null,e.dragonSlotBeAttacked=null,e.boxAttacking=null,e.boxBeAttacked=null,e.debugGraphicsAttacking=null,e.debugGraphicsBeAttacked=null,e.hitters=null,e.hitterBullets=null,e.gunAnimation=null,e.iceEffect=null,e.fenshenList=null,e.lifePoint=0,e.attackPower=0,e.equipid=0,e.isBaTi=!1,e.isFenShen=!1,e.isWuDi=!1,e.isBoss=!1,e.isSummonWhenAttacked=!1,e.summonRemainCount=0,e}return __extends(e,t),e.RoleBoxIntersection=function(e,t){return e.valid&&t.valid&&!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},e.prototype._findDragonBonesConfig=function(){this.dragonBonesConfig=null;for(var e=this.node;e;e=e.parent){var t=e.getComponent(i.default);if(t){this.dragonBonesConfig=t;break}}},e.prototype._initStateMachine=function(){var i=this,a=this.stateMachine;a.registerState(d.SMState.IDLE),a.registerState(d.SMState.JUMP),a.registerState(d.SMState.BLOCKED),a.registerState(d.SMState.BLOCKED_J),a.registerState(d.SMState.LYING),a.registerStateChange(d.SMState.IDLE,d.SMState.IDLE,function(){return 0==a.getVariable(d.SMVariable.Trigger_SkillID)&&a.getVariable(d.SMVariable.Input_WalkDir)!=a.getVariable(d.SMVariable.SpeedX)},function(){var e=a.getVariable(d.SMVariable.Input_WalkDir);a.setVariable(d.SMVariable.SpeedX,e),0==e?i.on_AI_timer_begin():i.on_AI_timer_reset(),i.isFaceRight&&e<0?i.setFaceDir(!1):!i.isFaceRight&&0<e&&i.setFaceDir(!0),0==e?i._playAnimation("stand"):Math.abs(e)<100?i._playAnimation("go"):i._playAnimation("run")}),a.registerStateChange([d.SMState.IDLE,d.SMState.JUMP,d.SMState.BLOCKED],d.SMState.BLOCKED,function(){var e=a.getVariable(d.SMVariable.Trigger_SkillID);if(0==e)return!1;if(a.getCurrentStateId()!=d.SMState.BLOCKED){if("guo_jian_shuai"==d.ALL_SKILL_DATA_MAP[e].special)if(null==i.ownerMap.getGrabTarget(i,50,e))return a.setVariable(d.SMVariable.Trigger_SkillID,0),!1;return!0}return a.getCurrentStateId()==d.SMState.BLOCKED&&a.getVariable(d.SMVariable.BlockedReason)==h.Grab&&"need_grab"==d.ALL_SKILL_DATA_MAP[e].special},function(){var e=a.getVariableAndClear(d.SMVariable.Trigger_SkillID);a.setVariable(d.SMVariable.SkillID,e);var t=d.ALL_SKILL_DATA_MAP[e];if(i===i.ownerMap.roleHero&&"equip"==t.special&&p.PlayerBattle.Instance.UseBullet(1),i._playAnimation(t.animName),t.gunAnimName&&(i.gunAnimation=new _,i.gunAnimation.init(i,t.gunAnimName,t,l.ALL_EQUIP_DATA_MAP[t.equipid])),t.equipid){var o=l.ALL_EQUIP_DATA_MAP[t.equipid].useSound;o&&r.myAudioMgr.playSFX(o)}if(a.setVariable(d.SMVariable.BlockedReason,h.Skill),0==a.getVariable(d.SMVariable.PositionY)){if(a.setVariable(d.SMVariable.SpeedX,t.moveSpeed*(i.isFaceRight?1:-1)),a.setVariable(d.SMVariable.SpeedY,0),"guo_jian_shuai"==t.special)i.ownerMap.getGrabTarget(i,50,e).onHitByOther(i),r.myAudioMgr.playSFX("becatch.ogg"),g.Player.Instance.increase(g.PlayerAttr.过肩摔完成次数);else if("grab"==t.special){a.setVariable(d.SMVariable.BlockedReason,h.Grab);var n=i.ownerMap.getGrabTarget(i,50,e);n&&n.node.setPositionX(i.node.getPositionX()+30*(i.isFaceRight?1:-1))}}else a.setState(d.SMState.BLOCKED_J)}),a.registerStateChange([d.SMState.IDLE,d.SMState.JUMP],d.SMState.JUMP,function(){return 0<a.getVariableAndClear(d.SMVariable.Input_Jump)},function(){if(a.setVariable(d.SMVariable.SpeedY,240),i._playAnimation("jumpup"),0==a.getVariable(d.SMVariable.PositionY)){var e=a.getVariable(d.SMVariable.Input_WalkDir);e=0<e?1:e<0?-1:0,a.setVariable(d.SMVariable.SpeedX,100*e)}else a.setState(d.SMState.BLOCKED_J),a.setVariable(d.SMVariable.BlockedReason,h.Jump)}),a.registerStateChange([d.SMState.IDLE,d.SMState.JUMP,d.SMState.BLOCKED,d.SMState.BLOCKED_J],d.SMState.BLOCKED,function(){return 0<a.getVariableAndClear(d.SMVariable.Trigger_HitBySkillID)},function(e){i.gunAnimation&&(i.gunAnimation.destroy(),i.gunAnimation=null);var t=d.ALL_SKILL_DATA_MAP[a.getVariable(d.SMVariable.HitBySkillID)];a.setVariable(d.SMVariable.BlockedReason,h.BeHit),"grab"==t.special&&a.setVariable(d.SMVariable.BlockedReason,h.BeGrab);var o=t.blowPower;i.isBaTi&&0<i.lifePoint&&o<300&&(o=0);var n=null;a.setVariable(d.SMVariable.SpeedX,t.beHitMoveSpeed*(i.attacker.isFaceRight?1:-1)),0<o?(n="be_f_lv_fukong_up",a.setVariable(d.SMVariable.BlockedReason,h.BeHitBlow),a.setVariable(d.SMVariable.SpeedY,o)):(n=i.lifePoint<=0&&t.beHitDieAnimName?t.beHitDieAnimName:t.beHitAnimName,9==t.equipid?(i.setIntColor(16777215),a.setVariable(d.SMVariable.IceFireCountDown,2)):12==t.equipid&&(a.setVariable(d.SMVariable.IceFireCountDown,2),i.iceEffect||(i.iceEffect=new v,i.iceEffect.init(i,"be_ice_1"))),a.getVariable(d.SMVariable.SpeedY)<0&&a.setVariable(d.SMVariable.SpeedY,0)),300<=o&&a.setVariable(d.SMVariable.IsBlowedHigh,1),14==t.skillId&&0!=a.getVariable(d.SMVariable.IsBlowedHigh)&&(a.setVariable(d.SMVariable.FlyKickCountDown,1),i.attacker.stateMachine.setVariable(d.SMVariable.FlyKickCountDown,1),n="be_jumpfly",g.Player.Instance.increase(g.PlayerAttr.绝招使用次数)),(0<a.getVariable(d.SMVariable.PositionY)||0<a.getVariable(d.SMVariable.SpeedY))&&a.setState(d.SMState.BLOCKED_J),i.isBaTi&&0<i.lifePoint&&!("grab"==t.special||"guo_jian_shuai"==t.special||"need_grab"==t.special||300<=t.blowPower)?a.setState(e):n&&i._playAnimation(n),i.isSummonWhenAttacked&&0<i.summonRemainCount&&(i.summonRemainCount-=1,i.ownerMap.summonEnemy(i))}),a.registerStateChange(d.SMState.JUMP,d.SMState.BLOCKED,function(){return 0==a.getVariable(d.SMVariable.PositionY)},function(){i._playAnimation("jumpstand")}),a.registerStateChange(d.SMState.BLOCKED_J,d.SMState.LYING,function(){return 0==a.getVariable(d.SMVariable.PositionY)},function(){a.getVariable(d.SMVariable.BlockedReason)==h.BeHit?(i._playAnimation("be_d_2"),a.setVariable(d.SMVariable.LyingCountDown,2)):a.getVariable(d.SMVariable.BlockedReason)==h.BeHitBlow?(i._playAnimation("be_f_lv_fukong_stand"),a.setVariable(d.SMVariable.LyingCountDown,2)):(i._playAnimation("jumpstand"),a.setState(d.SMState.BLOCKED))}),a.registerStateChange(d.SMState.BLOCKED,d.SMState.IDLE,function(){return 0<a.getVariable(d.SMVariable.Trigger_AnimationFinished)?(i.gunAnimation&&(i.gunAnimation.destroy(),i.gunAnimation=null),!0):a.getVariable(d.SMVariable.BlockedReason)==h.Grab&&!i.ownerMap.getGrabTarget(i,50,0)||a.getVariable(d.SMVariable.BlockedReason)==h.BeGrab&&i.attacker.stateMachine.getCurrentStateId()==d.SMState.IDLE},function(){a.setVariable(d.SMVariable.SkillID,0),0<i.lifePoint?(a.setVariable(d.SMVariable.SpeedX,0),a.setVariable(d.SMVariable.SpeedY,0),i.on_AI_timer_begin(),i._playAnimation("stand")):(a.setVariable(d.SMVariable.LyingCountDown,2),a.setState(d.SMState.LYING))}),a.registerStateChange(d.SMState.BLOCKED_J,d.SMState.BLOCKED_J,function(){return a.getVariable(d.SMVariable.BlockedReason)==h.Skill&&0<a.getVariable(d.SMVariable.Trigger_AnimationFinished)},function(){a.setVariable(d.SMVariable.BlockedReason,h.Jump)}),a.registerStateChange(d.SMState.LYING,d.SMState.BLOCKED,function(){return a.getVariable(d.SMVariable.LyingCountDown)<=0},function(){0<i.lifePoint?(i._playAnimation("ds_2"),i.animState.timeScale=3):i.ownerMap.afterRoleDie(i)}),a.setState(d.SMState.IDLE),this._playAnimation("stand"),a.setVariable(d.SMVariable.Input_WalkDir,0),a.setVariable(d.SMVariable.Input_Jump,0),a.setVariable(d.SMVariable.Input_Attack1,0),a.setVariable(d.SMVariable.Input_Attack2,0),a.setVariable(d.SMVariable.Input_ChangeWeapon,0),a.setVariable(d.SMVariable.Trigger_SkillID,0),a.setVariable(d.SMVariable.Trigger_HitBySkillID,0),a.setVariable(d.SMVariable.Trigger_AnimationFinished,0),a.setVariable(d.SMVariable.SkillID,0),a.setVariable(d.SMVariable.HitBySkillID,0),a.setVariable(d.SMVariable.BlockedReason,0),a.setVariable(d.SMVariable.PositionY,0),a.setVariable(d.SMVariable.SpeedX,0),a.setVariable(d.SMVariable.SpeedY,0),a.setVariable(d.SMVariable.LyingCountDown,0),a.setVariable(d.SMVariable.IceFireCountDown,0),a.setVariable(d.SMVariable.FlyKickCountDown,0),a.setVariable(d.SMVariable.IsBlowedHigh,0)},e.prototype.init=function(){this._findDragonBonesConfig(),this.dragonBones=this.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=this.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=this.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=this.dragonBonesConfig.dragonArmatureName,this.stateMachine=new a.StateMachine,this.animAuxCounters=[],this.dragonSlotAttacking=this.dragonBones.armature().getSlot("Layer4"),this.dragonSlotBeAttacked=this.dragonBones.armature().getSlot("Layer1"),this.boxAttacking={valid:!1,x:0,y:0,width:0,height:0},this.boxBeAttacked={valid:!1,x:0,y:0,width:0,height:0},this.hitters=[],this.hitterBullets=[],this.fenshenList=[],this._initStateMachine()},e.prototype._playAnimation=function(e,t){void 0===t&&(t=-1),this.animName=e,this.animState=this.dragonBones.playAnimation(e,t),this.stateMachine.setVariable(d.SMVariable.Trigger_AnimationFinished,0);for(var o=0,n=this.fenshenList;o<n.length;o++){n[o].dragonBones.playAnimation(e,t)}},e.prototype.setIntColor=function(e){var t=e>>16&255,o=e>>8&255,n=255&e;this.node.color=new cc.Color(t,o,n,255)},e.prototype.setFaceDir=function(e){(this.isFaceRight=e)?this.node.setScale(Math.abs(this.node.scaleX),this.node.scaleY):this.node.setScale(-Math.abs(this.node.scaleX),this.node.scaleY)},e.prototype._getRoleBox=function(e,t,o){if(this.lifePoint<=0)t.valid=!1;else{var n=cc.sys.isBrowser?e.displayIndex:e.getDisplayIndex();if(n<0||15==n)t.valid=!1;else{var i,a;if(cc.sys.isBrowser){var r=e.displayData.texture.region;i=r.width,a=r.height}else{var l=e.getRawDisplay().getContentSize();i=l.width,a=l.height}var s=e.global,c=s.x,p=s.y;c-=.5*i,p=-p,p-=.5*a,t.valid=!0,this.isFaceRight?t.x=c+this.node.getPositionX():t.x=-c-i+this.node.getPositionX(),t.y=p+this.node.getPositionY(),t.width=i,t.height=a}}},e.prototype._updateAttackBoxes=function(){this._getRoleBox(this.dragonSlotAttacking,this.boxAttacking,this.debugGraphicsAttacking),this._getRoleBox(this.dragonSlotBeAttacked,this.boxBeAttacked,this.debugGraphicsBeAttacked);for(var e=this.boxAttacking,t=0,o=this.fenshenList;t<o.length;t++){var n=o[t],i=n.boxAttacking;i.valid=e.valid,e.valid&&(i.x=e.x+n.offsetX,i.y=e.y,i.width=e.width,i.height=e.height)}},e.prototype._findSkillIDByInput=function(){var n=this,i=this.stateMachine,e=i.getCurrentStateId(),a="stand";if(e==d.SMState.JUMP)a="jump";else if(e==d.SMState.IDLE){var t=i.getVariable(d.SMVariable.SpeedX);a=0==t?"stand":"walk"}var o=d.ALL_SKILL_DATA.filter(function(e){if(e.availableStates.indexOf(a)<0)return!1;if(0!=e.inputKey&&0==i.getVariable(e.inputKey))return!1;if(e.special)switch(e.special){case"guo_jian_shuai":if(i.getCurrentStateId()==d.SMState.BLOCKED&&i.getVariable(d.SMVariable.BlockedReason)==h.Grab)return!1;var t=i.getVariable(d.SMVariable.Input_WalkDir);if(!(0<t&&!n.isFaceRight||t<0&&n.isFaceRight))return!1;if(!n.ownerMap.getGrabTarget(n,50,e.skillId))return!1;break;case"grab":if(!n.ownerMap.getGrabTarget(n,50,e.skillId))return!1;break;case"need_grab":if(i.getVariable(d.SMVariable.BlockedReason)!=h.Grab)return!1;break;case"equip":if(n.equipid!=e.equipid)return!1;if(n===n.ownerMap.roleHero){var o=u.PlayerWeapon.Instance.getGunLocal(n.equipid);if(!o||o.valueDurability<=0)return!1}break;default:return!1}return!0});if(0==o.length)return 0;i.setVariable(d.SMVariable.Input_Jump,0),i.setVariable(d.SMVariable.Input_Attack1,0),i.setVariable(d.SMVariable.Input_Attack2,0),i.setVariable(d.SMVariable.Input_ChangeWeapon,0);var r=o[0].groupId;return o=o.filter(function(e){return e.groupId==r}),this.animAuxCounters[r]||(this.animAuxCounters[r]=0),o[(++this.animAuxCounters[r]-1)%o.length].skillId},e.prototype._updatePosition=function(e){var t=this.stateMachine,o=t.getVariable(d.SMVariable.SpeedX),n=t.getVariable(d.SMVariable.SpeedY),i=n-480*e,a=t.getVariable(d.SMVariable.FlyKickCountDown);0<a?((a-=e)<0&&(a=0),t.setVariable(d.SMVariable.FlyKickCountDown,a),o=14==t.getVariable(d.SMVariable.SkillID)?this.isFaceRight?300:-300:this.isFaceRight?-300:300,i=n=0):t.setVariable(d.SMVariable.SpeedY,i);var r=t.getCurrentStateId();i<0&&0<=n&&(r==d.SMState.JUMP||r==d.SMState.BLOCKED_J&&t.getVariable(d.SMVariable.BlockedReason)==h.Jump?this._playAnimation("jumpdown"):r==d.SMState.BLOCKED_J&&t.getVariable(d.SMVariable.BlockedReason)==h.BeHitBlow&&this._playAnimation("be_f_lv_fukong_zhong"));var l=this.node.position,s=l.x+o*e,c=l.y+.5*(n+i)*e,p=this.ownerMap.bgTiledMap.node.getContentSize().width;s=cc.clampf(s,0,p);var u=this.ownerMap.GROUND_HEIGHT;c<=u&&(c=u,t.setVariable(d.SMVariable.IsBlowedHigh,0)),t.setVariable(d.SMVariable.PositionY,c-u),this.node.setPosition(s,c)},e.prototype._isAnimCompleted=function(){return cc.sys.isBrowser?this.animState.isCompleted:0<this.animState.playTimes&&1<=this.animState.getCurrentPlayTimes()},e.prototype.myUpdate=function(e){this.gunAnimation&&this.gunAnimation.myUpdate(e);var t=this.stateMachine;switch(t.getCurrentStateId()){case d.SMState.IDLE:case d.SMState.BLOCKED:case d.SMState.JUMP:case d.SMState.BLOCKED_J:this._updatePosition(e),0<t.getVariable(d.SMVariable.IceFireCountDown)&&(t.setVariable(d.SMVariable.IceFireCountDown,t.getVariable(d.SMVariable.IceFireCountDown)-e),t.getVariable(d.SMVariable.IceFireCountDown)<=0&&(t.setVariable(d.SMVariable.IceFireCountDown,0),this.iceEffect&&(this.iceEffect.destroy(),this.iceEffect=null),this._playAnimation("be-qiang-daodi-1"),this instanceof y.default&&this.setIntColor(this.enemyConfig.color)));break;case d.SMState.LYING:t.setVariable(d.SMVariable.LyingCountDown,t.getVariable(d.SMVariable.LyingCountDown)-e)}if(0==t.getVariable(d.SMVariable.Trigger_SkillID)){var o=this._findSkillIDByInput();0!=o&&t.setVariable(d.SMVariable.Trigger_SkillID,o)}this.animState&&this._isAnimCompleted()&&(this.animState=null,this.animName=null,t.setVariable(d.SMVariable.Trigger_AnimationFinished,1)),t.checkStateChange(),this._updateAttackBoxes()},e.prototype.setFenShen=function(e){if(this.isFenShen!=e)if(this.isFenShen=e){var t=new S;t.init(this,50),this.fenshenList.push(t);var o=new S;o.init(this,-50),this.fenshenList.push(o),this.node.setScale(1.2*(this.isFaceRight?1:-1),1.2)}else{for(var n=0,i=this.fenshenList;n<i.length;n++){i[n].destroy()}this.fenshenList=[],this.node.setScale(1*(this.isFaceRight?1:-1),1)}},e.prototype.onHitByOther=function(e){var t=d.ALL_SKILL_DATA_MAP[e.stateMachine.getVariable(d.SMVariable.SkillID)];if(t){var o=e.attackPower;if(this.ownerMap.roleHero===this)o*=(100-c.PlayerLvl.Instance.getReduceDamage())/100;this.lifePoint-=o,this.boxAttacking.valid=!1,this.boxBeAttacked.valid=!1,this.lifePoint<=0&&(.5<Math.random()?r.myAudioMgr.playSFX("dead1.ogg"):r.myAudioMgr.playSFX("dead2.ogg")),this.stateMachine.setVariable(d.SMVariable.HitBySkillID,t.skillId),this.stateMachine.setVariable(d.SMVariable.Trigger_HitBySkillID,t.skillId),this.attacker=e,this.setFaceDir(!e.isFaceRight)}},e.prototype.onHitByBullet=function(e){var t=e.skillData,o=e.equipData.power;this.ownerMap.roleHero===this&&(o*=(100-c.PlayerLvl.Instance.getReduceDamage())/100);this.ownerMap.roleHero===e.ownerRole&&(o=g.Player.Instance.getAtk(o)),this.lifePoint-=o,this.boxAttacking.valid=!1,this.boxBeAttacked.valid=!1,this.lifePoint<=0&&(.5<Math.random()?r.myAudioMgr.playSFX("dead1.ogg"):r.myAudioMgr.playSFX("dead2.ogg")),this.stateMachine.setVariable(d.SMVariable.HitBySkillID,t.skillId),this.stateMachine.setVariable(d.SMVariable.Trigger_HitBySkillID,t.skillId),this.attacker=e.ownerRole},e.prototype.on_AI_timer_begin=function(){},e.prototype.on_AI_timer_reset=function(){},e=__decorate([m],e)}(cc.Component);o.default=b,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./Bullet":"Bullet","./DragonBonesConfig":"DragonBonesConfig","./EquipData":"EquipData","./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./Logic/PlayerLvl":"PlayerLvl","./Logic/PlayerWeapon":"PlayerWeapon","./RoleEnemy":"RoleEnemy","./SkillData":"SkillData","./StateMachine":"StateMachine"}],RoleEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"7f9faN+BcdB+KGA4w+E9CgG","RoleEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleBase"),a=e("./SkillData"),r=e("./Logic/PlayerBattle"),i=cc._decorator,l=i.ccclass,s=(i.property,function(i){function e(){return null!==i&&i.apply(this,arguments)||this}return __extends(e,i),e.prototype.initWithConfig=function(e){this.init(),this.isActiveRole=!1,this.enemyConfig=e,this.lastRange=99999999,this.aiCountdown=99999999,this.skillIndex=0,this.roleName=e.name,this.setIntColor(e.color),e.y<250||15==e.enemytype?(this.node.setPosition(e.x+.5*e.width,this.ownerMap.GROUND_HEIGHT+480),this.stateMachine.setState(a.SMState.BLOCKED_J),this.stateMachine.setVariable(a.SMVariable.BlockedReason,n.BlockReason.Jump)):this.node.setPosition(e.x+.5*e.width,this.ownerMap.GROUND_HEIGHT),this.lifePoint=e.hp,this.attackPower=e.act,this.equipid=e.equipId,0<=[9,31,33,35].indexOf(e.enemytype)&&(this.isBaTi=!0),0<=[30,31,32,33,34,35,36,37].indexOf(e.enemytype)&&(this.isBoss=!0,this.node.setScale(1.2)),0<=[14,30,31,33,34,35,37].indexOf(e.enemytype)&&(this.isSummonWhenAttacked=!0,this.summonRemainCount=5),this.setFaceDir(!1)},e.prototype.trySkill=function(){var e=[this.enemyConfig.t0,this.enemyConfig.t1,this.enemyConfig.t2,this.enemyConfig.t3][this.skillIndex];switch(++this.skillIndex,e){case 3:default:this.stateMachine.setVariable(a.SMVariable.Input_Attack1,1);break;case 9:case 13:this.stateMachine.setVariable(a.SMVariable.Trigger_SkillID,15);break;case 8:this.stateMachine.setVariable(a.SMVariable.Input_Attack2,1);break;case 10:case 14:this.stateMachine.setVariable(a.SMVariable.Trigger_SkillID,16)}},e.prototype.myUpdate=function(e){var t=this.ownerMap.roleHero.node.getPositionX(),o=this.node.getPositionX(),n=Math.abs(o-t);if(!this.isActiveRole){if(!(n<=650))return;this.isActiveRole=!0,r.PlayerBattle.Instance.enemyActive(this.enemyConfig)}if(2==this.enemyConfig.enemytype&&this.lifePoint==this.enemyConfig.hp)return o<=0?void this.ownerMap.afterRoleDie(this):(this.stateMachine.setVariable(a.SMVariable.Input_WalkDir,-160),void i.prototype.myUpdate.call(this,e));250<n?this.stateMachine.setVariable(a.SMVariable.Input_WalkDir,t<o?-160:160):40<n?(this.stateMachine.setVariable(a.SMVariable.Input_WalkDir,t<o?-80:80),this.aiCountdown=99999999):this.stateMachine.setVariable(a.SMVariable.Input_WalkDir,0),this.lastRange=n,this.aiCountdown-=e,this.aiCountdown<=0&&(this.on_AI_timer_reset(),this.trySkill()),i.prototype.myUpdate.call(this,e)},e.prototype.onHitByOther=function(e){i.prototype.onHitByOther.call(this,e),r.PlayerBattle.Instance.HitEnemy(e.equipid)},e.prototype.onHitByBullet=function(e){i.prototype.onHitByBullet.call(this,e),r.PlayerBattle.Instance.HitEnemy(e.equipData.equipid)},e.prototype.on_AI_timer_begin=function(){this.aiCountdown=this.enemyConfig.delayTime/30},e.prototype.on_AI_timer_reset=function(){this.aiCountdown=99999999},e=__decorate([l],e)}(n.default));o.default=s,cc._RF.pop()},{"./Logic/PlayerBattle":"PlayerBattle","./RoleBase":"RoleBase","./SkillData":"SkillData"}],RoleHero:[function(e,t,o){"use strict";cc._RF.push(t,"8c7f1Dy7jNEoLfv3DRncjLK","RoleHero"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleBase"),i=e("./Logic/Player"),a=e("./Logic/PlayerBattle"),r=e("./Logic/PlayerLvl"),l=cc._decorator,s=l.ccclass,c=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxLifePoint=0,e}return __extends(e,t),e.prototype.onLoad=function(){a.PlayerBattle.Instance.setHero(this)},e.prototype.onDestroy=function(){a.PlayerBattle.Instance.setHero(null)},e.prototype.initWithConfig=function(){this.roleName="hero",this.init(),this.setFaceDir(!0),this.node.setPosition(350,this.ownerMap.GROUND_HEIGHT),this.attackPower=i.Player.Instance.getAtk(1),this.maxLifePoint=i.Player.Instance.getHp(),this.lifePoint=this.maxLifePoint,this.setFenShen(r.PlayerLvl.Instance.isHaveThreeBody()),this.isBaTi=r.PlayerLvl.Instance.isNoneKnockDown()},e=__decorate([s],e)}(n.default));o.default=c,cc._RF.pop()},{"./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./Logic/PlayerLvl":"PlayerLvl","./RoleBase":"RoleBase"}],ShopData:[function(e,t,o){"use strict";var n;cc._RF.push(t,"5f5aeHnmNhDFLq6V5aDL5MC","ShopData"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.ShopItemType||(o.ShopItemType={}))[n["火箭炮"]=1]="火箭炮",n[n["黄金重狙枪"]=2]="黄金重狙枪",n[n["火力喷射炮"]=3]="火力喷射炮",n[n["超级大礼包"]=4]="超级大礼包",n[n["角色复活"]=5]="角色复活",n[n["无敌盾"]=6]="无敌盾",n[n["金币8000"]=7]="金币8000",n[n["金币12500"]=8]="金币12500",n[n["全攻击加成"]=9]="全攻击加成",n[n["耐久加成"]=10]="耐久加成",n[n["生命加成"]=11]="生命加成",n[n["直接过关"]=12]="直接过关",n[n["特惠大礼包"]=13]="特惠大礼包",n[n["角色升级"]=14]="角色升级",n[n["关卡开启"]=15]="关卡开启",n[n["金币22500"]=16]="金币22500",o.ALL_SHOP_ITEM_DATA=[{id:1,name:"火箭炮",price:20,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL1",icon:"weapon/w12"},{id:2,name:"黄金重狙枪",price:20,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL2",icon:"weapon/w10"},{id:3,name:"火力喷射炮",price:10,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL3",icon:"weapon/w9"},{id:4,name:"超级大礼包",price:10,des:"spas光线弹＊1、金币＊12500",priceType:"软计费点",itemAlias:"TOOL4",icon:"weapon/item0"},{id:5,name:"角色复活",price:10,des:"复活",priceType:"软计费点",itemAlias:"TOOL5",icon:"weapon/item0"},{id:6,name:"无敌盾",price:8,des:"护盾。主角获得无敌状态100秒",priceType:"软计费点",itemAlias:"TOOL6",icon:"weapon/defense"},{id:7,name:"8000金币",price:6,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL7",icon:"weapon/item0"},{id:8,name:"12500金币",price:8,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL8",icon:"weapon/item0"},{id:9,name:"全攻击加成",price:8,des:"全攻击提升50%",priceType:"软计费点",itemAlias:"TOOL10",icon:"weapon/item1"},{id:10,name:"耐久加成",price:6,des:"耐久上限50%",priceType:"软计费点",itemAlias:"TOOL11",icon:"weapon/item2"},{id:11,name:"生命加成",price:6,des:"生命上限50%",priceType:"软计费点",itemAlias:"TOOL12",icon:"weapon/item3"},{id:12,name:"直接过关",price:10,des:"直接过关",priceType:"软计费点",itemAlias:"TOOL13",icon:"weapon/item0"},{id:13,name:"特惠大礼包",price:10,des:"攻击、生命耐久加成50%再送12500金币",priceType:"软计费点",itemAlias:"TOOL14",icon:"weapon/item0"},{id:14,name:"角色升级",price:10,des:"人物角色升级",priceType:"软计费点",itemAlias:"TOOL15",icon:"weapon/item0"},{id:15,name:"关卡开启",price:6,des:"第四关弹出关卡开启",priceType:"硬计费点",itemAlias:"TOOL16",icon:"weapon/item0"},{id:16,name:"22500金币",price:10,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL8",icon:"weapon/item0"}],o.ALL_SHOP_ITEM_DATA_MAP={};for(var i=0,a=o.ALL_SHOP_ITEM_DATA;i<a.length;i++){var r=a[i];o.ALL_SHOP_ITEM_DATA_MAP[r.id]=r}cc._RF.pop()},{}],ShopWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"05d02a7N7hPubXwlZ4mzRI7","ShopWeapon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money1=null,e.money2=null,e.money3=null,e.money4=null,e}return __extends(e,t),e.prototype.start=function(){this.initOnlyMoney(n.ShopItemType.黄金重狙枪,this.money1),this.initOnlyMoney(n.ShopItemType.火箭炮,this.money2),this.initOnlyMoney(n.ShopItemType.火力喷射炮,this.money3),this.initOnlyMoney(n.ShopItemType.特惠大礼包,this.money4)},e.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},e.prototype.onFormClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy()},e.prototype.onBtn1Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.超级大礼包)},e.prototype.onBtn2Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.黄金重狙枪)},e.prototype.onBtn3Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.火箭炮)},e.prototype.onBtn4Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.火力喷射炮)},e.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([s(cc.Label)],e.prototype,"money1",void 0),__decorate([s(cc.Label)],e.prototype,"money2",void 0),__decorate([s(cc.Label)],e.prototype,"money3",void 0),__decorate([s(cc.Label)],e.prototype,"money4",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Shop:[function(e,t,o){"use strict";cc._RF.push(t,"68d32DuO0hCMoSww3pIoyMP","Shop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../Logic//Player"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.money1=null,e.money2=null,e.money3=null,e.money4=null,e.doubleGoldTime=null,e.goldSprite1=null,e.goldSprite2=null,e.goldSprite3=null,e.goldSpriteFrames1=null,e.goldSpriteFrames12=null,e.goldSpriteFrames2=null,e.goldSpriteFrames22=null,e.goldSpriteFrames3=null,e.goldSpriteFrames32=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.updateDoubleGoldTime(),this.initOnlyMoney(n.ShopItemType.金币22500,this.money1),this.initOnlyMoney(n.ShopItemType.金币12500,this.money2),this.initOnlyMoney(n.ShopItemType.金币8000,this.money3),this.initOnlyMoney(n.ShopItemType.特惠大礼包,this.money4)},e.prototype.updateDoubleGoldTime=function(){var e=a.Player.Instance.getShopTime();if(0==e)this.doubleGoldTime.string="",this.goldSprite1.spriteFrame=this.goldSpriteFrames1,this.goldSprite2.spriteFrame=this.goldSpriteFrames2,this.goldSprite3.spriteFrame=this.goldSpriteFrames3;else{var t=Math.floor(e/1e3)%60,o=Math.floor(e/1e3/60)%60,n=Math.floor(e/1e3/60/60)%60;this.doubleGoldTime.string=n+";"+o+";"+t,this.goldSprite1.spriteFrame=this.goldSpriteFrames12,this.goldSprite2.spriteFrame=this.goldSpriteFrames22,this.goldSprite3.spriteFrame=this.goldSpriteFrames32}},e.prototype.update=function(e){this.updateDoubleGoldTime()},e.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},e.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},e.prototype.onBtn1Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.超级大礼包)},e.prototype.onBtn2Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币22500)},e.prototype.onBtn3Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币12500)},e.prototype.onBtn4Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币8000)},e.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([c(cc.Label)],e.prototype,"money1",void 0),__decorate([c(cc.Label)],e.prototype,"money2",void 0),__decorate([c(cc.Label)],e.prototype,"money3",void 0),__decorate([c(cc.Label)],e.prototype,"money4",void 0),__decorate([c(cc.Label)],e.prototype,"doubleGoldTime",void 0),__decorate([c(cc.Sprite)],e.prototype,"goldSprite1",void 0),__decorate([c(cc.Sprite)],e.prototype,"goldSprite2",void 0),__decorate([c(cc.Sprite)],e.prototype,"goldSprite3",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames1",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames12",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames2",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames22",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames3",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"goldSpriteFrames32",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic//Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],SkillData:[function(e,t,u){"use strict";var o,n;cc._RF.push(t,"1ae102oaXFNDaZ6PFRLiapQ","SkillData"),Object.defineProperty(u,"__esModule",{value:!0}),(o=u.SMState||(u.SMState={}))[o.IDLE=0]="IDLE",o[o.JUMP=1]="JUMP",o[o.BLOCKED=2]="BLOCKED",o[o.BLOCKED_J=3]="BLOCKED_J",o[o.LYING=4]="LYING",(n=u.SMVariable||(u.SMVariable={}))[n.Input_WalkDir=0]="Input_WalkDir",n[n.Input_Jump=1]="Input_Jump",n[n.Input_Attack1=2]="Input_Attack1",n[n.Input_Attack2=3]="Input_Attack2",n[n.Input_ChangeWeapon=4]="Input_ChangeWeapon",n[n.Trigger_SkillID=5]="Trigger_SkillID",n[n.Trigger_HitBySkillID=6]="Trigger_HitBySkillID",n[n.Trigger_AnimationFinished=7]="Trigger_AnimationFinished",n[n.SkillID=8]="SkillID",n[n.HitBySkillID=9]="HitBySkillID",n[n.BlockedReason=10]="BlockedReason",n[n.PositionY=11]="PositionY",n[n.SpeedX=12]="SpeedX",n[n.SpeedY=13]="SpeedY",n[n.LyingCountDown=14]="LyingCountDown",n[n.IceFireCountDown=15]="IceFireCountDown",n[n.FlyKickCountDown=16]="FlyKickCountDown",n[n.IsBlowedHigh=17]="IsBlowedHigh",u.ALL_SKILL_DATA=[],u.ALL_SKILL_DATA_MAP={},u.loadSkillData=function(){0<u.ALL_SKILL_DATA.length||cc.loader.loadRes("excel_json/SkillData",function(e,t){if(e)console.log(e);else{for(var o=t[0],n={},i=0;i<o.length;++i)n[o[i]]=i;for(var a=0,r=t[1];a<r.length;a++){var l=r[a];(p={skillId:l[n.skillId],groupId:l[n.groupId],animName:l[n.animName],beHitAnimName:l[n.beHitAnimName],beHitDieAnimName:l[n.beHitDieAnimName],moveSpeed:l[n.moveSpeed]||0,beHitMoveSpeed:l[n.beHitMoveSpeed]||0,power:l[n.power]||0,availableStates:l[n.availableStates],inputKey:l[n.inputKey],inputPriority:l[n.inputPriority],blowPower:l[n.blowPower],special:l[n.special],equipid:l[n.equipid],gunAnimName:l[n.gunAnimName]}).availableStates=p.availableStates.split(","),u.ALL_SKILL_DATA.push(p)}u.ALL_SKILL_DATA.sort(function(e,t){return t.inputPriority!=e.inputPriority?t.inputPriority-e.inputPriority:e.skillId-t.skillId});for(var s=0,c=u.ALL_SKILL_DATA;s<c.length;s++){var p=c[s];u.ALL_SKILL_DATA_MAP[p.skillId]=p}}})},cc._RF.pop()},{}],SpriteAnim:[function(e,t,o){"use strict";cc._RF.push(t,"42e43GCeslGwaY29ROqWquG","SpriteAnim"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(e,t,o){this.frames=e,this.fps=t,this.autoDelete=o,this.index=0,this.second=0,this.sprite=this.getComponent(cc.Sprite),this.sprite.spriteFrame=e[0]},t.prototype.update=function(e){this.second+=e;var t=Math.floor(this.second*this.fps);t!=this.index&&((this.index=t)<this.frames.length?this.sprite.spriteFrame=this.frames[t]:this.autoDelete&&this.node.removeFromParent())},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],StateMachine:[function(e,t,o){"use strict";cc._RF.push(t,"8aef9SelaFDtIjS67FHcCS0","StateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._registeredStates={},this._currentState=null,this._variables={},this.debugLogName=null}return e.prototype.registerState=function(e){this._registeredStates[e]={stateId:e,changes:[]}},e.prototype.registerStateChange=function(e,t,o,n){if(e instanceof Array)for(var i=0,a=e;i<a.length;i++){var r=a[i];this._registeredStates[r].changes.push({nextStateId:t,condition:o,actionAfterChange:n})}else this._registeredStates[e].changes.push({nextStateId:t,condition:o,actionAfterChange:n})},e.prototype.getCurrentStateId=function(){return this._currentState.stateId},e.prototype.setState=function(e){this._currentState=this._registeredStates[e]},e.prototype.setVariable=function(e,t){this._variables[e]=t},e.prototype.getVariable=function(e){return this._variables[e]},e.prototype.getVariableAndClear=function(e){var t=this._variables[e];return this._variables[e]=0,t},e.prototype.checkStateChange=function(){if(!this._currentState)return!1;for(var e=0,t=this._currentState.changes;e<t.length;e++){var o=t[e];if(!o.condition||o.condition()){var n=this._currentState.stateId;return this.setState(o.nextStateId),this.debugLogName&&console.log(this.debugLogName+" setState "+o.nextStateId),o.actionAfterChange&&o.actionAfterChange(n),!0}}return!1},e}();o.StateMachine=n,cc._RF.pop()},{}],UICommon:[function(e,t,o){"use strict";cc._RF.push(t,"2b7f1wMGw5KP7njCAfjq/S4","UICommon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AudioMgr");o.onButtonClicked=function(){n.myAudioMgr.playSFX("button.ogg")},o.recursiveFindNode=function e(t,o){var n=t.getChildByName(o);if(n)return n;for(var i=t.children,a=0;a<i.length;++a)if(n=e(i[a],o))return n;return null},o.switchToScene=function(e,t){switch(void 0===t&&(t=null),console.log("will switch to scene "+e),e){case"Begin":case"Weapon":case"Test":case"Loading":cc.director.loadScene(e,function(){console.log("scene "+e+" loaded"),t&&t()});break;default:console.log("warning unknown scene name "+e)}},o.setSpriteFromRawRes=function(e,o){null!=e&&null!=o||console.log("setSpriteFromRawRes error c="+e+" sprite="+o),cc.loader.loadRes(e,cc.SpriteFrame,function(e,t){e?console.log(e):t&&(o.spriteFrame=t)})},cc._RF.pop()},{"./AudioMgr":"AudioMgr"}],Weapon0:[function(e,t,o){"use strict";cc._RF.push(t,"4b6bbAgEAxN/4UaR0+iVS4/","Weapon0"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/GunData"),i=e("../Logic/Player"),a=e("../Logic/PlayerShop"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gunSprite=null,e.nameLabel=null,e.atkLabel=null,e.valueLabel=null,e.priceLabel=null,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(e){this._gunType=e;var t=n.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,this.priceLabel.string=t.price+"金币",r.setSpriteFromRawRes(t.icon,this.gunSprite),this.gunSprite.sizeMode=cc.Sprite.SizeMode.RAW},e.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},e.prototype.onBuyClick=function(){r.onButtonClicked(),this.node.destroy(),n.ALL_GUN_DATA_MAP[this._gunType].price>i.Player.Instance.get(i.PlayerAttr.金币)?a.PlayerShop.Instance.showShopUI("shop"):a.PlayerShop.Instance.buyGunByCoin(this._gunType)},__decorate([c(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([c(cc.Label)],e.prototype,"nameLabel",void 0),__decorate([c(cc.Label)],e.prototype,"atkLabel",void 0),__decorate([c(cc.Label)],e.prototype,"valueLabel",void 0),__decorate([c(cc.Label)],e.prototype,"priceLabel",void 0),e=__decorate([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Weapon1:[function(e,t,o){"use strict";cc._RF.push(t,"2079f0WvMtKuZNhgN3h7TKz","Weapon1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gunSprite=null,e.desLabel=null,e.priceLabel=null,e}return __extends(e,t),e.prototype.init=function(e){this._shopItemType=e;var t=n.ALL_SHOP_ITEM_DATA_MAP[e];this.desLabel.string=t.des,this.priceLabel.string=t.price+"元",a.setSpriteFromRawRes(t.icon,this.gunSprite)},e.prototype.onFormClick=function(){a.onButtonClicked(),this.node.destroy()},e.prototype.onBuyClick=function(){a.onButtonClicked(),i.PlayerShop.Instance.buyByRMB(this._shopItemType,this.node)},__decorate([s(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([s(cc.Label)],e.prototype,"desLabel",void 0),__decorate([s(cc.Label)],e.prototype,"priceLabel",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Weapon:[function(e,t,o){"use strict";cc._RF.push(t,"efc40OHBKlHKqTtPS6m8HUx","Weapon"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Logic/Player"),n=e("../Data/GunData"),a=e("../Data/ShopData"),r=e("../UICommon"),l=e("../Logic/PlayerWeapon"),s=e("../Logic/PlayerShop"),c=e("../Logic/PlayerBattle"),p=e("../Logic/PlayerLvl"),u=cc._decorator,h=u.ccclass,d=u.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.textLabelRightUI=null,e.gunSpriteRightUI=null,e.atkLabelRightUI=null,e.valueLabelRightUI=null,e.priceLabelRightUI=null,e.moneyLabel=null,e.lifeLabel=null,e.gunSprite=null,e.levelUpBtn=null,e.shopBtn=null,e.weaponShopBtn=null,e.weaponShopUI=null,e.weapon0UI=null,e.weapon1UI=null,e.doubleGoldTime=null,e.curSelectWeaponIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){i.Player.Instance.addListener(this),l.PlayerWeapon.Instance.addGunListener(this),l.PlayerWeapon.Instance.addBuffListener(this),this.curSelectWeaponIndex=0},e.prototype.onDestroy=function(){i.Player.Instance.removeListener(this),l.PlayerWeapon.Instance.removeGunListener(this),l.PlayerWeapon.Instance.removeBuffListener(this)},e.prototype.start=function(){this.doScaleAction(this.levelUpBtn),this.doScaleAction(this.shopBtn),this.doScaleAction(this.weaponShopBtn),this.updateWeapons(),this.updateMoney(),this.updateLife(),s.PlayerShop.Instance.showShopUI("shop"),this.textLabelRightUI.node.active=!1,this.updateDoubleGoldTime()},e.prototype.update=function(e){this.updateDoubleGoldTime()},e.prototype.updateDoubleGoldTime=function(){var e=i.Player.Instance.getShopTime();if(0==e)this.doubleGoldTime.string="";else{var t=Math.floor(e/1e3)%60,o=Math.floor(e/1e3/60)%60,n=Math.floor(e/1e3/60/60)%60;this.doubleGoldTime.string=n+";"+o+";"+t}},e.prototype.onPlayerAttrNotify=function(e,t){i.PlayerAttr.金币==e&&(this.moneyLabel.string=""+t)},e.prototype.onPlayGetGunNotify=function(e){if(this.updateWeapons(),l.PlayerWeapon.Instance.isHaveGun(e)){this.showRightUI(e,!0),this.curSelectWeaponIndex=e;var t=this.node.getChildByName(""+this.curSelectWeaponIndex);null!=t&&this.doScaleAction(t)}},e.prototype.onPlayGetBuffNotify=function(e){this.updateLife(),0!=this.curSelectWeaponIndex&&this.updateRightUI(this.curSelectWeaponIndex)},e.prototype.updateWeapons=function(){for(var e=1;e<13;e++){var t=this.node.getChildByName(""+e).getComponent(cc.Button),o=l.PlayerWeapon.Instance.isHaveGun(e)?cc.Color.WHITE:cc.Color.GRAY;t.normalColor=o,t.pressedColor=o,t.hoverColor=o,t.disabledColor=o}},e.prototype.updateMoney=function(){var e=i.Player.Instance.get(i.PlayerAttr.金币);this.moneyLabel.string=""+e},e.prototype.updateLife=function(){var e=i.Player.Instance.getHp();this.lifeLabel.string=""+e},e.prototype.doScaleAction=function(e){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))))},e.prototype.showRightUI=function(e,t){(this.textLabelRightUI.node.active=t)&&this.updateRightUI(e)},e.prototype.updateRightUI=function(e){if(l.PlayerWeapon.Instance.isHaveGun(e)){var t=l.PlayerWeapon.Instance.getOwnGun(e);this.textLabelRightUI.string=""+t.name,this.atkLabelRightUI.string=""+t.atk,r.setSpriteFromRawRes(t.icon,this.gunSprite),this.gunSprite.sizeMode=cc.Sprite.SizeMode.RAW;var o=l.PlayerWeapon.Instance.getGunLocal(e);this.valueLabelRightUI.string=o.valueDurability+"/"+t.value;var n=l.PlayerWeapon.Instance.getRepairGunCostCoin(e);this.priceLabelRightUI.string=n+"金币"}},e.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},e.prototype.onLevelUplick=function(){r.onButtonClicked(),p.PlayerLvl.Instance.showLvlUpUI()},e.prototype.onShopClick=function(){r.onButtonClicked(),s.PlayerShop.Instance.showShopUI("shop")},e.prototype.onWeaponShopClick=function(){r.onButtonClicked(),this.node.addChild(cc.instantiate(this.weaponShopUI))},e.prototype.onWeaponClick=function(e){if(r.onButtonClicked(),0!=this.curSelectWeaponIndex){var t=this.node.getChildByName(""+this.curSelectWeaponIndex);this.curSelectWeaponIndex=0,null!=t&&t.stopAllActions()}if(l.PlayerWeapon.Instance.isHaveGun(e))return this.showRightUI(e,!0),this.curSelectWeaponIndex=e,void(null!=(t=this.node.getChildByName(""+this.curSelectWeaponIndex))&&this.doScaleAction(t));if(this.showRightUI(e,!1),0<s.PlayerShop.Instance.gunTypeToShopType(e))this.node.addChild(cc.instantiate(this.weaponShopUI));else{var o=cc.instantiate(this.weapon0UI);this.node.addChild(o),o.getComponent("Weapon0").init(e)}},e.prototype.onWeapon1Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.黄瓜)},e.prototype.onWeapon2Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.辣椒)},e.prototype.onWeapon3Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.火影初级)},e.prototype.onWeapon4Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.火影中级)},e.prototype.onWeapon5Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.火影高级)},e.prototype.onWeapon6Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.光影初极)},e.prototype.onWeapon7Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.光影中级)},e.prototype.onWeapon8Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.光影高级)},e.prototype.onWeapon9Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.火力喷射炮)},e.prototype.onWeapon10Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.黄金重狙枪)},e.prototype.onWeapon11Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.火箭炮)},e.prototype.onWeapon12Click=function(){r.onButtonClicked(),this.onWeaponClick(n.GunType.Spas光线弹)},e.prototype.onWeaponRMBClick=function(e){var t=cc.instantiate(this.weapon1UI);this.node.addChild(t),t.getComponent("Weapon1").init(e)},e.prototype.onAtkUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.全攻击加成)},e.prototype.onBulletUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.耐久加成)},e.prototype.onBloodUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.生命加成)},e.prototype.onSupplyClick=function(){r.onButtonClicked(),0!=this.curSelectWeaponIndex&&(l.PlayerWeapon.Instance.getRepairGunCostCoin(this.curSelectWeaponIndex)>i.Player.Instance.get(i.PlayerAttr.金币)?s.PlayerShop.Instance.showShopUI("shop"):(l.PlayerWeapon.Instance.RepairGun(this.curSelectWeaponIndex),this.updateRightUI(this.curSelectWeaponIndex)))},e.prototype.onEnterClick=function(){r.onButtonClicked(),c.PlayerBattle.Instance.changeStatus(c.BattleStatus.BattleStatus_Load)},__decorate([d(cc.Label)],e.prototype,"textLabelRightUI",void 0),__decorate([d(cc.Sprite)],e.prototype,"gunSpriteRightUI",void 0),__decorate([d(cc.Label)],e.prototype,"atkLabelRightUI",void 0),__decorate([d(cc.Label)],e.prototype,"valueLabelRightUI",void 0),__decorate([d(cc.Label)],e.prototype,"priceLabelRightUI",void 0),__decorate([d(cc.Label)],e.prototype,"moneyLabel",void 0),__decorate([d(cc.Label)],e.prototype,"lifeLabel",void 0),__decorate([d(cc.Sprite)],e.prototype,"gunSprite",void 0),__decorate([d(cc.Node)],e.prototype,"levelUpBtn",void 0),__decorate([d(cc.Node)],e.prototype,"shopBtn",void 0),__decorate([d(cc.Node)],e.prototype,"weaponShopBtn",void 0),__decorate([d(cc.Prefab)],e.prototype,"weaponShopUI",void 0),__decorate([d(cc.Prefab)],e.prototype,"weapon0UI",void 0),__decorate([d(cc.Prefab)],e.prototype,"weapon1UI",void 0),__decorate([d(cc.Label)],e.prototype,"doubleGoldTime",void 0),e=__decorate([h],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerLvl":"PlayerLvl","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Win:[function(e,t,o){"use strict";cc._RF.push(t,"ca7c6vsokpD2L0x1KL0zlqJ","Win"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=e("../UICommon"),a=e("../Logic/PlayerLvl"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.killLabel=null,e.goldLabel=null,e}return __extends(e,t),e.prototype.onLoad=function(){var e=n.PlayerBattle.Instance.getBattleWinResult(),t=e.killNum,o=e.getGold;this.killLabel.string=""+t,this.goldLabel.string=""+o},e.prototype.onContinueClick=function(){i.onButtonClicked(),this.node.destroy(),n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_NextBattle)},e.prototype.onLevelUpClick=function(){i.onButtonClicked(),a.PlayerLvl.Instance.showLvlUpUI()},__decorate([s(cc.Label)],e.prototype,"killLabel",void 0),__decorate([s(cc.Label)],e.prototype,"goldLabel",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerLvl":"PlayerLvl","../UICommon":"UICommon"}],comp_UIShowAct:[function(e,t,o){"use strict";cc._RF.push(t,"e42ebYfOLVNDp/YmCirtH3c","comp_UIShowAct"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../Logic/PlayerBattle"),r=cc._decorator,l=r.ccclass,s=r.property;(i=n||(n={}))[i.act_scale_center=1]="act_scale_center",i[i.act_scale_leftbottom=2]="act_scale_leftbottom";var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actNode=null,e.actType=n.act_scale_center,e.updateTime=0,e}return __extends(e,t),e.prototype.start=function(){var e=cc.director.getScene();e&&cc.isValid(e)&&"Test"==e.name&&a.PlayerBattle.Instance.setPause(this.node)},e.prototype.onDestroy=function(){var e=cc.director.getScene();e&&cc.isValid(e)&&"Test"==e.name&&a.PlayerBattle.Instance.removePause(this.node)},e.prototype.update=function(e){if(0==this.updateTime)this.updateTime++,this.actNode.opacity=0;else if(1==this.updateTime)switch(this.updateTime++,this.actNode.opacity=255,this.actType){case n.act_scale_center:this.actNode.setScale(.2),this.actNode.runAction(cc.sequence(cc.scaleTo(.15,1),cc.moveBy(.12,0,10),cc.moveBy(.12,0,-10)));break;case n.act_scale_leftbottom:this.actNode.setScale(.2),this.actNode.setPosition((.2*this.actNode.width-this.node.width)/2,(.2*this.actNode.height-this.node.height)/2),this.actNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(.15,1),cc.moveTo(.15,0,0)),cc.moveBy(.12,0,10),cc.moveBy(.12,0,-10)))}},__decorate([s(cc.Node)],e.prototype,"actNode",void 0),__decorate([s],e.prototype,"actType",void 0),e=__decorate([l],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}]},{},["AudioMgr","Bullet","ControlHeroByKeyboard","ControlHeroByTouch","AchieveData","GunData","HelpData","LevelData","ShopData","DragonBonesConfig","EquipData","LocalData","Player","PlayerAchieve","PlayerBattle","PlayerLvl","PlayerShop","PlayerWeapon","Map","RoleBase","RoleEnemy","RoleHero","SkillData","SpriteAnim","StateMachine","UICommon","About","Achievement","Achievement1","Begin","Begin1","DailyBonus","FenShen","Game","GameBegin","GunBuy","Help","Help1","LevelUp","Loading","Music","Pause","Present","Present1","Present2","Revive","Shop","ShopWeapon","Weapon","Weapon0","Weapon1","Win","comp_UIShowAct"]);