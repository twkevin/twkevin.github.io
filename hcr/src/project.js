require=function e(t,o,n){function i(r,l){if(!o[r]){if(!t[r]){var s="function"==typeof require&&require;if(!l&&s)return s(r,!0);if(a)return a(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=o[r]={exports:{}};t[r][0].call(p.exports,function(e){var o=t[r][1][e];return i(o||e)},p,p.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)i(n[r]);return i}({About:[function(e,t,o){"use strict";cc._RF.push(t,"f8a1dkqKwZM8bplPTIiGtLG","About"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onFormClick=function(){this.node.destroy()},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],AchieveData:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"58aaeMM6slLyrDRdx2sHOPZ","AchieveData"),Object.defineProperty(o,"__esModule",{value:!0}),(i=n=o.AchieveType||(o.AchieveType={}))[i["过关达人"]=0]="过关达人",i[i["地狱达人"]=1]="地狱达人",i[i["重生达人"]=2]="重生达人",i[i["杀手"]=3]="杀手",i[i["抓金手"]=4]="抓金手",i[i["武器达人"]=5]="武器达人",i[i["过肩摔"]=6]="过肩摔",i[i["格斗达人"]=7]="格斗达人",o.ALL_ACHIEVE_DATA=[{id:n.过关达人,target:[1,2,5,10,20],award:[200,200,500,1e3,2e3],icon:"achieve/a1"},{id:n.地狱达人,target:[1,5,10,50,250],award:[200,400,800,1500,2e3],icon:"achieve/a2"},{id:n.重生达人,target:[1,2,4,8,16],award:[800,2e3,4e3,8e3,16e3],icon:"achieve/a3"},{id:n.杀手,target:[20,100,200,500,1e3],award:[200,400,500,800,1e3],icon:"achieve/a4"},{id:n.抓金手,target:[2e3,1e4,5e4,1e5,2e5],award:[200,1e3,2e3,5e3,1e4],icon:"achieve/a5"},{id:n.武器达人,target:[30,100,200,500,1e3],award:[200,300,400,500,800],icon:"achieve/a6"},{id:n.过肩摔,target:[1,10,50,100,500],award:[100,200,500,800,1e3],icon:"achieve/a7"},{id:n.格斗达人,target:[1,10,50,100,500],award:[200,400,600,1e3,2e3],icon:"achieve/a8"}],o.ALL_ACHIEVE_DATA_MAP={};for(var a=0,r=o.ALL_ACHIEVE_DATA;a<r.length;a++){var l=r[a];o.ALL_ACHIEVE_DATA_MAP[l.id]=l}cc._RF.pop()},{}],Achievement1:[function(e,t,o){"use strict";cc._RF.push(t,"70e5ebARo5HRYa3fRtugTTW","Achievement1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/AchieveData"),i=e("../UICommon"),a=[],r=!1,l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t.level=null,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.node.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.8),cc.callFunc(function(){e.node.destroy()}))),a.push(this.node),r=!0},t.prototype.onDestroy=function(){var e=a.indexOf(this.node);-1!=e&&(a.splice(e,1),r=!0)},t.prototype.update=function(e){if(r){for(var t=this.node.height,o=0;o<a.length;o++)a[o].setPositionX(0),a[o].setPositionY(t*(a.length-o-1));r=!1}},t.prototype.show=function(e,t){var o=n.ALL_ACHIEVE_DATA_MAP[e];i.setSpriteFromRawRes(o.icon,this.type),this.level.string=""+(t+1)},__decorate([c(cc.Sprite)],t.prototype,"type",void 0),__decorate([c(cc.Label)],t.prototype,"level",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../UICommon":"UICommon"}],Achievement:[function(e,t,o){"use strict";cc._RF.push(t,"fa0512hGyNN7IIA2vwnBGS1","Achievement"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerAchieve"),i=e("../Logic/Player"),a=e("../Data/AchieveData"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item1=null,t.item2=null,t.item3=null,t.item4=null,t.item5=null,t.item6=null,t.item7=null,t.item8=null,t._items=null,t}return __extends(t,e),t.prototype.onLoad=function(){this._items=[this.item1,this.item2,this.item3,this.item4,this.item5,this.item6,this.item7,this.item8]},t.prototype.start=function(){for(var e=0;e<this._items.length;e++)this.updateAchieveItem(this._items[e],e)},t.prototype.updateAchieveItem=function(e,t){var o=i.PlayerAttr.成功过关次数;if(t==a.AchieveType.过关达人)o=i.PlayerAttr.成功过关次数;else if(t==a.AchieveType.地狱达人)o=i.PlayerAttr.主角死亡次数;else if(t==a.AchieveType.重生达人)o=i.PlayerAttr.主角复活次数;else if(t==a.AchieveType.杀手)o=i.PlayerAttr.杀敌数量;else if(t==a.AchieveType.抓金手)o=i.PlayerAttr.获得金币总数;else if(t==a.AchieveType.武器达人)o=i.PlayerAttr.武器耐久总消耗数;else if(t==a.AchieveType.过肩摔)o=i.PlayerAttr.过肩摔完成次数;else{if(t!=a.AchieveType.格斗达人)return;o=i.PlayerAttr.绝招使用次数}var r=n.PlayerAchieve.Instance.isAchievementMaxLvl(t),l=n.PlayerAchieve.Instance.getAchievementLvl(t),s=i.Player.Instance.get(o),c=a.ALL_ACHIEVE_DATA_MAP[t];e.getChildByName("gold").getComponent(cc.Label).string=r?"完成":""+c.award[l+1],e.getChildByName("level").getComponent(cc.Label).string=r?""+(l+1):""+(l+2);var p=e.getChildByName("n");p.getComponent(cc.ProgressBar).progress=r?1:s/c.target[l+1],p.getChildByName("num").getComponent(cc.Label).string=r?s+"/"+c.target[l]:s+"/"+c.target[l+1]},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},__decorate([c(cc.Node)],t.prototype,"item1",void 0),__decorate([c(cc.Node)],t.prototype,"item2",void 0),__decorate([c(cc.Node)],t.prototype,"item3",void 0),__decorate([c(cc.Node)],t.prototype,"item4",void 0),__decorate([c(cc.Node)],t.prototype,"item5",void 0),__decorate([c(cc.Node)],t.prototype,"item6",void 0),__decorate([c(cc.Node)],t.prototype,"item7",void 0),__decorate([c(cc.Node)],t.prototype,"item8",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../Logic/Player":"Player","../Logic/PlayerAchieve":"PlayerAchieve","../UICommon":"UICommon"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"3c030S9uKFJi6zhqAgvpdLW","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.myAudioMgr=null,cc.Class({extends:cc.Component,properties:{bgmVolume:1,sfxVolume:1,bgmAudioID:-1},onDestory:function(){console.log("AudioMgr onDestory 1"),o.myAudioMgr=null},onLoad:function(){console.log("AudioMgr onLoad 1"),o.myAudioMgr=this,console.log("AudioMgr onLoad 2"),this.init(),console.log("AudioMgr onLoad 3")},init:function(){var e=cc.sys.localStorage.getItem("bgmVolume");null!=e&&(this.bgmVolume=parseFloat(e)),null!=(e=cc.sys.localStorage.getItem("sfxVolume"))&&(this.sfxVolume=parseFloat(e)),cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.audioEngine.pauseAll"),cc.audioEngine.pauseAll()}),cc.game.on(cc.game.EVENT_SHOW,function(){console.log("cc.audioEngine.resumeAll"),cc.audioEngine.resumeAll()})},getUrl:function(e){return cc.url.raw("resources/sounds/"+e)},playBGM:function(e){var t=this.getUrl(e);console.log(t),this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,this.bgmVolume)},playSFX:function(e){console.log("AudioMgr playSFX 1");var t=this.getUrl(e);if(console.log("AudioMgr playSFX 2 "+t),this.sfxVolume>0)cc.audioEngine.play(t,!1,this.sfxVolume)},setSFXVolume:function(e){this.sfxVolume!=e&&(cc.sys.localStorage.setItem("sfxVolume",e),this.sfxVolume=e)},getSFXVolume:function(){return this.sfxVolume},getBGMVolume:function(){return this.bgmVolume},setBGMVolume:function(e,t){this.bgmAudioID>=0&&(e>0?cc.audioEngine.resume(this.bgmAudioID):cc.audioEngine.pause(this.bgmAudioID)),(this.bgmVolume!=e||t)&&(cc.sys.localStorage.setItem("bgmVolume",e),this.bgmVolume=e,cc.audioEngine.setVolume(this.bgmAudioID,e))},pauseAll:function(){cc.audioEngine.pauseAll()},resumeAll:function(){cc.audioEngine.resumeAll()}}),cc._RF.pop()},{}],Begin1:[function(e,t,o){"use strict";cc._RF.push(t,"50c4cISdVZM4bhkeVxS5HM8","Begin1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=e("../UICommon"),a=e("../Data/HelpData"),r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onContinulick=function(){n.Player.Instance.set(n.PlayerAttr.关卡等级,0),n.Player.Instance.resetHelpGuide(a.HelpType.help18),this.node.destroy(),i.switchToScene("Weapon")},t.prototype.onCloseClick=function(){this.node.destroy()},t=__decorate([l],t)}(cc.Component));o.default=s,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../UICommon":"UICommon"}],Begin:[function(e,t,o){"use strict";cc._RF.push(t,"72f30Ze4l1E+4iluZLOvVr4","Begin"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=e("../UICommon"),a=e("../AudioMgr"),r=e("../Logic/PlayerShop"),l=e("../Logic/LocalData"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gifts=null,t.settingUI=null,t.helpUI=null,t.aboutUI=null,t.achievementUI=null,t.newBegin=null,t.btnBegin=null,t}return __extends(t,e),t.prototype.onLoad=function(){n.Player.Instance.addListener(this)},t.prototype.onDestroy=function(){n.Player.Instance.removeListener(this)},t.prototype.start=function(){a.myAudioMgr.pauseAll(),a.myAudioMgr.playBGM("menubg.ogg"),this.gifts.stopAllActions(),this.gifts.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)))),l.LocalData.Instance.read(),n.Player.Instance.checkDailyBonus(),this.updateNewBeginBtn()},t.prototype.onPlayerAttrNotify=function(e,t){e==n.PlayerAttr.关卡等级&&this.updateNewBeginBtn()},t.prototype.onBeginClick=function(){i.onButtonClicked(),0==n.Player.Instance.get(n.PlayerAttr.关卡等级)?i.switchToScene("Weapon"):this.node.addChild(cc.instantiate(this.newBegin))},t.prototype.onContinueClick=function(){i.onButtonClicked(),i.switchToScene("Weapon")},t.prototype.onSettingClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.settingUI))},t.prototype.onHelpClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.helpUI))},t.prototype.onAboutClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.aboutUI))},t.prototype.onEndClick=function(){i.onButtonClicked(),cc.game.end()},t.prototype.onGiftsClick=function(){i.onButtonClicked(),r.PlayerShop.Instance.showShopUI("present")},t.prototype.onAchievementClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.achievementUI))},t.prototype.updateNewBeginBtn=function(){0==n.Player.Instance.get(n.PlayerAttr.关卡等级)?this.btnBegin.normalSprite=this.btnBegin.hoverSprite:this.btnBegin.normalSprite=this.btnBegin.disabledSprite},__decorate([p(cc.Node)],t.prototype,"gifts",void 0),__decorate([p(cc.Prefab)],t.prototype,"settingUI",void 0),__decorate([p(cc.Prefab)],t.prototype,"helpUI",void 0),__decorate([p(cc.Prefab)],t.prototype,"aboutUI",void 0),__decorate([p(cc.Prefab)],t.prototype,"achievementUI",void 0),__decorate([p(cc.Prefab)],t.prototype,"newBegin",void 0),__decorate([p(cc.Button)],t.prototype,"btnBegin",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../Logic/LocalData":"LocalData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"f3824OLjNJJOqB9AOEaSTXL","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AudioMgr"),i=e("./SpriteAnim"),a=cc._decorator,r=a.ccclass,l=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.myInit=function(e,t,o){(this.ownerRole=e,this.skillData=t,this.equipData=o,this.sprite=this.node.addComponent(cc.Sprite),9==o.equipid)?(this.sprite.sizeMode=cc.Sprite.SizeMode.TRIMMED,this.addComponent(i.default).init(["gunfe-2-1","gunfe-2-2","gunfe-2-3","gunfe-2-4"].map(function(t){return e.dragonBonesConfig.bulletAtlas.getSpriteFrame(t)}),15,!1)):this.sprite.spriteFrame=this.ownerRole.dragonBonesConfig.bulletAtlas.getSpriteFrame(o.bulletSprite);if(this.ownerRole.ownerMap.rolesNode.addChild(this.node),this.node.setAnchorPoint(0,.5),this.node.setPosition(this.ownerRole.node.getPositionX()+50*(this.ownerRole.isFaceRight?1:-1),this.ownerRole.node.getPositionY()+o.bulletHeight),this.ownerRole.isFaceRight||this.node.setScale(-Math.abs(this.node.scaleX),this.node.scaleY),o.gunfireSound&&n.myAudioMgr.playSFX(o.gunfireSound),o.gunfireParticle){var a=cc.instantiate(this.ownerRole.ownerMap.gunfireParticle);this.ownerRole.ownerMap.rolesNode.addChild(a),a.setPosition(this.ownerRole.node.getPositionX()+50*(this.ownerRole.isFaceRight?1:-1),this.ownerRole.node.getPositionY()+o.bulletHeight)}e==e.ownerMap.roleHero?e.ownerMap.bulletsOfHero.push(this):e.ownerMap.bulletsOfEnemy.push(this),e.isFaceRight?this.speed=2*o.bulletSpeed:this.speed=2*-o.bulletSpeed,this.lifeTime=20*o.shootRange/o.bulletSpeed},t.prototype.myUpdate=function(e){this.node.setPositionX(this.node.getPositionX()+this.speed*e),this.lifeTime-=e},t.prototype.myDestroy=function(){var e,t=(e=this.ownerRole==this.ownerRole.ownerMap.roleHero?this.ownerRole.ownerMap.bulletsOfHero:this.ownerRole.ownerMap.bulletsOfEnemy).indexOf(this);t>=0&&e.splice(t,1),this.node.removeFromParent()},t=__decorate([r],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./SpriteAnim":"SpriteAnim"}],ControlHeroByKeyboard:[function(e,t,o){"use strict";cc._RF.push(t,"a53631+aw1KCrSufnONAniM","ControlHeroByKeyboard"),Object.defineProperty(o,"__esModule",{value:!0});var n,i=e("./SkillData"),a=cc._decorator,r=a.ccclass;a.property;(n=o.ButtonState||(o.ButtonState={}))[n.Up=0]="Up",n[n.Down_FirstFrame=1]="Down_FirstFrame",n[n.Down=2]="Down";var l={},s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftKeyDown=!1,t.rightKeyDown=!1,t.targetInput=null,t}return __extends(t,e),t.prototype._clearButtonsState=function(){this.targetInput.setVariable(i.SMVariable.Input_Jump,0),this.targetInput.setVariable(i.SMVariable.Input_Attack1,0),this.targetInput.setVariable(i.SMVariable.Input_Attack2,0),this.targetInput.setVariable(i.SMVariable.Input_ChangeWeapon,0)},t.prototype._updateWalkDir=function(){var e=0;this.leftKeyDown&&(e-=200),this.rightKeyDown&&(e+=200),this.targetInput.setVariable(i.SMVariable.Input_WalkDir,e)},t.prototype.start=function(){var e=this;l[cc.KEY.l]=i.SMVariable.Input_Jump,l[cc.KEY.j]=i.SMVariable.Input_Attack1,l[cc.KEY.k]=i.SMVariable.Input_Attack2,l[cc.KEY.i]=i.SMVariable.Input_ChangeWeapon,this.keyDown=function(t){var o=l[t.keyCode];o?e.targetInput.setVariable(o,1):t.keyCode!=cc.KEY.a||e.leftKeyDown?t.keyCode!=cc.KEY.d||e.rightKeyDown||(e.rightKeyDown=!0,e._updateWalkDir()):(e.leftKeyDown=!0,e._updateWalkDir())},this.keyUp=function(t){var o=l[t.keyCode];o?e.targetInput.setVariable(o,0):t.keyCode==cc.KEY.a&&e.leftKeyDown?(e.leftKeyDown=!1,e._updateWalkDir()):t.keyCode==cc.KEY.d&&e.rightKeyDown&&(e.rightKeyDown=!1,e._updateWalkDir())},cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.keyUp)},t.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.keyDown),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.keyUp),this._clearButtonsState(),this._updateWalkDir()},t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./SkillData":"SkillData"}],ControlHeroByTouch:[function(e,t,o){"use strict";cc._RF.push(t,"15fd9EIuPtDdpsgsRq1B6F3","ControlHeroByTouch"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ControlHeroByKeyboard"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttons=[],t.keyboard=null,t.functions=[],t}return __extends(t,e),t.prototype.start=function(){var e=this;this.functions=[];for(var t=[cc.KEY.a,cc.KEY.d,cc.KEY.j,cc.KEY.k,cc.KEY.l,cc.KEY.i],o=function(o){var i=function(){e.keyboard.keyDown({keyCode:t[o]})},a=function(){e.keyboard.keyUp({keyCode:t[o]})},r=n.buttons[o].node;r.on(cc.Node.EventType.TOUCH_START,i),r.on(cc.Node.EventType.TOUCH_END,a),r.on(cc.Node.EventType.TOUCH_CANCEL,a),n.functions.push(i),n.functions.push(a)},n=this,i=0;i<this.buttons.length;++i)o(i)},t.prototype.onDestroy=function(){for(var e=0;e<this.buttons.length;++e){var t=this.functions[2*e],o=this.functions[2*e+1],n=this.buttons[e].node;n.on(cc.Node.EventType.TOUCH_START,t),n.on(cc.Node.EventType.TOUCH_END,o),n.on(cc.Node.EventType.TOUCH_CANCEL,o)}},__decorate([r(cc.Button)],t.prototype,"buttons",void 0),__decorate([r(n.default)],t.prototype,"keyboard",void 0),t=__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./ControlHeroByKeyboard":"ControlHeroByKeyboard"}],DailyBonus:[function(e,t,o){"use strict";cc._RF.push(t,"3e695xTvDlAS4b8xVy1kfnQ","DailyBonus"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.covers=[],t}return __extends(t,e),t.prototype.start=function(){for(var e=n.Player.Instance.get(n.PlayerAttr.已登陆天数),t=0;t<this.covers.length;t++)this.covers[t].active=t==e},t.prototype.onGetClick=function(){this.node.destroy(),n.Player.Instance.ReceiveDailyBonus()},__decorate([r(cc.Node)],t.prototype,"covers",void 0),t=__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/Player":"Player"}],DragonBonesConfig:[function(e,t,o){"use strict";cc._RF.push(t,"8f4cbAb419L/IKj8ZmrZDVc","DragonBonesConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragonAsset=null,t.dragonAtlasAsset=null,t.dragonArmatureName="armatureName",t.bulletAtlas=null,t}return __extends(t,e),__decorate([a(dragonBones.DragonBonesAsset)],t.prototype,"dragonAsset",void 0),__decorate([a(dragonBones.DragonBonesAtlasAsset)],t.prototype,"dragonAtlasAsset",void 0),__decorate([a],t.prototype,"dragonArmatureName",void 0),__decorate([a(cc.SpriteAtlas)],t.prototype,"bulletAtlas",void 0),t=__decorate([i],t)}(cc.Component);o.default=r,cc._RF.pop()},{}],EquipData:[function(e,t,o){"use strict";cc._RF.push(t,"ba7d1xbUeZBiL54EDk0zJxZ","EquipData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ALL_EQUIP_DATA=[],o.ALL_EQUIP_DATA_MAP={},o.loadEquipData=function(){o.ALL_EQUIP_DATA.length>0||cc.loader.loadRes("excel_json/EquipData",function(e,t){if(e)console.log(e);else{for(var n=t[0],i={},a=0;a<n.length;++a)i[n[a]]=a;for(var r=0,l=t[1];r<l.length;r++){var s=l[r],c={equipid:s[i.equipid],power:s[i.power],delay:s[i.delay],shootRange:s[i.shootRange],maxBulletCount:s[i.maxBulletCount],bulletSpeed:s[i.bulletSpeed],bulletHeight:s[i.bulletHeight],bulletSprite:s[i.bulletSprite],gunfireParticle:s[i.gunfireParticle],gunfireSound:s[i.gunfireSound],useSound:s[i.useSound]};o.ALL_EQUIP_DATA.push(c)}for(var p=0,u=o.ALL_EQUIP_DATA;p<u.length;p++)c=u[p],o.ALL_EQUIP_DATA_MAP[c.equipid]=c}})},cc._RF.pop()},{}],FenShen:[function(e,t,o){"use strict";cc._RF.push(t,"7515ckyrlROHYVkG3bU1+S8","FenShen"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/HelpData"),a=e("../Logic/Player"),r=e("../Logic/PlayerBattle"),l=e("../Logic/PlayerShop"),s=cc._decorator,c=s.ccclass,p=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCloseClick=function(){n.onButtonClicked(),this.node.destroy(),a.Player.Instance.completeGuide(i.HelpType.help7),3==r.PlayerBattle.Instance.getAttackGuanQia()&&l.PlayerShop.Instance.showGiftPresent()},t=__decorate([c],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],GameBegin:[function(e,t,o){"use strict";cc._RF.push(t,"be8d1gFfz1ECZae/OEZsoah","GameBegin"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return __extends(t,e),t.prototype.start=function(){var e=n.PlayerBattle.Instance.getAttackGuanQia();this.label.string=""+e;var t=this;this.node.runAction(cc.sequence(cc.delayTime(.8),cc.fadeOut(.3),cc.callFunc(function(){t.node.destroy(),n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_Begin)})))},__decorate([r(cc.Label)],t.prototype,"label",void 0),t=__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"bba081bGWFGJr/tLnYPUI/z","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../UICommon"),a=e("../AudioMgr"),r=e("../Logic/PlayerBattle"),l=e("../Logic/PlayerWeapon"),s=e("../Logic/PlayerShop"),c=e("../Data/HelpData"),p=e("../Logic/Player"),u=cc._decorator,h=u.ccclass,d=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pauseUI=null,t.changeBtn=null,t.defenceBtn=null,t.helpBtn=null,t.defenceLabel=null,t.bloodProgressBar=null,t.naiJiu=null,t.gunSprite=null,t.weapon1UI=null,t.gunBuyeUI=null,t.comboNode=null,t.posXWeapon=0,t.comboHitNum=0,t.comboHitShowTimes=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.defenceLabel.string="0",this.helpBtn.active=!1,p.Player.Instance.isGuideComplete(c.HelpType.help1)||(this.defenceLabel.string="100"),r.PlayerBattle.Instance.setGameUI(this)},t.prototype.setWudiTime=function(e){var t=Math.floor(e/1e3);this.defenceLabel.string=""+t},t.prototype.onDestroy=function(){r.PlayerBattle.Instance.setGameUI(null)},t.prototype.start=function(){a.myAudioMgr.pauseAll(),a.myAudioMgr.playBGM("gamebg.ogg"),this.updateWeapon()},t.prototype.update=function(e){this.comboNode.active&&(this.comboHitShowTimes-=e,0>this.comboHitShowTimes&&(this.comboHitShowTimes=0,this.comboNode.active=!1))},t.prototype.doScaleAction=function(e){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))))},t.prototype.onPauseClick=function(){i.onButtonClicked(),this.node.addChild(cc.instantiate(this.pauseUI))},t.prototype.onBtnChangeClick=function(){i.onButtonClicked(),r.PlayerBattle.Instance.changeWeapon()},t.prototype.onDefenseClick=function(){i.onButtonClicked(),p.Player.Instance.isGuideComplete(c.HelpType.help1)?this.onWeaponRMBClick(n.ShopItemType.无敌盾):(p.Player.Instance.completeGuide(c.HelpType.help1),p.Player.Instance.isWuDi=!0)},t.prototype.showHelpBtn=function(){1!=this.helpBtn.active&&(this.helpBtn.active=!0,this.doScaleAction(this.helpBtn))},t.prototype.onBtnHelpClick=function(){i.onButtonClicked(),s.PlayerShop.Instance.showShopUI("shop_weapon")},t.prototype.onBtnHitClick=function(){},t.prototype.onBtnGunClick=function(){},t.prototype.onBtnJumpClick=function(){},t.prototype.onWeaponRMBClick=function(e){var t=cc.instantiate(this.weapon1UI);this.node.addChild(t),t.getComponent("Weapon1").init(e)},t.prototype.onBattleEventNotify=function(e){if(e==r.BattleEvent.BattleEvent_ChangeWeapon)this.updateWeapon();else if(e==r.BattleEvent.BattleEvent_HitEnemy){var t=this.comboNode.getChildByName("num");this.comboNode.active?(this.comboHitNum+=1,t.getComponent(cc.Label).string=""+this.comboHitNum,null==t.getActionByTag(100)&&this.playComboNumAct(100)):(this.comboHitNum=1,this.comboHitShowTimes=1.5,this.comboNode.active=!0,t.getComponent(cc.Label).string=""+this.comboHitNum,this.playComboNumAct(100))}else if(e==r.BattleEvent.BattleEvent_UseBullet){var o=r.PlayerBattle.Instance.getEquipID();this.gunSprite.node.active=!0,this.naiJiu.node.active=!0;var n=l.PlayerWeapon.Instance.getGunLocal(o);this.naiJiu.string=":"+n.valueDurability,0==n.valueDurability&&r.PlayerBattle.Instance.changeWeapon()}},t.prototype.playComboNumAct=function(e){var t=this.comboNode.getChildByName("num");t.setScale(.1);var o=this,n=cc.sequence(cc.scaleTo(.16,1),cc.callFunc(function(){o.comboHitShowTimes=1.5}));n.setTag(e),t.runAction(n)},t.prototype.updateWeapon=function(){var e=r.PlayerBattle.Instance.getEquipID();if(0==e)return this.gunSprite.node.active=!1,void(this.naiJiu.node.active=!1);this.gunSprite.node.active=!0,this.naiJiu.node.active=!0;var t=l.PlayerWeapon.Instance.getOwnGun(e),o=l.PlayerWeapon.Instance.getGunLocal(e);i.setSpriteFromRawRes(t.icon,this.gunSprite),this.naiJiu.string=":"+o.valueDurability},__decorate([d(cc.Prefab)],t.prototype,"pauseUI",void 0),__decorate([d(cc.Node)],t.prototype,"changeBtn",void 0),__decorate([d(cc.Node)],t.prototype,"defenceBtn",void 0),__decorate([d(cc.Node)],t.prototype,"helpBtn",void 0),__decorate([d(cc.Label)],t.prototype,"defenceLabel",void 0),__decorate([d(cc.ProgressBar)],t.prototype,"bloodProgressBar",void 0),__decorate([d(cc.Label)],t.prototype,"naiJiu",void 0),__decorate([d(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([d(cc.Prefab)],t.prototype,"weapon1UI",void 0),__decorate([d(cc.Prefab)],t.prototype,"gunBuyeUI",void 0),__decorate([d(cc.Node)],t.prototype,"comboNode",void 0),t=__decorate([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../Data/HelpData":"HelpData","../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],GunBuy:[function(e,t,o){"use strict";cc._RF.push(t,"71718GnBwVDK6k1VTlzeEVV","GunBuy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/GunData"),i=e("../Data/ShopData"),a=e("../Logic/PlayerShop"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gunSprite=null,t.nameLabel=null,t.atkLabel=null,t.valueLabel=null,t.moneyLabel=null,t.gunType=n.GunType.火箭炮,t}return __extends(t,e),t.prototype.start=function(){this.init(n.GunType.火箭炮)},t.prototype.init=function(e){this.gunType=e;var t=n.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,r.setSpriteFromRawRes(t.icon,this.gunSprite);var o=a.PlayerShop.Instance.gunTypeToShopType(this.gunType);if(o>0){var l=i.ALL_SHOP_ITEM_DATA_MAP[o];this.moneyLabel.string=l.price+"元"}},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},t.prototype.onGetClick=function(){r.onButtonClicked();var e=a.PlayerShop.Instance.gunTypeToShopType(this.gunType);e>0&&this.buyItem(e)},t.prototype.buyItem=function(e){a.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([c(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([c(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([c(cc.Label)],t.prototype,"atkLabel",void 0),__decorate([c(cc.Label)],t.prototype,"valueLabel",void 0),__decorate([c(cc.Label)],t.prototype,"moneyLabel",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],GunData:[function(e,t,o){"use strict";var n;cc._RF.push(t,"48d9fWQdG9BrKketQyHCan2","GunData"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.GunType||(o.GunType={}))[n["黄瓜"]=1]="黄瓜",n[n["辣椒"]=2]="辣椒",n[n["火影初级"]=3]="火影初级",n[n["火影中级"]=4]="火影中级",n[n["火影高级"]=5]="火影高级",n[n["光影初极"]=6]="光影初极",n[n["光影中级"]=7]="光影中级",n[n["光影高级"]=8]="光影高级",n[n["火力喷射炮"]=9]="火力喷射炮",n[n["黄金重狙枪"]=10]="黄金重狙枪",n[n["火箭炮"]=11]="火箭炮",n[n["Spas光线弹"]=12]="Spas光线弹",o.ALL_GUN_DATA=[{id:1,atk:2,speed:0,delay:0,rect:50,name:"黄瓜",value:50,icon:"weapon/w1",price:220},{id:2,atk:4,speed:0,delay:0,rect:45,name:"辣椒",value:50,icon:"weapon/w2",price:240},{id:3,atk:6,speed:3,delay:20,rect:370,name:"火影初级",value:7,icon:"weapon/w3",price:440},{id:4,atk:8,speed:5,delay:30,rect:350,name:"火影中级",value:30,icon:"weapon/w4",price:640},{id:5,atk:16,speed:4,delay:20,rect:350,name:"火影高级",value:30,icon:"weapon/w5",price:1200},{id:6,atk:14,speed:4,delay:20,rect:350,name:"光影初极",value:30,icon:"weapon/w6",price:1e3},{id:7,atk:10,speed:3,delay:20,rect:350,name:"光影中级",value:30,icon:"weapon/w7",price:800},{id:8,atk:20,speed:5,delay:20,rect:350,name:"光影高级",value:50,icon:"weapon/w8",price:1500},{id:9,atk:20,speed:3,delay:20,rect:350,name:"火力喷射炮",value:50,icon:"weapon/w9",price:0},{id:10,atk:62,speed:3,delay:20,rect:350,name:"黄金重狙枪",value:10,icon:"weapon/w10",price:0},{id:11,atk:50,speed:3,delay:20,rect:350,name:"火箭炮",value:20,icon:"weapon/w11",price:0},{id:12,atk:38,speed:2,delay:20,rect:350,name:"Spas光线弹",value:30,icon:"weapon/w12",price:0}],o.ALL_GUN_DATA_MAP={};for(var i=0,a=o.ALL_GUN_DATA;i<a.length;i++){var r=a[i];o.ALL_GUN_DATA_MAP[r.id]=r}cc._RF.pop()},{}],Help1:[function(e,t,o){"use strict";cc._RF.push(t,"67cc1X40VJNUYVjmVOEdLrn","Help1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/HelpData"),i=e("../UICommon"),a=e("../Logic/Player"),r=e("../Logic/PlayerBattle"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.helpSprite=null,t.desLabel=null,t.stepGuide=0,t}return __extends(t,e),t.prototype.init=function(e){this.stepGuide=e;var t=n.ALL_HELP_DATA_MAP[e];if(this.desLabel.string=t.des,i.setSpriteFromRawRes(t.icon,this.helpSprite),n.HelpType.help8==this.stepGuide||n.HelpType.help9==this.stepGuide||n.HelpType.help10==this.stepGuide||n.HelpType.help11==this.stepGuide||n.HelpType.help12==this.stepGuide||n.HelpType.help13==this.stepGuide||n.HelpType.help14==this.stepGuide||n.HelpType.help15==this.stepGuide||n.HelpType.help16==this.stepGuide||n.HelpType.help17==this.stepGuide)r.PlayerBattle.Instance.guideEnemyConfig&&this.setIntColor(r.PlayerBattle.Instance.guideEnemyConfig.color);else if(n.HelpType.help18==this.stepGuide){var o=Date.now();a.Player.Instance.set(a.PlayerAttr.金币商店双倍金币时间,o)}},t.prototype.onDestroy=function(){r.PlayerBattle.Instance.checkHelpGuide()},t.prototype.setIntColor=function(e){var t=e>>16&255,o=e>>8&255,n=255&e;this.helpSprite.node.color=new cc.Color(t,o,n,255)},t.prototype.onFormClick=function(){i.onButtonClicked(),this.node.destroy(),a.Player.Instance.completeGuide(this.stepGuide)},__decorate([c(cc.Sprite)],t.prototype,"helpSprite",void 0),__decorate([c(cc.RichText)],t.prototype,"desLabel",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../UICommon":"UICommon"}],HelpData:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"77911ZyzOVC5q7m3bIMBkUy","HelpData"),Object.defineProperty(o,"__esModule",{value:!0}),(i=n=o.HelpType||(o.HelpType={}))[i.help1=1]="help1",i[i.help2=2]="help2",i[i.help3=4]="help3",i[i.help4=8]="help4",i[i.help5=16]="help5",i[i.help6=32]="help6",i[i.help7=64]="help7",i[i.help8=128]="help8",i[i.help9=256]="help9",i[i.help10=512]="help10",i[i.help11=1024]="help11",i[i.help12=2048]="help12",i[i.help13=4096]="help13",i[i.help14=8192]="help14",i[i.help15=16384]="help15",i[i.help16=32768]="help16",i[i.help17=65536]="help17",i[i.help18=131072]="help18",o.ALL_HELP_DATA=[{id:n.help1,des:"",icon:""},{id:n.help2,des:"",icon:""},{id:n.help3,des:"左上方按键点击切换武器\n本关建议使用下方无敌盾",icon:"help/change"},{id:n.help4,des:"",icon:""},{id:n.help5,des:"永久获得武器一把",icon:"weapon/w3"},{id:n.help6,des:"",icon:""},{id:n.help7,des:"你也可以像孙猴子一样有分身哦，赶快体验吧！",icon:"help/s0"},{id:n.help8,des:"过路的路人乙一枚\n不攻击该角色\n不会主动攻击角色",icon:"help/s0"},{id:n.help9,des:"哈达，看我无敌剪刀脚\n主动攻击角色\n贱人主动攻击",icon:"help/s0"},{id:n.help10,des:"我是个有难同当的人\n主动共计角色\n被打召唤小弟",icon:"help/s0"},{id:n.help11,des:"从天而降的路人丙一枚\n主动攻击角色\n能力暂且不详",icon:"help/s0"},{id:n.help12,des:"这年头谁还用棍子，看棒\n主动攻击角色\n自带武器于身",icon:"help/s0"},{id:n.help13,des:"小样，看你往哪里跑\n主动攻击角色\n快速追击技能",icon:"help/s0"},{id:n.help14,des:"小样，大我可不会痛的！\n主动攻击角色\n自带霸体技能",icon:"help/s0"},{id:n.help15,des:"爱挥拳头的喽喽。。。\n主动攻击角色\n见人主动攻击",icon:"help/s0"},{id:n.help16,des:"警告！出现守关Boss\nBoss带有武器在身上",icon:"help/s0"},{id:n.help17,des:"警告！出现守关Boss\n自身被攻击后会招唤小弟",icon:"help/s0"},{id:n.help18,des:"开启双倍金币购买时间！\n体验更多精彩武器内容！",icon:"help/goldshop"}],o.ALL_HELP_DATA_MAP={};for(var a=0,r=o.ALL_HELP_DATA;a<r.length;a++){var l=r[a];o.ALL_HELP_DATA_MAP[l.id]=l}cc._RF.pop()},{}],Help:[function(e,t,o){"use strict";cc._RF.push(t,"d3176nvhS5AWZym5NOUTXz5","Help"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(){},t.prototype.onFormClick=function(){this.node.destroy()},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],LevelData:[function(e,t,o){"use strict";cc._RF.push(t,"5ca25qK2w5BxYNQiynkLuOZ","LevelData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ALL_LVL_DATA=[{lvl:1,passGuanQia:2,haveWeapon:2,haveMoney:2e3},{lvl:2,passGuanQia:4,haveWeapon:4,haveMoney:4e3},{lvl:3,passGuanQia:6,haveWeapon:8,haveMoney:8e3},{lvl:4,passGuanQia:8,haveWeapon:10,haveMoney:16e3},{lvl:5,passGuanQia:10,haveWeapon:12,haveMoney:32e3}],o.ALL_LVL_DATA_MAP={};for(var n=0,i=o.ALL_LVL_DATA;n<i.length;n++){var a=i[n];o.ALL_LVL_DATA_MAP[a.lvl]=a}cc._RF.pop()},{}],LevelUp:[function(e,t,o){"use strict";cc._RF.push(t,"65b50OtoNlEc6vX7JmnJj2m","LevelUp"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=n.property,r=e("../UICommon"),l=e("../Logic/PlayerLvl"),s=e("../Data/LevelData"),c=e("../Logic/Player"),p=e("../Logic/PlayerWeapon"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lvlStar=[],t.condition=[],t.lvl1Star=[],t.lvl2Star=[],t.lvl3Star=[],t.lvl4Star=[],t.lvl5Star=[],t.effectLab=[],t.btnGet=null,t}return __extends(t,e),t.prototype.onLoad=function(){l.PlayerLvl.Instance.addListener(this)},t.prototype.onDestroy=function(){l.PlayerLvl.Instance.removeListener(this)},t.prototype.start=function(){var e=l.PlayerLvl.Instance.getLvl();this.showLvlStars(e),this.updateCondition(e),this.updateEffect(e)},t.prototype.onUpLvlSuccessNotify=function(){var e=l.PlayerLvl.Instance.getLvl();this.showLvlStars(e),this.updateCondition(e),this.updateEffect(e)},t.prototype.updateEffect=function(e){for(var t=[this.lvl1Star,this.lvl2Star,this.lvl3Star,this.lvl4Star,this.lvl5Star],o=function(o){var i=o<e?cc.Color.WHITE:cc.Color.GRAY;n.effectLab[o].color=i,t[o].forEach(function(e){e.color=i})},n=this,i=0;i<5;i++)o(i)},t.prototype.showLvlStars=function(e){for(var t=0;t<5;t++){var o=t<e;this.lvlStar[t].active=t<e,this.lvlStar[t].stopAllActions(),o&&(this.lvlStar[t].setScale(8),this.lvlStar[t].runAction(cc.scaleTo(.3,1)))}},t.prototype.updateCondition=function(e){if(5==e)this.condition.forEach(function(e){e.node.active=!1,e.node.color=cc.Color.WHITE}),this.condition[1].node.active=!0,this.condition[1].string="星级已满",this.btnGet.active=!1;else if(e<5){var t=e+1,o=s.ALL_LVL_DATA_MAP[t];this.condition[0].string="需要通过关卡"+o.passGuanQia,this.condition[0].node.color=c.Player.Instance.get(c.PlayerAttr.关卡等级)>=o.passGuanQia?cc.Color.WHITE:cc.Color.GRAY,this.condition[1].string="拥有武器数量"+o.haveWeapon,this.condition[1].node.color=p.PlayerWeapon.Instance.getGunLocalNum()>=o.haveWeapon?cc.Color.WHITE:cc.Color.GRAY,this.condition[2].string="拥有金币数量"+o.haveMoney,this.condition[2].node.color=c.Player.Instance.get(c.PlayerAttr.金币)>=o.haveMoney?cc.Color.WHITE:cc.Color.GRAY,this.btnGet.active=!0}},t.prototype.onLvlUpClick=function(){r.onButtonClicked(),l.PlayerLvl.Instance.reqUpLvl()},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},__decorate([a(cc.Node)],t.prototype,"lvlStar",void 0),__decorate([a(cc.Label)],t.prototype,"condition",void 0),__decorate([a(cc.Node)],t.prototype,"lvl1Star",void 0),__decorate([a(cc.Node)],t.prototype,"lvl2Star",void 0),__decorate([a(cc.Node)],t.prototype,"lvl3Star",void 0),__decorate([a(cc.Node)],t.prototype,"lvl4Star",void 0),__decorate([a(cc.Node)],t.prototype,"lvl5Star",void 0),__decorate([a(cc.Node)],t.prototype,"effectLab",void 0),__decorate([a(cc.Node)],t.prototype,"btnGet",void 0),t=__decorate([i],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/LevelData":"LevelData","../Logic/Player":"Player","../Logic/PlayerLvl":"PlayerLvl","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"5fc6dfTZdJC6L8p3nZ6IlbG","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=cc._decorator,a=i.ccclass,r=i.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressTime=null,t.time=0,t.leftTime=0,t}return __extends(t,e),t.prototype.start=function(){console.log("Loading start function")},t.prototype.startLoading=function(){this.node.active=!0,0>this.time&&(this.time=1),this.leftTime=0},t.prototype.update=function(e){this.leftTime+=e;var t=n.PlayerBattle.Instance.getLoadingStep();t==n.LoadingStep.Loading_Scene&&this.leftTime>this.time/3?this.leftTime=this.time/3:t==n.LoadingStep.Loading_UI&&this.leftTime>this.time/3*2&&(this.leftTime=this.time/3*2),this.progressTime.progress=this.leftTime/this.time,this.leftTime>this.time&&(this.node.active=!1,n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_StartCountDown))},__decorate([r(cc.ProgressBar)],t.prototype,"progressTime",void 0),__decorate([r],t.prototype,"time",void 0),t=__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}],LocalData:[function(e,t,o){"use strict";cc._RF.push(t,"8d83anZJLhCXal2uuK1P2ho","LocalData"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Player"),i=e("./PlayerAchieve"),a=e("./PlayerLvl"),r=e("./PlayerWeapon"),l=function(){function e(){this.bInit=!1,this.bRead=!1,this.init()}return e.prototype.init=function(){if(!this.bInit){console.log("LocalData.init()"),this.bInit=!0;var e=this;cc.game.on(cc.game.EVENT_HIDE,function(){e.save()})}},e.prototype.read=function(){this.bRead||(this.bRead=!0,n.Player.Instance.read(),i.PlayerAchieve.Instance.read(),a.PlayerLvl.Instance.read(),r.PlayerWeapon.Instance.read(),console.log("LocalData.read()"))},e.prototype.save=function(){n.Player.Instance.save(),i.PlayerAchieve.Instance.save(),a.PlayerLvl.Instance.save(),r.PlayerWeapon.Instance.save(),console.log("LocalData.save()")},e.Instance=new e,e}();o.LocalData=l,cc._RF.pop()},{"./Player":"Player","./PlayerAchieve":"PlayerAchieve","./PlayerLvl":"PlayerLvl","./PlayerWeapon":"PlayerWeapon"}],Map:[function(e,t,o){"use strict";cc._RF.push(t,"deaefGaAaBF1K7lWJMLWw7k","Map"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleEnemy"),i=e("./RoleHero"),a=e("./RoleBase"),r=e("./ControlHeroByKeyboard"),l=e("./SkillData"),s=e("./AudioMgr"),c=e("./Logic/PlayerBattle"),p=e("./Logic/Player"),u=e("./EquipData"),h=e("./UI/Game"),d=e("./SpriteAnim"),y=cc._decorator,g=y.ccclass,f=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skyMoveFactor=.5,t.hitParticle=null,t.gunfireParticle=null,t.wudiParticle=null,t.gameNode=null,t.gameComponent=null,t.GROUND_HEIGHT=120,t}return __extends(t,e),t.prototype.onLoad=function(){this.gameComponent=this.gameNode.getComponent(h.default),c.PlayerBattle.Instance.setMap(this)},t.prototype.start=function(){this.isGameOver=!1,this.killEnemies=0;var e=new cc.Node;this.bgSprite1=e.addComponent(cc.Sprite),this.node.addChild(e);var t=new cc.Node;this.bgSprite2=t.addComponent(cc.Sprite),this.node.addChild(t);var o=new cc.Node;this.bgTiledMap=o.addComponent(cc.TiledMap),this.node.addChild(o),this.initPositionOfSprite1=null,this.initPositionOfTiled=null,this.initPositionOfRoles=null,this.scaleOfSprite=1,this.scaledSpriteWidth=0,this.scaleOfTiled=1,this.mapConfig=null,this.enemiesConfig=null,this.rolesNode=new cc.Node,this.node.addChild(this.rolesNode),this.roleEnemies=null,this.roleHero=null,this.scrollOffset=0;this.loadMap(c.PlayerBattle.Instance.getAttackGuanQia(),function(){c.PlayerBattle.Instance.loadingComplete(c.LoadingStep.Loading_UI)})},t.prototype.loadMap=function(e,t){var o=this;l.loadSkillData(),u.loadEquipData(),cc.loader.loadRes("map/map"+e,cc.TiledMapAsset,function(e,n){if(e)console.log(e);else{o.mapConfig=null,o.enemiesConfig=[],o.bgTiledMap.tmxAsset=n;for(var i=0,a=o.bgTiledMap.getObjectGroups();i<a.length;i++)for(var r=0,l=a[i].getObjects();r<l.length;r++){var s=l[r],c=s.getProperties();"map"==s.getObjectName()?o.mapConfig={bgid:Number(c.bgid),enemysum:Number(c.enemysum),isend:Number(c.isend)}:o.enemiesConfig.push({name:s.getObjectName(),x:c.x,y:c.y,width:c.width,height:c.height,act:Number(c.act),color:Number(c.color),delayTime:Number(c.delaytime),equipId:Number(c.equipid),hp:Number(c.hp),t0:Number(c.t0),t1:Number(c.t1),t2:Number(c.t2),t3:Number(c.t3),enemytype:Number(c.enemytype)})}var p=o.bgTiledMap.node.getChildByName("objects");p&&(p.active=!1);var u=o.bgTiledMap.node,h=o.bgTiledMap.node.getContentSize(),d=cc.director.getVisibleSize(),y=d.height/h.height;u.setScale(y),(c=u.getAnchorPoint()).x=1-c.x,c.y=1-c.y,c.mulSelf(y),c.x*=h.width,c.y*=h.height,c.addSelf(cc.director.getVisibleOrigin()),c.x-=.5*d.width,c.y-=.5*d.height,u.setPosition(c),o.initPositionOfTiled=c,o.scaleOfTiled=y,o.rolesNode.removeAllChildren(),o.rolesNode.setScale(y),o.rolesNode.setPosition(-.5*d.width,-.5*d.height),o.initPositionOfRoles=new cc.Vec2(-.5*d.width,-.5*d.height),o._initHero();var g=function(e){var n;e?(o.bgSprite1.spriteFrame=e,o.bgSprite2.spriteFrame=e,n=e.getOriginalSize()):n=new cc.Size(0,0);var i=o.bgSprite1.node,a=o.bgSprite2.node,r=cc.director.getVisibleSize(),l=16*r.height/9/n.width;o.bgSprite1.node.setScale(l),o.bgSprite2.node.setScale(l);var s=i.getAnchorPoint();s.x=1-s.x,s.y=1-s.y,s.mulSelf(l),s.x*=n.width,s.y*=n.height,s.addSelf(cc.director.getVisibleOrigin()),s.x-=.5*r.width,s.y-=.5*r.height,s.y+=r.height-n.height*l,i.setPosition(s),o.initPositionOfSprite1=s,o.scaleOfSprite=l,o.scaledSpriteWidth=n.width*o.scaleOfSprite,a.setPosition(s.x+n.width*l,s.y),t&&t()};0!=o.mapConfig.bgid?cc.loader.loadRes("map/BG"+o.mapConfig.bgid,cc.SpriteFrame,function(e,t){e?(console.log(e),g(null)):g(t)}):g(null)}})},t.prototype._initHero=function(){this.bgTiledMap.node.getContentSize().height;this.roleEnemies=[];var e=new cc.Node,t=e.addComponent(i.default);this.rolesNode.addChild(e),this.roleHero=t,t.ownerMap=this,t.initWithConfig();var o=this.getComponent(r.default);o&&(o.targetInput=t.stateMachine),this.bulletsOfEnemy=[],this.bulletsOfHero=[]},t.prototype.initEnemies=function(){this.roleEnemies=[];for(var e=0,t=this.enemiesConfig;e<t.length;e++){var o=t[e];this.addEnemy(o)}},t.prototype.setScroll=function(e){var t=cc.director.getVisibleSize().width,o=cc.clampf(e*this.scaleOfTiled-.5*t,0,this.bgTiledMap.node.getContentSize().width*this.scaleOfTiled-t),n=this.initPositionOfTiled.x-o;if(this.bgTiledMap.node.setPositionX(n),this.rolesNode.setPositionX(this.initPositionOfRoles.x-o),this.scrollOffset=o,this.bgSprite1.spriteFrame){for(var i=o*this.skyMoveFactor,a=this.scaledSpriteWidth,r=cc.director.getVisibleOrigin().x,l=this.initPositionOfSprite1.x-i;l+a<r;)l+=a;this.bgSprite1.node.setPositionX(l),this.bgSprite2.node.setPositionX(l+a)}},t.prototype._checkHit=function(){for(var e=this,t=a.default.RoleBoxIntersection,o=function(e,o){if(t(e.boxAttacking,o.boxBeAttacked))return e.boxAttacking;for(var n=0,i=e.fenshenList;n<i.length;n++){var a=i[n];if(t(a.boxAttacking,o.boxBeAttacked))return a.boxAttacking}return null},n=function(t,n){if(n.isWuDi)return!1;var i=n.hitters.indexOf(t);if(i<0){var a=void 0;if(n.stateMachine.getCurrentStateId()!=l.SMState.LYING&&null!=(a=o(t,n))){n.hitters.push(t),n.onHitByOther(t);var r=cc.instantiate(e.hitParticle);return e.rolesNode.addChild(r),r.setPosition(a.x,a.y),s.myAudioMgr.playSFX("w0-0.ogg"),!0}}else o(t,n)||n.hitters.splice(i,1);return!1},i=0,r=this.roleEnemies;i<r.length;i++){var c=r[i];n(this.roleHero,c)||n(c,this.roleHero)}},t.prototype.getGrabTarget=function(e,t,o){var n=this,i=e.node.getPositionX(),a=e.isFaceRight,r=function(e){if(e.lifePoint<=0||e.isWuDi)return!1;var r=e.stateMachine.getCurrentStateId();if(r==l.SMState.IDLE||r==l.SMState.BLOCKED){if(e.node.getPositionY()>n.GROUND_HEIGHT)return!1;if(r==l.SMState.BLOCKED&&e.stateMachine.getVariable(l.SMVariable.HitBySkillID)==o)return!1;var s=e.node.getPositionX();return a?s>=i&&s<=i+t:s<=i&&s>=i-t}return!1};if(e==this.roleHero)for(var s=0,c=this.roleEnemies;s<c.length;s++){var p=c[s];if(r(p))return p}else if(r(this.roleHero))return this.roleHero;return null},t.prototype.updateHeroHp=function(){var e=this.roleHero.maxLifePoint,t=this.roleHero.lifePoint/e;this.gameComponent.bloodProgressBar.progress=t,t<1/3&&this.gameComponent.showHelpBtn()},t.prototype.updateHeroFuhuoState=function(){if(p.Player.Instance.isFuHuo&&(this.roleHero.lifePoint=p.Player.Instance.getHp(),this.roleHero.stateMachine.setState(l.SMState.IDLE),this.isGameOver=!1,p.Player.Instance.isWuDi=!0,p.Player.Instance.isFuHuo=!1),p.Player.Instance.isWuDi){this.roleHero.isWuDi=!0,p.Player.Instance.isWuDi=!1,this.wudiBeginTime=Date.now(),this.roleHero.node.setScale(1.2*(this.roleHero.isFaceRight?1:-1),1.2);var e=cc.instantiate(this.wudiParticle);this.rolesNode.addChild(e),e.setPosition(this.roleHero.node.x,2*this.roleHero.node.y-20)}if(this.roleHero&&this.roleHero.isWuDi){var t=1e5-(Date.now()-this.wudiBeginTime);t<=0?(this.roleHero.isWuDi=!1,this.gameComponent.setWudiTime(0),this.roleHero.node.setScale(1*(this.roleHero.isFaceRight?1:-1),1)):this.gameComponent.setWudiTime(t)}},t.prototype.update=function(e){if(!c.PlayerBattle.Instance.isPause()&&(this.updateHeroFuhuoState(),c.BattleStatus.BattleStatus_Begin==c.PlayerBattle.Instance.getStatus())){if(this.roleHero&&(this.roleHero.myUpdate(e),this.setScroll(this.roleHero.node.getPositionX())),this.roleEnemies){for(var t=0,o=this.roleEnemies;t<o.length;t++){o[t].myUpdate(e)}this._checkHit(),this.updateHeroHp()}this.bulletsOfHero&&this.updateBullets(e,this.bulletsOfHero,this.roleEnemies),this.bulletsOfEnemy&&this.updateBullets(e,this.bulletsOfEnemy,[this.roleHero])}},t.prototype.updateBullets=function(e,t,o){for(var n=t.length-1;n>=0;--n){var i=t[n];if(i.myUpdate(e),i.lifeTime<=0)if(i.node.removeFromParent(),t.splice(n,1),9==i.equipData.equipid||10==i.equipData.equipid)for(var r=0,l=o;r<l.length;r++){var c=l[r],p=c.hitterBullets.indexOf(i);p>=0&&c.hitterBullets.splice(p,1)}}var u=a.default.RoleBoxIntersection,h={valid:!0,x:0,y:0,width:0,height:0},y=function(e){var n=t[e],i=n.node.getContentSize();h.width=i.width,h.height=i.height,h.x=n.node.getPositionX(),h.y=n.node.getPositionY(),n.speed<0&&(h.x-=h.width);for(var a=!1,r=9==n.equipData.equipid||10==n.equipData.equipid,l=9==n.equipData.equipid||11==n.equipData.equipid,c=!1,p=0,y=o;p<y.length;p++){var f=y[p];if(!f.isWuDi&&u(h,f.boxBeAttacked)&&f.hitterBullets.indexOf(n)<0){if(f.onHitByBullet(n),r&&f.hitterBullets.push(n),a=!0,!l)break;if(!c){c=!0;if(h.x-=2*h.width*.5,h.y-=2*h.height*.5,h.width+=2*h.width,h.height+=2*h.height,11==n.equipData.equipid){var m=new cc.Node;m.setPosition(n.node.getPosition()),g.rolesNode.addChild(m),m.addComponent(cc.Sprite).sizeMode=cc.Sprite.SizeMode.TRIMMED,m.addComponent(d.default).init(["gunb-2-1","gunb-2-2","gunb-2-3","gunb-2-4"].map(function(e){return n.ownerRole.dragonBonesConfig.bulletAtlas.getSpriteFrame(e)}),30,!0),s.myAudioMgr.playSFX("beq-11.ogg")}}}}!r&&a&&(n.node.removeFromParent(),t.splice(e,1))},g=this;for(n=t.length-1;n>=0;--n)y(n)},t.prototype.afterRoleDie=function(e){if(e===this.roleHero)this.isGameOver||(c.PlayerBattle.Instance.changeStatus(c.BattleStatus.BattleStatus_Failed),this.isGameOver=!0);else{var t=this.roleEnemies.indexOf(e);t>=0&&(this.roleEnemies.splice(t,1),e.node.removeFromParent(),p.Player.Instance.increase(p.PlayerAttr.杀敌数量,1)),this.killEnemies=this.killEnemies+1,0==this.roleEnemies.length&&(this.isGameOver=!0,c.PlayerBattle.Instance.BattleResultWin(this.killEnemies))}},t.prototype.addEnemy=function(e){var t=new cc.Node,o=t.addComponent(n.default);this.rolesNode.addChild(t),this.roleEnemies.push(o),o.ownerMap=this,o.initWithConfig(e)},t.prototype.summonEnemy=function(e){var t=this.enemiesConfig[Math.floor(Math.random()*this.enemiesConfig.length)],o={name:"summon",x:e.node.getPositionX()+300*(Math.random()-.5),y:0,width:0,height:0,act:t.act,color:t.color,delayTime:t.delayTime,equipId:0,hp:t.hp,t0:3,t1:8,t2:3,t3:8,enemytype:1};this.addEnemy(o)},__decorate([f],t.prototype,"skyMoveFactor",void 0),__decorate([f(cc.Prefab)],t.prototype,"hitParticle",void 0),__decorate([f(cc.Prefab)],t.prototype,"gunfireParticle",void 0),__decorate([f(cc.Prefab)],t.prototype,"wudiParticle",void 0),__decorate([f(cc.Node)],t.prototype,"gameNode",void 0),t=__decorate([g],t)}(cc.Component);o.default=m,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./ControlHeroByKeyboard":"ControlHeroByKeyboard","./EquipData":"EquipData","./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./RoleBase":"RoleBase","./RoleEnemy":"RoleEnemy","./RoleHero":"RoleHero","./SkillData":"SkillData","./SpriteAnim":"SpriteAnim","./UI/Game":"Game"}],Music:[function(e,t,o){"use strict";cc._RF.push(t,"fae49VAZOVI3JoJzUtodZ8y","Music"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../AudioMgr"),a=cc._decorator,r=a.ccclass,l=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bgOnBtn=null,t.bgOffBtn=null,t.effectOnBtn=null,t.effectOffBtn=null,t}return __extends(t,e),t.prototype.onLoad=function(){i.myAudioMgr.getSFXVolume()>0?(this.bgOnBtn.node.active=!0,this.bgOffBtn.node.active=!1):(this.bgOnBtn.node.active=!1,this.bgOffBtn.node.active=!0),i.myAudioMgr.getBGMVolume()>0?(this.effectOnBtn.node.active=!0,this.effectOffBtn.node.active=!1):(this.effectOnBtn.node.active=!1,this.effectOffBtn.node.active=!0)},t.prototype.onConformClick=function(){n.onButtonClicked(),this.node.destroy()},t.prototype.onBgOnClick=function(){n.onButtonClicked(),i.myAudioMgr.setBGMVolume(0),this.bgOnBtn.node.active=!1,this.bgOffBtn.node.active=!0},t.prototype.onBgOffClick=function(){n.onButtonClicked(),i.myAudioMgr.setBGMVolume(1),this.bgOnBtn.node.active=!0,this.bgOffBtn.node.active=!1},t.prototype.onEffectOnClick=function(){n.onButtonClicked(),i.myAudioMgr.setSFXVolume(0),this.effectOnBtn.node.active=!1,this.effectOffBtn.node.active=!0},t.prototype.onEffectOffClick=function(){n.onButtonClicked(),i.myAudioMgr.setSFXVolume(1),this.effectOnBtn.node.active=!0,this.effectOffBtn.node.active=!1},__decorate([l(cc.Button)],t.prototype,"bgOnBtn",void 0),__decorate([l(cc.Button)],t.prototype,"bgOffBtn",void 0),__decorate([l(cc.Button)],t.prototype,"effectOnBtn",void 0),__decorate([l(cc.Button)],t.prototype,"effectOffBtn",void 0),t=__decorate([r],t)}(cc.Component);o.default=s,cc._RF.pop()},{"../AudioMgr":"AudioMgr","../UICommon":"UICommon"}],Pause:[function(e,t,o){"use strict";cc._RF.push(t,"c5c211VUmlGopSMThJnK/V4","Pause"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money11Label=null,t.money22Label=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initOnlyMoney(n.ShopItemType.金币22500,this.money11Label),this.initOnlyMoney(n.ShopItemType.金币12500,this.money22Label)},t.prototype.start=function(){},t.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},t.prototype.onFormClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy()},t.prototype.onBtn1Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.金币22500)},t.prototype.onBtn2Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.金币12500)},t.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},t.prototype.onExitGameClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy(),a.switchToScene("Begin")},__decorate([s(cc.Label)],t.prototype,"money11Label",void 0),__decorate([s(cc.Label)],t.prototype,"money22Label",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],PlayerAchieve:[function(e,t,o){"use strict";cc._RF.push(t,"beef1GeSSFOS5UgPtYLkFA0","PlayerAchieve"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Player"),i=e("../Data/AchieveData"),a=e("../UI/Achievement1"),r=function(){function e(){this._arrlvl={}}return e.prototype.getAchievementLvl=function(e){var t=n.PlayerAttr.成功过关次数,o=-1;if(e==i.AchieveType.过关达人)t=n.PlayerAttr.成功过关次数;else if(e==i.AchieveType.地狱达人)t=n.PlayerAttr.主角死亡次数;else if(e==i.AchieveType.重生达人)t=n.PlayerAttr.主角复活次数;else if(e==i.AchieveType.杀手)t=n.PlayerAttr.杀敌数量;else if(e==i.AchieveType.抓金手)t=n.PlayerAttr.获得金币总数;else if(e==i.AchieveType.武器达人)t=n.PlayerAttr.武器耐久总消耗数;else if(e==i.AchieveType.过肩摔)t=n.PlayerAttr.过肩摔完成次数;else{if(e!=i.AchieveType.格斗达人)return o;t=n.PlayerAttr.绝招使用次数}return this.checkComplete(t),null==(o=this._arrlvl[e])&&(o=-1),o},e.prototype.isAchievementMaxLvl=function(e){return this.getAchievementLvl(e)>=4},e.prototype.checkComplete=function(e){var t=i.AchieveType.过关达人;if(e==n.PlayerAttr.成功过关次数)t=i.AchieveType.过关达人;else if(e==n.PlayerAttr.主角死亡次数)t=i.AchieveType.地狱达人;else if(e==n.PlayerAttr.主角复活次数)t=i.AchieveType.重生达人;else if(e==n.PlayerAttr.杀敌数量)t=i.AchieveType.杀手;else if(e==n.PlayerAttr.获得金币总数)t=i.AchieveType.抓金手;else if(e==n.PlayerAttr.武器耐久总消耗数)t=i.AchieveType.武器达人;else if(e==n.PlayerAttr.过肩摔完成次数)t=i.AchieveType.过肩摔;else{if(e!=n.PlayerAttr.绝招使用次数)return;t=i.AchieveType.格斗达人}var o=n.Player.Instance.get(e),a=i.ALL_ACHIEVE_DATA_MAP[t],r=this._arrlvl[t];null==r&&(r=-1);for(var l=r,s=0,c=0;c<a.target.length;c++)o>=a.target[c]&&l<c&&(l=c,this._arrlvl[t]=l,console.log("获得成就"+i.AchieveType[t]+"等级"+l),s+=a.award[c]);l!=r&&this.showCompleteAchieveTip(t,l),0!=s&&n.Player.Instance.increase(n.PlayerAttr.金币,s)},e.prototype.showCompleteAchieveTip=function(e,t){0>t||4<t?console.log("error: showCompleteAchieveTip等级"+t):cc.loader.loadRes("prefab/achievement_1",function(o,n){if(o)console.log(o);else{var i=cc.director.getScene();if(null!=i){var r=i.getChildByName("Canvas");if(null!=r){var l=cc.instantiate(n);r.addChild(l,1),l.getComponent(a.default).show(e,t)}}}})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("ACHIEVE");for(var t in e&&(this._arrlvl=JSON.parse(e)),this._arrlvl)this._arrlvl.hasOwnProperty(t)&&console.log("成就"+i.AchieveType[t]+"等级"+this._arrlvl[t])},e.prototype.save=function(){var e=JSON.stringify(this._arrlvl);cc.sys.localStorage.setItem("ACHIEVE",e)},e.Instance=new e,e}();o.PlayerAchieve=r,cc._RF.pop()},{"../Data/AchieveData":"AchieveData","../UI/Achievement1":"Achievement1","./Player":"Player"}],PlayerBattle:[function(e,t,o){"use strict";cc._RF.push(t,"60b8dKeFx1FGbSEQthBTI5S","PlayerBattle"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a,r,l,s,c=e("../UICommon"),p=e("./Player"),u=e("../Data/GunData"),h=e("./PlayerWeapon"),d=e("../UI/Loading"),y=e("../Data/HelpData"),g=e("../UI/Help1"),f=e("./PlayerLvl"),m=e("./PlayerShop");o.MaxGuanQia=30,(i=n=o.BattleStatus||(o.BattleStatus={}))[i.BattleStatus_None=0]="BattleStatus_None",i[i.BattleStatus_Load=1]="BattleStatus_Load",i[i.BattleStatus_StartCountDown=2]="BattleStatus_StartCountDown",i[i.BattleStatus_Begin=3]="BattleStatus_Begin",i[i.BattleStatus_Win=4]="BattleStatus_Win",i[i.BattleStatus_Failed=5]="BattleStatus_Failed",i[i.BattleStatus_NextBattle=6]="BattleStatus_NextBattle",(r=a=o.BattleEvent||(o.BattleEvent={}))[r.BattleEvent_ChangeWeapon=0]="BattleEvent_ChangeWeapon",r[r.BattleEvent_UseBullet=1]="BattleEvent_UseBullet",r[r.BattleEvent_Bleed=2]="BattleEvent_Bleed",r[r.BattleEvent_HitEnemy=3]="BattleEvent_HitEnemy",(s=l=o.LoadingStep||(o.LoadingStep={}))[s.LoadingStep_Begin=0]="LoadingStep_Begin",s[s.Loading_Scene=1]="Loading_Scene",s[s.Loading_UI=2]="Loading_UI",s[s.LoadingStep_End=3]="LoadingStep_End";var _=function(){function e(){this.status=n.BattleStatus_None,this.gameUI=null,this.hero=null,this.map=null,this.killEnemies=0,this.getGlod=0,this.equipID=0,this.loadingNode=null,this.loadingStep=l.LoadingStep_Begin,this.arrPauseUI=[],this.guideEnemyConfig=null,this.cleanData()}return e.prototype.setStatus=function(e){this.status=e},e.prototype.changeStatus=function(e){if(this.status!=e)switch(this.status=e,e){case n.BattleStatus_Load:this.onEnterStatusLoad();break;case n.BattleStatus_StartCountDown:this.onEnterStatusStartCountDown();break;case n.BattleStatus_Begin:this.onEnterStatusBegin();break;case n.BattleStatus_Win:this.onEnterStatusWin();break;case n.BattleStatus_Failed:this.onEnterStatusFailed();break;case n.BattleStatus_NextBattle:this.onEnterStatusNextBattle()}},e.prototype.setHero=function(e){this.hero=e},e.prototype.setMap=function(e){this.map=e},e.prototype.setGameUI=function(e){this.gameUI=e},e.prototype.getEquipID=function(){return this.equipID},e.prototype.getStatus=function(){return this.status},e.prototype.setPause=function(e){null==this.arrPauseUI&&(this.arrPauseUI=[]),-1==this.arrPauseUI.indexOf(e)&&this.arrPauseUI.push(e)},e.prototype.removePause=function(e){null==this.arrPauseUI&&(this.arrPauseUI=[]);var t=this.arrPauseUI.indexOf(e);-1!=t&&this.arrPauseUI.splice(t,1)},e.prototype.isPause=function(){return this.arrPauseUI&&0!=this.arrPauseUI.length},e.prototype.getLoadingStep=function(){return this.loadingStep},e.prototype.loadingComplete=function(e){e==l.Loading_Scene?this.loadingStep=l.Loading_UI:e==l.Loading_UI&&(this.loadingStep=l.LoadingStep_End)},e.prototype.getAttackGuanQia=function(){var e=p.Player.Instance.get(p.PlayerAttr.关卡等级);return Math.min(e+1,o.MaxGuanQia)},e.prototype.changeWeapon=function(){var e=h.PlayerWeapon.Instance.getOwnUsableGuns();e.sort(function(e,t){return e.id-t.id});for(var t=0,o=0;o<e.length;o++){var n=e[o];if(this.equipID<n.id){t=n.id;break}}this.equipID=t,console.log("changeWeapon"+this.equipID),this.hero&&(this.hero.equipid=this.equipID),this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_ChangeWeapon)},e.prototype.UseBullet=function(e){h.PlayerWeapon.Instance.UseBullet(this.equipID,e),this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_UseBullet)},e.prototype.Bleed=function(e){this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_Bleed)},e.prototype.HitEnemy=function(e){this.gameUI&&this.gameUI.onBattleEventNotify(a.BattleEvent_HitEnemy)},e.prototype.BattleResultWin=function(t){this.killEnemies=t;var o=p.Player.Instance.get(p.PlayerAttr.关卡等级);this.getGlod=this.killEnemies*(o+10),p.Player.Instance.increase(p.PlayerAttr.获得金币总数,this.getGlod),e.Instance.changeStatus(n.BattleStatus_Win)},e.prototype.getBattleWinResult=function(){return{killNum:this.killEnemies,getGold:this.getGlod}},e.prototype.enemyActive=function(e){var t=0;this.guideEnemyConfig=e;var o=e.enemytype;2==o?t=y.HelpType.help8:6==o?t=y.HelpType.help9:14==o?t=y.HelpType.help10:15==o?t=y.HelpType.help11:10==o?t=y.HelpType.help12:12==o?t=y.HelpType.help13:9==o?t=y.HelpType.help14:5==o||(32==o?t=y.HelpType.help16:30==o&&(t=y.HelpType.help17)),0!=t&&this.checkHelpSubGuide(t)},e.prototype.checkHelpGuide=function(){if(null!=cc.director.getScene()&&"Test"==cc.director.getScene().name){var e=p.Player.Instance.get(p.PlayerAttr.新手引导),t=[];t.push(y.HelpType.help3),t.push(y.HelpType.help15);for(var o=0;o<t.length;o++){var n=t[o];if(0==(e&n)){this.checkHelpSubGuide(n);break}}}},e.prototype.checkHelpSubGuide=function(e){if(!p.Player.Instance.isGuideComplete(e)){if(h.PlayerWeapon.Instance.isHaveGun(u.GunType.火箭炮)){if(y.HelpType.help2==e||y.HelpType.help4==e)return void p.Player.Instance.completeGuide(e)}else if(h.PlayerWeapon.Instance.isHaveGun(u.GunType.火影初级)){if(y.HelpType.help5==e)return void p.Player.Instance.completeGuide(e)}else if(f.PlayerLvl.Instance.isHaveThreeBody()&&y.HelpType.help7==e)return void p.Player.Instance.completeGuide(e);switch(e){case y.HelpType.help1:break;case y.HelpType.help2:cc.loader.loadRes("prefab/present_1",function(e,t){if(e)console.log(e);else{var o=cc.instantiate(t);cc.director.getScene().addChild(o)}});break;case y.HelpType.help3:case y.HelpType.help5:case y.HelpType.help8:case y.HelpType.help9:case y.HelpType.help10:case y.HelpType.help11:case y.HelpType.help12:case y.HelpType.help13:case y.HelpType.help14:case y.HelpType.help15:case y.HelpType.help16:case y.HelpType.help17:cc.loader.loadRes("prefab/help_1",function(t,o){if(t)console.log(t);else{var n=cc.instantiate(o);cc.director.getScene().addChild(n),n.getComponent(g.default).init(e)}});break;case y.HelpType.help4:cc.loader.loadRes("prefab/gun_buy",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t),10)});break;case y.HelpType.help6:break;case y.HelpType.help7:this.hero.setFenShen(!0),cc.loader.loadRes("prefab/fenshen",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))});break;case y.HelpType.help18:cc.loader.loadRes("prefab/help_1",function(t,o){if(t)console.log(t);else{var n=cc.instantiate(o);cc.director.getScene().addChild(n,1),n.getComponent(g.default).init(e)}})}}},e.prototype.cleanData=function(){this.killEnemies=0,this.getGlod=0,this.equipID=0,this.gameUI=null,this.hero=null,this.map=null,this.arrPauseUI=[],this.loadingStep=l.LoadingStep_Begin},e.prototype.onEnterStatusLoad=function(){this.cleanData(),this.loadingStep=l.Loading_Scene;var e=this;null==this.loadingNode?cc.loader.loadRes("prefab/loading",function(t,o){t?console.log(t):(e.loadingNode=cc.instantiate(o),cc.director.getScene().addChild(e.loadingNode),cc.game.addPersistRootNode(e.loadingNode),e.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){e.loadingComplete(l.Loading_Scene)}))}):(e.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){e.loadingComplete(l.Loading_Scene)}))},e.prototype.onEnterStatusStartCountDown=function(){cc.loader.loadRes("prefab/game_begin",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},e.prototype.onEnterStatusBegin=function(){var e=this.getAttackGuanQia();1==e?(this.checkHelpSubGuide(y.HelpType.help2),h.PlayerWeapon.Instance.isHaveGun(u.GunType.火箭炮)&&this.checkHelpGuide()):2==e?p.Player.Instance.isGuideComplete(y.HelpType.help5)||(h.PlayerWeapon.Instance.addOwnGun(u.GunType.火影初级),this.checkHelpSubGuide(y.HelpType.help5)):3==e?this.checkHelpSubGuide(y.HelpType.help7):this.checkHelpGuide(),this.map&&this.map.initEnemies(),3<=e&&1==e%2&&p.Player.Instance.isGuideComplete(y.HelpType.help7)&&m.PlayerShop.Instance.showGiftPresent()},e.prototype.onEnterStatusWin=function(){(cc.loader.loadRes("prefab/win",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))}),1==this.getAttackGuanQia())&&(0!=h.PlayerWeapon.Instance.getGuideGunID()&&e.Instance.checkHelpSubGuide(y.HelpType.help4),0==p.Player.Instance.get(p.PlayerAttr.金币商店双倍金币时间)&&e.Instance.checkHelpSubGuide(y.HelpType.help18));p.Player.Instance.increase(p.PlayerAttr.成功过关次数),this.getAttackGuanQia()>=p.Player.Instance.get(p.PlayerAttr.关卡等级)&&p.Player.Instance.increase(p.PlayerAttr.关卡等级)},e.prototype.onEnterStatusFailed=function(){cc.loader.loadRes("prefab/revive",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))}),p.Player.Instance.increase(p.PlayerAttr.主角死亡次数)},e.prototype.onEnterStatusNextBattle=function(){this.cleanData();var e=this;e.loadingNode.getComponent(d.default).startLoading(),c.switchToScene("Test",function(){e.loadingComplete(l.Loading_Scene)})},e.Instance=new e,e}();o.PlayerBattle=_,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/HelpData":"HelpData","../UI/Help1":"Help1","../UI/Loading":"Loading","../UICommon":"UICommon","./Player":"Player","./PlayerLvl":"PlayerLvl","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],PlayerLvl:[function(e,t,o){"use strict";cc._RF.push(t,"edf559qu/dDaavHOueMixFz","PlayerLvl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/LevelData"),i=e("./Player"),a=e("./PlayerWeapon"),r=e("./PlayerShop"),l=e("../Data/ShopData"),s=0;o.PlayerMaxLvl=5;var c=function(){function e(){this.lvl=s,this._eventListener=null}return e.prototype.getLvl=function(){return this.lvl},e.prototype.reqUpLvl=function(){if(!(this.lvl>=o.PlayerMaxLvl)){var e=n.ALL_LVL_DATA_MAP[this.lvl+1];i.Player.Instance.get(i.PlayerAttr.关卡等级)>=e.passGuanQia&&a.PlayerWeapon.Instance.getGunLocalNum()>=e.haveWeapon&&i.Player.Instance.get(i.PlayerAttr.金币)>=e.haveMoney?this.upLvl():r.PlayerShop.Instance.buyByRMB(l.ShopItemType.直接过关,null)}},e.prototype.upLvl=function(){++this.lvl,this.lvl=Math.min(this.lvl,o.PlayerMaxLvl),this.eventNotify()},e.prototype.getLifeAdd=function(){return 1<=this.lvl?50:0},e.prototype.getAtkAdd=function(){return 2<=this.lvl?50:0},e.prototype.getReduceDamage=function(){return 3<=this.lvl?50:0},e.prototype.isHaveThreeBody=function(){return 4<=this.lvl},e.prototype.isNoneKnockDown=function(){return 5<=this.lvl},e.prototype.showLvlUpUI=function(){cc.loader.loadRes("prefab/level_up",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},e.prototype.addListener=function(e){null==this._eventListener&&(this._eventListener=[]),-1==this._eventListener.indexOf(e)&&this._eventListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._eventListener){var t=this._eventListener.indexOf(e);-1!=t&&this._eventListener.splice(t,1)}},e.prototype.eventNotify=function(){null!=this._eventListener&&this._eventListener.forEach(function(e){e.onUpLvlSuccessNotify()})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("LVL");e&&(this.lvl=parseInt(e)),console.log("角色等级="+this.lvl)},e.prototype.save=function(){cc.sys.localStorage.setItem("LVL",this.lvl.toString())},e.Instance=new e,e}();o.PlayerLvl=c,cc._RF.pop()},{"../Data/LevelData":"LevelData","../Data/ShopData":"ShopData","./Player":"Player","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],PlayerShop:[function(e,t,o){"use strict";cc._RF.push(t,"07eb8meZqxHuK/4DujVoLcO","PlayerShop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Data/GunData"),a=e("./Player"),r=e("./PlayerWeapon"),l=e("./PlayerLvl"),s=e("./LocalData"),c=e("../Logic/PlayerBattle"),p=function(){function e(){this.showNode=null,this._eventListener=null}return e.prototype.buyByRMB=function(e,t){this.showNode=t,this.buySuccessCallBack(e)},e.prototype.buySuccessCallBack=function(e){switch(this.showNode&&(this.showNode.destroy(),this.showNode=null),e){case n.ShopItemType.火箭炮:r.PlayerWeapon.Instance.addOwnGun(i.GunType.火箭炮);break;case n.ShopItemType.黄金重狙枪:r.PlayerWeapon.Instance.addOwnGun(i.GunType.黄金重狙枪);break;case n.ShopItemType.火力喷射炮:r.PlayerWeapon.Instance.addOwnGun(i.GunType.火力喷射炮);break;case n.ShopItemType.超级大礼包:r.PlayerWeapon.Instance.addOwnGun(i.GunType.Spas光线弹),a.Player.Instance.increase(a.PlayerAttr.金币,12500);break;case n.ShopItemType.角色复活:a.Player.Instance.isFuHuo=!0,c.PlayerBattle.Instance.setStatus(c.BattleStatus.BattleStatus_Begin),a.Player.Instance.increase(a.PlayerAttr.主角复活次数);break;case n.ShopItemType.无敌盾:a.Player.Instance.isWuDi=!0;break;case n.ShopItemType.金币8000:a.Player.Instance.getShopTime()>0?a.Player.Instance.increase(a.PlayerAttr.金币,16e3):a.Player.Instance.increase(a.PlayerAttr.金币,8e3);break;case n.ShopItemType.金币12500:a.Player.Instance.getShopTime()>0?a.Player.Instance.increase(a.PlayerAttr.金币,12500):a.Player.Instance.increase(a.PlayerAttr.金币,25e3);break;case n.ShopItemType.全攻击加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.全攻击加成);break;case n.ShopItemType.耐久加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.耐久加成);break;case n.ShopItemType.生命加成:r.PlayerWeapon.Instance.addBuffer(r.BuffType.生命加成);break;case n.ShopItemType.直接过关:l.PlayerLvl.Instance.upLvl(),a.Player.Instance.increase(a.PlayerAttr.关卡等级),c.PlayerBattle.Instance.changeStatus(c.BattleStatus.BattleStatus_NextBattle);break;case n.ShopItemType.特惠大礼包:r.PlayerWeapon.Instance.addBuffer(r.BuffType.全攻击加成),r.PlayerWeapon.Instance.addBuffer(r.BuffType.耐久加成),r.PlayerWeapon.Instance.addBuffer(r.BuffType.生命加成),a.Player.Instance.increase(a.PlayerAttr.金币,12500);break;case n.ShopItemType.角色升级:l.PlayerLvl.Instance.upLvl();break;case n.ShopItemType.关卡开启:break;case n.ShopItemType.金币22500:a.Player.Instance.getShopTime()>0?a.Player.Instance.increase(a.PlayerAttr.金币,22500):a.Player.Instance.increase(a.PlayerAttr.金币,45e3)}this.eventNotify(e),s.LocalData.Instance.save()},e.prototype.buyGunByCoin=function(e){var t=i.ALL_GUN_DATA_MAP[e];return!(null==t||0>=t.price||t.price>a.Player.Instance.get(a.PlayerAttr.金币))&&(a.Player.Instance.spendMoney(t.price),r.PlayerWeapon.Instance.addOwnGun(e),!0)},e.prototype.showShopUI=function(e){cc.loader.loadRes("prefab/"+e,function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})},e.prototype.showGiftPresent=function(){r.PlayerWeapon.Instance.isHaveGun(i.GunType.Spas光线弹)?this.showShopUI("present_2"):this.showShopUI("present")},e.prototype.gunTypeToShopType=function(e){var t=0;switch(e){case i.GunType.火箭炮:t=n.ShopItemType.火箭炮;break;case i.GunType.黄金重狙枪:t=n.ShopItemType.黄金重狙枪;break;case i.GunType.火力喷射炮:t=n.ShopItemType.火力喷射炮;break;case i.GunType.Spas光线弹:t=n.ShopItemType.超级大礼包}return t},e.prototype.addListener=function(e){null==this._eventListener&&(this._eventListener=[]),-1==this._eventListener.indexOf(e)&&this._eventListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._eventListener){var t=this._eventListener.indexOf(e);-1!=t&&this._eventListener.splice(t,1)}},e.prototype.eventNotify=function(e){null!=this._eventListener&&this._eventListener.forEach(function(t){t.onBuySuccessNotify(e)})},e.Instance=new e,e}();o.PlayerShop=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/PlayerBattle":"PlayerBattle","./LocalData":"LocalData","./Player":"Player","./PlayerLvl":"PlayerLvl","./PlayerWeapon":"PlayerWeapon"}],PlayerWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"15835RRtidHtpBxfahlAZQy","PlayerWeapon"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../Data/GunData"),r=e("./Player");(i=n=o.BuffType||(o.BuffType={}))[i["全攻击加成"]=1]="全攻击加成",i[i["耐久加成"]=2]="耐久加成",i[i["生命加成"]=3]="生命加成";var l=function(){function e(){this._gunItems={},this._buffItems=[],this.guideGunID=0,this._gunEventListener=null,this._buffEventListener=null}return e.prototype.isHaveGun=function(e){return null!=this._gunItems[e]&&e!=this.guideGunID},e.prototype.getGuideGunID=function(){return this.guideGunID},e.prototype.setGuideGunID=function(e){this.addOwnGun(e),this.guideGunID=e},e.prototype.getGunLocalNum=function(){var e=0;for(var t in this._gunItems)++e;return e},e.prototype.getOwnGun=function(e){var t=a.ALL_GUN_DATA_MAP[e];return{id:t.id,atk:r.Player.Instance.getAtk(t.atk),speed:t.speed,delay:t.delay,rect:t.rect,name:t.name,value:Math.floor(t.value*(100+this.getBuffDurabilityAdd())/100),icon:t.icon,price:t.price}},e.prototype.getOwnUsableGuns=function(){var e=[];for(var t in this._gunItems){var o=this._gunItems[t];0<o.valueDurability&&e.push(this.getOwnGun(o.id))}return e},e.prototype.getGunLocal=function(e){return null==this._gunItems[e]?{id:e,valueDurability:0}:this._gunItems[e]},e.prototype.addOwnGun=function(e){var t=a.ALL_GUN_DATA_MAP[e],o={id:e,valueDurability:Math.floor(t.value*(100+this.getBuffDurabilityAdd())/100)};this._gunItems[e]=o,this.guideGunID==e&&(this.guideGunID=0),this.gunEventNotify(e)},e.prototype.removeOwnGun=function(e){null!=this._gunItems[e]&&(delete this._gunItems[e],this.gunEventNotify(e))},e.prototype.UseBullet=function(e,t){if(0!=e){r.Player.Instance.increase(r.PlayerAttr.武器耐久总消耗数,t);var o=this.getGunLocal(e);o.valueDurability-=t,o.valueDurability=Math.max(0,o.valueDurability),e==this.guideGunID&&0==o.valueDurability&&(this.removeOwnGun(e),this.guideGunID=0)}},e.prototype.getRepairGunCostCoin=function(e){if(this.isHaveGun(e)){var t=this.getGunLocal(e),o=this.getOwnGun(e);return t.valueDurability+10<=o.value?10*this.getrepaircoin(e):t.valueDurability<o.value?this.getrepaircoin(e)*(o.value-t.valueDurability):0}},e.prototype.RepairGun=function(e){if(this.isHaveGun(e)){var t=this.getRepairGunCostCoin(e);if(!(0>t||t>r.Player.Instance.get(r.PlayerAttr.金币))){var o=this._gunItems[e].valueDurability+10,n=this.getOwnGun(e);this._gunItems[e].valueDurability=Math.min(n.value,o),r.Player.Instance.spendMoney(t)}}},e.prototype.getrepaircoin=function(e){return[100,100,480,480,480,480,480,480,480,480,480,480][e-1]},e.prototype.isHaveBuffer=function(e){return 0<this.getBuffer(e)},e.prototype.getBuffer=function(e){return null==this._buffItems[e]&&(this._buffItems[e]=0),this._buffItems[e]},e.prototype.addBuffer=function(e){var t=this.getBuffer(e);this._buffItems[e]=t+1,this.buffEventNotify(e)},e.prototype.getBuffLifeAdd=function(){return 50*this.getBuffer(n.生命加成)},e.prototype.getBuffAtkAdd=function(){return 50*this.getBuffer(n.全攻击加成)},e.prototype.getBuffDurabilityAdd=function(){return 50*this.getBuffer(n.耐久加成)},e.prototype.addGunListener=function(e){null==this._gunEventListener&&(this._gunEventListener=[]),-1==this._gunEventListener.indexOf(e)&&this._gunEventListener.push(e)},e.prototype.removeGunListener=function(e){if(null!=this._gunEventListener){var t=this._gunEventListener.indexOf(e);-1!=t&&this._gunEventListener.splice(t,1)}},e.prototype.gunEventNotify=function(e){null!=this._gunEventListener&&this._gunEventListener.forEach(function(t){t.onPlayGetGunNotify(e)})},e.prototype.addBuffListener=function(e){null==this._buffEventListener&&(this._buffEventListener=[]),-1==this._buffEventListener.indexOf(e)&&this._buffEventListener.push(e)},e.prototype.removeBuffListener=function(e){if(null!=this._buffEventListener){var t=this._buffEventListener.indexOf(e);-1!=t&&this._buffEventListener.splice(t,1)}},e.prototype.buffEventNotify=function(e){null!=this._buffEventListener&&this._buffEventListener.forEach(function(t){t.onPlayGetBuffNotify(e)})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("GUN");for(var t in e&&(this._gunItems=JSON.parse(e)),this._gunItems)if(this._gunItems.hasOwnProperty(t)){var o=this._gunItems[t];console.log("角色武器数据"+t+"耐久度"+o.valueDurability)}this.guideGunID=cc.sys.localStorage.getItem("guideGun"),null==this.guideGunID&&(this.guideGunID=0);var i=cc.sys.localStorage.getItem("BUFF");for(var t in i&&(this._buffItems=JSON.parse(i)),this._buffItems)if(this._buffItems.hasOwnProperty(t)){o=this._buffItems[t];console.log("角色Buff"+n[t]+"="+o)}},e.prototype.save=function(){var e=JSON.stringify(this._gunItems);cc.sys.localStorage.setItem("GUN",e),cc.sys.localStorage.setItem("guideGun",this.guideGunID),e=JSON.stringify(this._buffItems),cc.sys.localStorage.setItem("BUFF",e)},e.Instance=new e,e}();o.PlayerWeapon=l,cc._RF.pop()},{"../Data/GunData":"GunData","./Player":"Player"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"45f2fyWJnlNkLf48aRK84k+","Player"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("./PlayerLvl"),r=e("./PlayerWeapon"),l=e("./PlayerAchieve"),s=e("./PlayerBattle"),c=e("./PlayerShop");(i=n=o.PlayerAttr||(o.PlayerAttr={}))[i["属性Begin"]=0]="属性Begin",i[i["金币"]=1]="金币",i[i["登陆时间"]=2]="登陆时间",i[i["已登陆天数"]=3]="已登陆天数",i[i["关卡等级"]=4]="关卡等级",i[i["成功过关次数"]=5]="成功过关次数",i[i["主角死亡次数"]=6]="主角死亡次数",i[i["主角复活次数"]=7]="主角复活次数",i[i["杀敌数量"]=8]="杀敌数量",i[i["获得金币总数"]=9]="获得金币总数",i[i["武器耐久总消耗数"]=10]="武器耐久总消耗数",i[i["过肩摔完成次数"]=11]="过肩摔完成次数",i[i["绝招使用次数"]=12]="绝招使用次数",i[i["新手引导"]=13]="新手引导",i[i["金币商店双倍金币时间"]=14]="金币商店双倍金币时间",i[i["属性End"]=15]="属性End";var p=function(){function e(){this._attrItems={},this._attrListener=null,this.isWuDi=!1,this.isFuHuo=!1}return e.prototype.set=function(e,t){this._attrItems[e]=t,console.log("set'"+n[e]+"'='"+t+"'"),this.attrNotify(e)},e.prototype.get=function(e){return void 0===this._attrItems[e]&&(this._attrItems[e]=0),this._attrItems[e]},e.prototype.increase=function(e,t){void 0===t&&(t=1),void 0===this._attrItems[e]&&(this._attrItems[e]=0,this._attrItems[e]+=t),n.关卡等级==e&&this._attrItems[e]>=s.MaxGuanQia?this._attrItems[e]=s.MaxGuanQia:this._attrItems[e]+=t,console.log("increase'"+n[e]+"'='"+this._attrItems[e]+"'"),this.attrNotify(e),l.PlayerAchieve.Instance.checkComplete(e),e==n.金币&&this.increase(n.获得金币总数,t)},e.prototype.getShopTime=function(){var e=this.get(n.金币商店双倍金币时间)+72e5-Date.now();return e>0?e:0},e.prototype.spendMoney=function(e){var t=this.get(n.金币);this._attrItems[n.金币]=Math.max(0,t-e),console.log("花费金币'"+e+"'还剩下'"+this._attrItems[n.金币]+"'"),this.attrNotify(n.金币)},e.prototype.getHp=function(){return Math.floor(500*(100+r.PlayerWeapon.Instance.getBuffLifeAdd()+a.PlayerLvl.Instance.getLifeAdd())/100)},e.prototype.getAtk=function(e){var t=Math.floor(e*(100+a.PlayerLvl.Instance.getAtkAdd()+r.PlayerWeapon.Instance.getBuffAtkAdd())/100);return Math.max(t,1)},e.prototype.getTotleAtkAdd=function(){return a.PlayerLvl.Instance.getAtkAdd()+r.PlayerWeapon.Instance.getBuffAtkAdd()},e.prototype.checkDailyBonus=function(){var e=this.get(n.已登陆天数);if(!(0>e||7<=e)){var t=(new Date).getDate(),o=this.get(n.登陆时间);0!=o&&o==t||cc.loader.loadRes("prefab/daily_bonus",function(e,t){e?console.log(e):cc.director.getScene().addChild(cc.instantiate(t))})}},e.prototype.ReceiveDailyBonus=function(){var e=this.get(n.已登陆天数);if(!(0>e||7<=e)){0==e?this.increase(n.金币,200):1==e?this.increase(n.金币,300):2==e?c.PlayerShop.Instance.showGiftPresent():3==e?this.increase(n.金币,500):4==e?this.increase(n.金币,1e3):5==e?c.PlayerShop.Instance.showGiftPresent():6==e&&this.increase(n.金币,2e3),this.increase(n.已登陆天数);var t=new Date;this.set(n.登陆时间,t.getDate())}},e.prototype.completeGuide=function(e){var t=this.get(n.新手引导);this._attrItems[n.新手引导]=t|e,console.log(""+this._attrItems[n.新手引导])},e.prototype.isGuideComplete=function(e){return(this.get(n.新手引导)&e)==e},e.prototype.resetHelpGuide=function(e){var t=this.get(n.新手引导);this._attrItems[n.新手引导]=t&~e},e.prototype.addListener=function(e){null==this._attrListener&&(this._attrListener=[]),-1==this._attrListener.indexOf(e)&&this._attrListener.push(e)},e.prototype.removeListener=function(e){if(null!=this._attrListener){var t=this._attrListener.indexOf(e);-1!=t&&this._attrListener.splice(t,1)}},e.prototype.attrNotify=function(e){var t=this;null!=this._attrListener&&this._attrListener.forEach(function(o){o.onPlayerAttrNotify(e,t._attrItems[e])})},e.prototype.read=function(){var e=cc.sys.localStorage.getItem("PLAYER");e&&(this._attrItems=JSON.parse(e));for(var t=n.属性Begin;t<=n.属性End;t++)void 0===this._attrItems[t]&&(this._attrItems[t]=0);for(var o in this._attrItems)if(this._attrItems.hasOwnProperty(o)){var i=this._attrItems[o];console.log(n[o]+"="+i)}},e.prototype.save=function(){var e=JSON.stringify(this._attrItems);cc.sys.localStorage.setItem("PLAYER",e)},e.Instance=new e,e}();o.Player=p,cc._RF.pop()},{"./PlayerAchieve":"PlayerAchieve","./PlayerBattle":"PlayerBattle","./PlayerLvl":"PlayerLvl","./PlayerShop":"PlayerShop","./PlayerWeapon":"PlayerWeapon"}],Present1:[function(e,t,o){"use strict";cc._RF.push(t,"a9a6aWNSk1AKa8FQUn2YRZE","Present1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/HelpData"),i=e("../Data/GunData"),a=e("../UICommon"),r=e("../Logic/PlayerWeapon"),l=e("../Logic/PlayerBattle"),s=e("../Logic/Player"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gunSprite=null,t.nameLabel=null,t.atkLabel=null,t.valueLabel=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.init(i.GunType.火箭炮)},t.prototype.onDestroy=function(){l.PlayerBattle.Instance.checkHelpGuide()},t.prototype.init=function(e){var t=i.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,a.setSpriteFromRawRes(t.icon,this.gunSprite)},t.prototype.onFormClick=function(){a.onButtonClicked(),this.node.destroy()},t.prototype.onGetClick=function(){a.onButtonClicked(),this.node.destroy(),s.Player.Instance.completeGuide(n.HelpType.help2),r.PlayerWeapon.Instance.setGuideGunID(i.GunType.火箭炮)},__decorate([u(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([u(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([u(cc.Label)],t.prototype,"atkLabel",void 0),__decorate([u(cc.Label)],t.prototype,"valueLabel",void 0),t=__decorate([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/HelpData":"HelpData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Present2:[function(e,t,o){"use strict";cc._RF.push(t,"8cb0bXqRBNPApPqtifkZm3e","Present2"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/ShopData"),a=e("../Logic/PlayerShop"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.label1=null,t}return __extends(t,e),t.prototype.start=function(){var e=i.ALL_SHOP_ITEM_DATA_MAP[i.ShopItemType.特惠大礼包];this.label.string=e.price.toString(),this.label1.string=this.label.string},t.prototype.onBuyClick=function(){n.onButtonClicked(),a.PlayerShop.Instance.buyByRMB(i.ShopItemType.特惠大礼包,this.node)},t.prototype.onFormClick=function(){n.onButtonClicked(),this.node.destroy()},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s(cc.Label)],t.prototype,"label1",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Present:[function(e,t,o){"use strict";cc._RF.push(t,"17ecdGOT2ZMI4/pXW0/Mupt","Present"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../UICommon"),i=e("../Data/ShopData"),a=e("../Logic/PlayerShop"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.label1=null,t}return __extends(t,e),t.prototype.start=function(){var e=i.ALL_SHOP_ITEM_DATA_MAP[i.ShopItemType.超级大礼包];this.label.string=e.price.toString(),this.label1.string=this.label.string},t.prototype.onBuyClick=function(){n.onButtonClicked(),a.PlayerShop.Instance.buyByRMB(i.ShopItemType.超级大礼包,this.node)},t.prototype.onFormClick=function(){n.onButtonClicked(),this.node.destroy()},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s(cc.Label)],t.prototype,"label1",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Revive:[function(e,t,o){"use strict";cc._RF.push(t,"7a168CbWs1KD6lWTWTWuySb","Revive"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../Logic/PlayerWeapon"),r=e("../UICommon"),l=e("../Logic/Player"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.life=null,t.money22Label=null,t.money33Label=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initOnlyMoney(n.ShopItemType.金币12500,this.money22Label),this.initOnlyMoney(n.ShopItemType.金币8000,this.money33Label),a.PlayerWeapon.Instance.addBuffListener(this)},t.prototype.onDestroy=function(){a.PlayerWeapon.Instance.removeBuffListener(this)},t.prototype.start=function(){this.updateLife()},t.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},t.prototype.onPlayGetBuffNotify=function(e){this.updateLife()},t.prototype.updateLife=function(){var e=l.Player.Instance.getHp();this.life.string=""+e},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy(),r.switchToScene("Begin")},t.prototype.onBtn1Click=function(){r.onButtonClicked(),i.PlayerShop.Instance.buyByRMB(n.ShopItemType.生命加成,null)},t.prototype.onBtn2Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.角色复活)},t.prototype.onBtn3Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.直接过关)},t.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([p(cc.Label)],t.prototype,"life",void 0),__decorate([p(cc.Label)],t.prototype,"money22Label",void 0),__decorate([p(cc.Label)],t.prototype,"money33Label",void 0),t=__decorate([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],RoleBase:[function(e,t,o){"use strict";cc._RF.push(t,"b5628aQwPRI24VGykI02T1V","RoleBase"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("./DragonBonesConfig"),r=e("./StateMachine"),l=e("./SkillData"),s=e("./AudioMgr"),c=e("./EquipData"),p=e("./Bullet"),u=e("./Logic/PlayerLvl"),h=e("./Logic/PlayerBattle"),d=e("./Logic/PlayerWeapon"),y=e("./RoleEnemy"),g=e("./Logic/Player"),f=cc._decorator,m=f.ccclass;f.property;(i=n=o.BlockReason||(o.BlockReason={}))[i.None=0]="None",i[i.Skill=1]="Skill",i[i.BeHit=2]="BeHit",i[i.BeHitBlow=3]="BeHitBlow",i[i.Jump=4]="Jump",i[i.Grab=5]="Grab",i[i.BeGrab=6]="BeGrab";var _=function(){function e(){this.ownerRole=null,this.dragonBones=null,this.equipData=null,this.skillData=null,this.bulletDelay=99999999}return e.prototype.init=function(e,t,o,n){this.ownerRole=e;var i=new cc.Node;e.node.addChild(i),this.dragonBones=i.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(t,-1),this.equipData=n,this.skillData=o,this.bulletDelay=n.delay/100},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e.prototype.myUpdate=function(e){var t=this.bulletDelay,o=t-e;t>0&&o<=0&&this.createBullet(),this.bulletDelay=o},e.prototype.createBullet=function(){(new cc.Node).addComponent(p.default).myInit(this.ownerRole,this.skillData,this.equipData)},e}(),S=function(){function e(){this.ownerRole=null,this.offsetX=0,this.dragonBones=null,this.boxAttacking=null}return e.prototype.init=function(e,t){this.ownerRole=e,this.offsetX=t;var o=new cc.Node;e.node.addChild(o),o.setScale(1/1.2),o.setPosition(t,0),this.dragonBones=o.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(e.animState.name,-1),this.boxAttacking={valid:!1,x:0,y:0,width:0,height:0}},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e}(),v=function(){function e(){this.ownerRole=null,this.dragonBones=null}return e.prototype.init=function(e,t){this.ownerRole=e;var o=new cc.Node;e.node.addChild(o),this.dragonBones=o.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=e.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=e.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=e.dragonBonesConfig.dragonArmatureName,this.dragonBones.playAnimation(t,-1)},e.prototype.destroy=function(){this.dragonBones.node.removeFromParent()},e}(),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dragonBonesConfig=null,t.dragonBones=null,t.ownerMap=null,t.isFaceRight=!1,t.stateMachine=null,t.roleName=null,t.animName=null,t.animState=null,t.animAuxCounters=null,t.attacker=null,t.dragonSlotAttacking=null,t.dragonSlotBeAttacked=null,t.boxAttacking=null,t.boxBeAttacked=null,t.debugGraphicsAttacking=null,t.debugGraphicsBeAttacked=null,t.hitters=null,t.hitterBullets=null,t.gunAnimation=null,t.iceEffect=null,t.fenshenList=null,t.lifePoint=0,t.attackPower=0,t.equipid=0,t.isBaTi=!1,t.isFenShen=!1,t.isWuDi=!1,t.isBoss=!1,t.isSummonWhenAttacked=!1,t.summonRemainCount=0,t}return __extends(t,e),t.RoleBoxIntersection=function(e,t){return e.valid&&t.valid&&!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},t.prototype._findDragonBonesConfig=function(){this.dragonBonesConfig=null;for(var e=this.node;e;e=e.parent){var t=e.getComponent(a.default);if(t){this.dragonBonesConfig=t;break}}},t.prototype._initStateMachine=function(){var e=this,t=this.stateMachine;t.registerState(l.SMState.IDLE),t.registerState(l.SMState.JUMP),t.registerState(l.SMState.BLOCKED),t.registerState(l.SMState.BLOCKED_J),t.registerState(l.SMState.LYING),t.registerStateChange(l.SMState.IDLE,l.SMState.IDLE,function(){return 0==t.getVariable(l.SMVariable.Trigger_SkillID)&&t.getVariable(l.SMVariable.Input_WalkDir)!=t.getVariable(l.SMVariable.SpeedX)},function(){var o=t.getVariable(l.SMVariable.Input_WalkDir);t.setVariable(l.SMVariable.SpeedX,o),0==o?e.on_AI_timer_begin():e.on_AI_timer_reset(),e.isFaceRight&&o<0?e.setFaceDir(!1):!e.isFaceRight&&o>0&&e.setFaceDir(!0),0==o?e._playAnimation("stand"):Math.abs(o)<100?e._playAnimation("go"):e._playAnimation("run")}),t.registerStateChange([l.SMState.IDLE,l.SMState.JUMP,l.SMState.BLOCKED],l.SMState.BLOCKED,function(){var o=t.getVariable(l.SMVariable.Trigger_SkillID);if(0==o)return!1;if(t.getCurrentStateId()!=l.SMState.BLOCKED){if("guo_jian_shuai"==l.ALL_SKILL_DATA_MAP[o].special)if(null==e.ownerMap.getGrabTarget(e,50,o))return t.setVariable(l.SMVariable.Trigger_SkillID,0),!1;return!0}return t.getCurrentStateId()==l.SMState.BLOCKED&&t.getVariable(l.SMVariable.BlockedReason)==n.Grab&&"need_grab"==l.ALL_SKILL_DATA_MAP[o].special},function(){var o=t.getVariableAndClear(l.SMVariable.Trigger_SkillID);t.setVariable(l.SMVariable.SkillID,o);var i=l.ALL_SKILL_DATA_MAP[o];if(e===e.ownerMap.roleHero&&"equip"==i.special&&h.PlayerBattle.Instance.UseBullet(1),e._playAnimation(i.animName),i.gunAnimName&&(e.gunAnimation=new _,e.gunAnimation.init(e,i.gunAnimName,i,c.ALL_EQUIP_DATA_MAP[i.equipid])),i.equipid){var a=c.ALL_EQUIP_DATA_MAP[i.equipid].useSound;a&&s.myAudioMgr.playSFX(a)}if(t.setVariable(l.SMVariable.BlockedReason,n.Skill),0==t.getVariable(l.SMVariable.PositionY)){if(t.setVariable(l.SMVariable.SpeedX,i.moveSpeed*(e.isFaceRight?1:-1)),t.setVariable(l.SMVariable.SpeedY,0),"guo_jian_shuai"==i.special)e.ownerMap.getGrabTarget(e,50,o).onHitByOther(e),s.myAudioMgr.playSFX("becatch.ogg"),g.Player.Instance.increase(g.PlayerAttr.过肩摔完成次数);else if("grab"==i.special){t.setVariable(l.SMVariable.BlockedReason,n.Grab);var r=e.ownerMap.getGrabTarget(e,50,o);r&&r.node.setPositionX(e.node.getPositionX()+30*(e.isFaceRight?1:-1))}}else t.setState(l.SMState.BLOCKED_J)}),t.registerStateChange([l.SMState.IDLE,l.SMState.JUMP],l.SMState.JUMP,function(){return t.getVariableAndClear(l.SMVariable.Input_Jump)>0},function(){if(t.setVariable(l.SMVariable.SpeedY,240),e._playAnimation("jumpup"),0==t.getVariable(l.SMVariable.PositionY)){var o=t.getVariable(l.SMVariable.Input_WalkDir);o=o>0?1:o<0?-1:0,t.setVariable(l.SMVariable.SpeedX,100*o)}else t.setState(l.SMState.BLOCKED_J),t.setVariable(l.SMVariable.BlockedReason,n.Jump)}),t.registerStateChange([l.SMState.IDLE,l.SMState.JUMP,l.SMState.BLOCKED,l.SMState.BLOCKED_J],l.SMState.BLOCKED,function(){return t.getVariableAndClear(l.SMVariable.Trigger_HitBySkillID)>0},function(o){e.gunAnimation&&(e.gunAnimation.destroy(),e.gunAnimation=null);var i=l.ALL_SKILL_DATA_MAP[t.getVariable(l.SMVariable.HitBySkillID)];t.setVariable(l.SMVariable.BlockedReason,n.BeHit),"grab"==i.special&&t.setVariable(l.SMVariable.BlockedReason,n.BeGrab);var a=i.blowPower;e.isBaTi&&e.lifePoint>0&&a<300&&(a=0);var r=null;t.setVariable(l.SMVariable.SpeedX,i.beHitMoveSpeed*(e.attacker.isFaceRight?1:-1)),a>0?(r="be_f_lv_fukong_up",t.setVariable(l.SMVariable.BlockedReason,n.BeHitBlow),t.setVariable(l.SMVariable.SpeedY,a)):(r=e.lifePoint<=0&&i.beHitDieAnimName?i.beHitDieAnimName:i.beHitAnimName,9==i.equipid?(e.setIntColor(16777215),t.setVariable(l.SMVariable.IceFireCountDown,2)):12==i.equipid&&(t.setVariable(l.SMVariable.IceFireCountDown,2),e.iceEffect||(e.iceEffect=new v,e.iceEffect.init(e,"be_ice_1"))),t.getVariable(l.SMVariable.SpeedY)<0&&t.setVariable(l.SMVariable.SpeedY,0)),a>=300&&t.setVariable(l.SMVariable.IsBlowedHigh,1),14==i.skillId&&0!=t.getVariable(l.SMVariable.IsBlowedHigh)&&(t.setVariable(l.SMVariable.FlyKickCountDown,1),e.attacker.stateMachine.setVariable(l.SMVariable.FlyKickCountDown,1),r="be_jumpfly",g.Player.Instance.increase(g.PlayerAttr.绝招使用次数)),(t.getVariable(l.SMVariable.PositionY)>0||t.getVariable(l.SMVariable.SpeedY)>0)&&t.setState(l.SMState.BLOCKED_J),e.isBaTi&&e.lifePoint>0&&!("grab"==i.special||"guo_jian_shuai"==i.special||"need_grab"==i.special||i.blowPower>=300)?t.setState(o):r&&e._playAnimation(r),e.isSummonWhenAttacked&&e.summonRemainCount>0&&(e.summonRemainCount-=1,e.ownerMap.summonEnemy(e))}),t.registerStateChange(l.SMState.JUMP,l.SMState.BLOCKED,function(){return 0==t.getVariable(l.SMVariable.PositionY)},function(){e._playAnimation("jumpstand")}),t.registerStateChange(l.SMState.BLOCKED_J,l.SMState.LYING,function(){return 0==t.getVariable(l.SMVariable.PositionY)},function(){t.getVariable(l.SMVariable.BlockedReason)==n.BeHit?(e._playAnimation("be_d_2"),t.setVariable(l.SMVariable.LyingCountDown,2)):t.getVariable(l.SMVariable.BlockedReason)==n.BeHitBlow?(e._playAnimation("be_f_lv_fukong_stand"),t.setVariable(l.SMVariable.LyingCountDown,2)):(e._playAnimation("jumpstand"),t.setState(l.SMState.BLOCKED))}),t.registerStateChange(l.SMState.BLOCKED,l.SMState.IDLE,function(){return t.getVariable(l.SMVariable.Trigger_AnimationFinished)>0?(e.gunAnimation&&(e.gunAnimation.destroy(),e.gunAnimation=null),!0):t.getVariable(l.SMVariable.BlockedReason)==n.Grab&&!e.ownerMap.getGrabTarget(e,50,0)||t.getVariable(l.SMVariable.BlockedReason)==n.BeGrab&&e.attacker.stateMachine.getCurrentStateId()==l.SMState.IDLE},function(){t.setVariable(l.SMVariable.SkillID,0),e.lifePoint>0?(t.setVariable(l.SMVariable.SpeedX,0),t.setVariable(l.SMVariable.SpeedY,0),e.on_AI_timer_begin(),e._playAnimation("stand")):(t.setVariable(l.SMVariable.LyingCountDown,2),t.setState(l.SMState.LYING))}),t.registerStateChange(l.SMState.BLOCKED_J,l.SMState.BLOCKED_J,function(){return t.getVariable(l.SMVariable.BlockedReason)==n.Skill&&t.getVariable(l.SMVariable.Trigger_AnimationFinished)>0},function(){t.setVariable(l.SMVariable.BlockedReason,n.Jump)}),t.registerStateChange(l.SMState.LYING,l.SMState.BLOCKED,function(){return t.getVariable(l.SMVariable.LyingCountDown)<=0},function(){e.lifePoint>0?(e._playAnimation("ds_2"),e.animState.timeScale=3):e.ownerMap.afterRoleDie(e)}),t.setState(l.SMState.IDLE),this._playAnimation("stand"),t.setVariable(l.SMVariable.Input_WalkDir,0),t.setVariable(l.SMVariable.Input_Jump,0),t.setVariable(l.SMVariable.Input_Attack1,0),t.setVariable(l.SMVariable.Input_Attack2,0),t.setVariable(l.SMVariable.Input_ChangeWeapon,0),t.setVariable(l.SMVariable.Trigger_SkillID,0),t.setVariable(l.SMVariable.Trigger_HitBySkillID,0),t.setVariable(l.SMVariable.Trigger_AnimationFinished,0),t.setVariable(l.SMVariable.SkillID,0),t.setVariable(l.SMVariable.HitBySkillID,0),t.setVariable(l.SMVariable.BlockedReason,0),t.setVariable(l.SMVariable.PositionY,0),t.setVariable(l.SMVariable.SpeedX,0),t.setVariable(l.SMVariable.SpeedY,0),t.setVariable(l.SMVariable.LyingCountDown,0),t.setVariable(l.SMVariable.IceFireCountDown,0),t.setVariable(l.SMVariable.FlyKickCountDown,0),t.setVariable(l.SMVariable.IsBlowedHigh,0)},t.prototype.init=function(){this._findDragonBonesConfig(),this.dragonBones=this.addComponent(dragonBones.ArmatureDisplay),this.dragonBones.dragonAsset=this.dragonBonesConfig.dragonAsset,this.dragonBones.dragonAtlasAsset=this.dragonBonesConfig.dragonAtlasAsset,this.dragonBones.armatureName=this.dragonBonesConfig.dragonArmatureName,this.stateMachine=new r.StateMachine,this.animAuxCounters=[],this.dragonSlotAttacking=this.dragonBones.armature().getSlot("Layer4"),this.dragonSlotBeAttacked=this.dragonBones.armature().getSlot("Layer1"),this.boxAttacking={valid:!1,x:0,y:0,width:0,height:0},this.boxBeAttacked={valid:!1,x:0,y:0,width:0,height:0},this.hitters=[],this.hitterBullets=[],this.fenshenList=[],this._initStateMachine()},t.prototype._playAnimation=function(e,t){void 0===t&&(t=-1),this.animName=e,this.animState=this.dragonBones.playAnimation(e,t),this.stateMachine.setVariable(l.SMVariable.Trigger_AnimationFinished,0);for(var o=0,n=this.fenshenList;o<n.length;o++){n[o].dragonBones.playAnimation(e,t)}},t.prototype.setIntColor=function(e){var t=e>>16&255,o=e>>8&255,n=255&e;this.node.color=new cc.Color(t,o,n,255)},t.prototype.setFaceDir=function(e){this.isFaceRight=e,e?this.node.setScale(Math.abs(this.node.scaleX),this.node.scaleY):this.node.setScale(-Math.abs(this.node.scaleX),this.node.scaleY)},t.prototype._getRoleBox=function(e,t,o){if(this.lifePoint<=0)t.valid=!1;else{var n=cc.sys.isBrowser?e.displayIndex:e.getDisplayIndex();if(n<0||15==n)t.valid=!1;else{var i,a;if(cc.sys.isBrowser){var r=e.displayData.texture.region;i=r.width,a=r.height}else{var l=e.getRawDisplay().getContentSize();i=l.width,a=l.height}var s=e.global,c=s.x,p=s.y;c-=.5*i,p=-p,p-=.5*a,t.valid=!0,this.isFaceRight?t.x=c+this.node.getPositionX():t.x=-c-i+this.node.getPositionX(),t.y=p+this.node.getPositionY(),t.width=i,t.height=a}}},t.prototype._updateAttackBoxes=function(){this._getRoleBox(this.dragonSlotAttacking,this.boxAttacking,this.debugGraphicsAttacking),this._getRoleBox(this.dragonSlotBeAttacked,this.boxBeAttacked,this.debugGraphicsBeAttacked);for(var e=this.boxAttacking,t=0,o=this.fenshenList;t<o.length;t++){var n=o[t],i=n.boxAttacking;i.valid=e.valid,e.valid&&(i.x=e.x+n.offsetX,i.y=e.y,i.width=e.width,i.height=e.height)}},t.prototype._findSkillIDByInput=function(){var e=this,t=this.stateMachine,o=t.getCurrentStateId(),i="stand";if(o==l.SMState.JUMP)i="jump";else if(o==l.SMState.IDLE){var a=t.getVariable(l.SMVariable.SpeedX);i=0==a?"stand":"walk"}var r=l.ALL_SKILL_DATA.filter(function(o){if(o.availableStates.indexOf(i)<0)return!1;if(0!=o.inputKey&&0==t.getVariable(o.inputKey))return!1;if(o.special)switch(o.special){case"guo_jian_shuai":if(t.getCurrentStateId()==l.SMState.BLOCKED&&t.getVariable(l.SMVariable.BlockedReason)==n.Grab)return!1;var a=t.getVariable(l.SMVariable.Input_WalkDir);if(!(a>0&&!e.isFaceRight||a<0&&e.isFaceRight))return!1;if(!e.ownerMap.getGrabTarget(e,50,o.skillId))return!1;break;case"grab":if(!e.ownerMap.getGrabTarget(e,50,o.skillId))return!1;break;case"need_grab":if(t.getVariable(l.SMVariable.BlockedReason)!=n.Grab)return!1;break;case"equip":if(e.equipid!=o.equipid)return!1;if(e===e.ownerMap.roleHero){var r=d.PlayerWeapon.Instance.getGunLocal(e.equipid);if(!r||r.valueDurability<=0)return!1}break;default:return!1}return!0});if(0==r.length)return 0;t.setVariable(l.SMVariable.Input_Jump,0),t.setVariable(l.SMVariable.Input_Attack1,0),t.setVariable(l.SMVariable.Input_Attack2,0),t.setVariable(l.SMVariable.Input_ChangeWeapon,0);var s=r[0].groupId;return r=r.filter(function(e){return e.groupId==s}),this.animAuxCounters[s]||(this.animAuxCounters[s]=0),r[(++this.animAuxCounters[s]-1)%r.length].skillId},t.prototype._updatePosition=function(e){var t=this.stateMachine,o=t.getVariable(l.SMVariable.SpeedX),i=t.getVariable(l.SMVariable.SpeedY),a=i-480*e,r=t.getVariable(l.SMVariable.FlyKickCountDown);r>0?((r-=e)<0&&(r=0),t.setVariable(l.SMVariable.FlyKickCountDown,r),o=14==t.getVariable(l.SMVariable.SkillID)?this.isFaceRight?300:-300:this.isFaceRight?-300:300,i=0,a=0):t.setVariable(l.SMVariable.SpeedY,a);var s=t.getCurrentStateId();a<0&&i>=0&&(s==l.SMState.JUMP||s==l.SMState.BLOCKED_J&&t.getVariable(l.SMVariable.BlockedReason)==n.Jump?this._playAnimation("jumpdown"):s==l.SMState.BLOCKED_J&&t.getVariable(l.SMVariable.BlockedReason)==n.BeHitBlow&&this._playAnimation("be_f_lv_fukong_zhong"));var c=this.node.position,p=c.x+o*e,u=c.y+.5*(i+a)*e,h=this.ownerMap.bgTiledMap.node.getContentSize().width;p=cc.clampf(p,0,h);var d=this.ownerMap.GROUND_HEIGHT;u<=d&&(u=d,t.setVariable(l.SMVariable.IsBlowedHigh,0)),t.setVariable(l.SMVariable.PositionY,u-d),this.node.setPosition(p,u)},t.prototype._isAnimCompleted=function(){return cc.sys.isBrowser?this.animState.isCompleted:this.animState.playTimes>0&&this.animState.getCurrentPlayTimes()>=1},t.prototype.myUpdate=function(e){this.gunAnimation&&this.gunAnimation.myUpdate(e);var t=this.stateMachine;switch(t.getCurrentStateId()){case l.SMState.IDLE:case l.SMState.BLOCKED:case l.SMState.JUMP:case l.SMState.BLOCKED_J:this._updatePosition(e),t.getVariable(l.SMVariable.IceFireCountDown)>0&&(t.setVariable(l.SMVariable.IceFireCountDown,t.getVariable(l.SMVariable.IceFireCountDown)-e),t.getVariable(l.SMVariable.IceFireCountDown)<=0&&(t.setVariable(l.SMVariable.IceFireCountDown,0),this.iceEffect&&(this.iceEffect.destroy(),this.iceEffect=null),this._playAnimation("be-qiang-daodi-1"),this instanceof y.default&&this.setIntColor(this.enemyConfig.color)));break;case l.SMState.LYING:t.setVariable(l.SMVariable.LyingCountDown,t.getVariable(l.SMVariable.LyingCountDown)-e)}if(0==t.getVariable(l.SMVariable.Trigger_SkillID)){var o=this._findSkillIDByInput();0!=o&&t.setVariable(l.SMVariable.Trigger_SkillID,o)}this.animState&&this._isAnimCompleted()&&(this.animState=null,this.animName=null,t.setVariable(l.SMVariable.Trigger_AnimationFinished,1)),t.checkStateChange(),this._updateAttackBoxes()},t.prototype.setFenShen=function(e){if(this.isFenShen!=e)if(this.isFenShen=e,e){var t=new S;t.init(this,50),this.fenshenList.push(t);var o=new S;o.init(this,-50),this.fenshenList.push(o),this.node.setScale(1.2*(this.isFaceRight?1:-1),1.2)}else{for(var n=0,i=this.fenshenList;n<i.length;n++){i[n].destroy()}this.fenshenList=[],this.node.setScale(1*(this.isFaceRight?1:-1),1)}},t.prototype.onHitByOther=function(e){var t=l.ALL_SKILL_DATA_MAP[e.stateMachine.getVariable(l.SMVariable.SkillID)];if(t){var o=e.attackPower;if(this.ownerMap.roleHero===this)o*=(100-u.PlayerLvl.Instance.getReduceDamage())/100;this.lifePoint-=o,this.boxAttacking.valid=!1,this.boxBeAttacked.valid=!1,this.lifePoint<=0&&(Math.random()>.5?s.myAudioMgr.playSFX("dead1.ogg"):s.myAudioMgr.playSFX("dead2.ogg")),this.stateMachine.setVariable(l.SMVariable.HitBySkillID,t.skillId),this.stateMachine.setVariable(l.SMVariable.Trigger_HitBySkillID,t.skillId),this.attacker=e,this.setFaceDir(!e.isFaceRight)}},t.prototype.onHitByBullet=function(e){var t=e.skillData,o=e.equipData.power;this.ownerMap.roleHero===this&&(o*=(100-u.PlayerLvl.Instance.getReduceDamage())/100);this.ownerMap.roleHero===e.ownerRole&&(o=g.Player.Instance.getAtk(o)),this.lifePoint-=o,this.boxAttacking.valid=!1,this.boxBeAttacked.valid=!1,this.lifePoint<=0&&(Math.random()>.5?s.myAudioMgr.playSFX("dead1.ogg"):s.myAudioMgr.playSFX("dead2.ogg")),this.stateMachine.setVariable(l.SMVariable.HitBySkillID,t.skillId),this.stateMachine.setVariable(l.SMVariable.Trigger_HitBySkillID,t.skillId),this.attacker=e.ownerRole},t.prototype.on_AI_timer_begin=function(){},t.prototype.on_AI_timer_reset=function(){},t=__decorate([m],t)}(cc.Component);o.default=b,cc._RF.pop()},{"./AudioMgr":"AudioMgr","./Bullet":"Bullet","./DragonBonesConfig":"DragonBonesConfig","./EquipData":"EquipData","./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./Logic/PlayerLvl":"PlayerLvl","./Logic/PlayerWeapon":"PlayerWeapon","./RoleEnemy":"RoleEnemy","./SkillData":"SkillData","./StateMachine":"StateMachine"}],RoleEnemy:[function(e,t,o){"use strict";cc._RF.push(t,"7f9faN+BcdB+KGA4w+E9CgG","RoleEnemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleBase"),i=e("./SkillData"),a=e("./Logic/PlayerBattle"),r=cc._decorator,l=r.ccclass,s=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initWithConfig=function(e){this.init(),this.isActiveRole=!1,this.enemyConfig=e,this.lastRange=99999999,this.aiCountdown=99999999,this.skillIndex=0,this.roleName=e.name,this.setIntColor(e.color),e.y<250||15==e.enemytype?(this.node.setPosition(e.x+.5*e.width,this.ownerMap.GROUND_HEIGHT+480),this.stateMachine.setState(i.SMState.BLOCKED_J),this.stateMachine.setVariable(i.SMVariable.BlockedReason,n.BlockReason.Jump)):this.node.setPosition(e.x+.5*e.width,this.ownerMap.GROUND_HEIGHT),this.lifePoint=e.hp,this.attackPower=e.act,this.equipid=e.equipId,[9,31,33,35].indexOf(e.enemytype)>=0&&(this.isBaTi=!0),[30,31,32,33,34,35,36,37].indexOf(e.enemytype)>=0&&(this.isBoss=!0,this.node.setScale(1.2)),[14,30,31,33,34,35,37].indexOf(e.enemytype)>=0&&(this.isSummonWhenAttacked=!0,this.summonRemainCount=5),this.setFaceDir(!1)},t.prototype.trySkill=function(){var e=[this.enemyConfig.t0,this.enemyConfig.t1,this.enemyConfig.t2,this.enemyConfig.t3][this.skillIndex];switch(++this.skillIndex,e){case 3:default:this.stateMachine.setVariable(i.SMVariable.Input_Attack1,1);break;case 9:case 13:this.stateMachine.setVariable(i.SMVariable.Trigger_SkillID,15);break;case 8:this.stateMachine.setVariable(i.SMVariable.Input_Attack2,1);break;case 10:case 14:this.stateMachine.setVariable(i.SMVariable.Trigger_SkillID,16)}},t.prototype.myUpdate=function(t){var o=this.ownerMap.roleHero.node.getPositionX(),n=this.node.getPositionX(),r=Math.abs(n-o);if(!this.isActiveRole){if(!(r<=650))return;this.isActiveRole=!0,a.PlayerBattle.Instance.enemyActive(this.enemyConfig)}if(2==this.enemyConfig.enemytype&&this.lifePoint==this.enemyConfig.hp)return n<=0?void this.ownerMap.afterRoleDie(this):(this.stateMachine.setVariable(i.SMVariable.Input_WalkDir,-160),void e.prototype.myUpdate.call(this,t));r>250?this.stateMachine.setVariable(i.SMVariable.Input_WalkDir,n>o?-160:160):r>40?(this.stateMachine.setVariable(i.SMVariable.Input_WalkDir,n>o?-80:80),this.aiCountdown=99999999):this.stateMachine.setVariable(i.SMVariable.Input_WalkDir,0),this.lastRange=r,this.aiCountdown-=t,this.aiCountdown<=0&&(this.on_AI_timer_reset(),this.trySkill()),e.prototype.myUpdate.call(this,t)},t.prototype.onHitByOther=function(t){e.prototype.onHitByOther.call(this,t),a.PlayerBattle.Instance.HitEnemy(t.equipid)},t.prototype.onHitByBullet=function(t){e.prototype.onHitByBullet.call(this,t),a.PlayerBattle.Instance.HitEnemy(t.equipData.equipid)},t.prototype.on_AI_timer_begin=function(){this.aiCountdown=this.enemyConfig.delayTime/30},t.prototype.on_AI_timer_reset=function(){this.aiCountdown=99999999},t=__decorate([l],t)}(n.default));o.default=s,cc._RF.pop()},{"./Logic/PlayerBattle":"PlayerBattle","./RoleBase":"RoleBase","./SkillData":"SkillData"}],RoleHero:[function(e,t,o){"use strict";cc._RF.push(t,"8c7f1Dy7jNEoLfv3DRncjLK","RoleHero"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./RoleBase"),i=e("./Logic/Player"),a=e("./Logic/PlayerBattle"),r=e("./Logic/PlayerLvl"),l=cc._decorator,s=l.ccclass,c=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.maxLifePoint=0,t}return __extends(t,e),t.prototype.onLoad=function(){a.PlayerBattle.Instance.setHero(this)},t.prototype.onDestroy=function(){a.PlayerBattle.Instance.setHero(null)},t.prototype.initWithConfig=function(){this.roleName="hero",this.init(),this.setFaceDir(!0),this.node.setPosition(350,this.ownerMap.GROUND_HEIGHT),this.attackPower=i.Player.Instance.getAtk(1),this.maxLifePoint=i.Player.Instance.getHp(),this.lifePoint=this.maxLifePoint,this.setFenShen(r.PlayerLvl.Instance.isHaveThreeBody()),this.isBaTi=r.PlayerLvl.Instance.isNoneKnockDown()},t=__decorate([s],t)}(n.default));o.default=c,cc._RF.pop()},{"./Logic/Player":"Player","./Logic/PlayerBattle":"PlayerBattle","./Logic/PlayerLvl":"PlayerLvl","./RoleBase":"RoleBase"}],ShopData:[function(e,t,o){"use strict";var n;cc._RF.push(t,"5f5aeHnmNhDFLq6V5aDL5MC","ShopData"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.ShopItemType||(o.ShopItemType={}))[n["火箭炮"]=1]="火箭炮",n[n["黄金重狙枪"]=2]="黄金重狙枪",n[n["火力喷射炮"]=3]="火力喷射炮",n[n["超级大礼包"]=4]="超级大礼包",n[n["角色复活"]=5]="角色复活",n[n["无敌盾"]=6]="无敌盾",n[n["金币8000"]=7]="金币8000",n[n["金币12500"]=8]="金币12500",n[n["全攻击加成"]=9]="全攻击加成",n[n["耐久加成"]=10]="耐久加成",n[n["生命加成"]=11]="生命加成",n[n["直接过关"]=12]="直接过关",n[n["特惠大礼包"]=13]="特惠大礼包",n[n["角色升级"]=14]="角色升级",n[n["关卡开启"]=15]="关卡开启",n[n["金币22500"]=16]="金币22500",o.ALL_SHOP_ITEM_DATA=[{id:1,name:"火箭炮",price:20,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL1",icon:"weapon/w12"},{id:2,name:"黄金重狙枪",price:20,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL2",icon:"weapon/w10"},{id:3,name:"火力喷射炮",price:10,des:"武器，射杀敌人",priceType:"软计费点",itemAlias:"TOOL3",icon:"weapon/w9"},{id:4,name:"超级大礼包",price:10,des:"spas光线弹＊1、金币＊12500",priceType:"软计费点",itemAlias:"TOOL4",icon:"weapon/item0"},{id:5,name:"角色复活",price:10,des:"复活",priceType:"软计费点",itemAlias:"TOOL5",icon:"weapon/item0"},{id:6,name:"无敌盾",price:8,des:"护盾。主角获得无敌状态100秒",priceType:"软计费点",itemAlias:"TOOL6",icon:"weapon/defense"},{id:7,name:"8000金币",price:6,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL7",icon:"weapon/item0"},{id:8,name:"12500金币",price:8,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL8",icon:"weapon/item0"},{id:9,name:"全攻击加成",price:8,des:"全攻击提升50%",priceType:"软计费点",itemAlias:"TOOL10",icon:"weapon/item1"},{id:10,name:"耐久加成",price:6,des:"耐久上限50%",priceType:"软计费点",itemAlias:"TOOL11",icon:"weapon/item2"},{id:11,name:"生命加成",price:6,des:"生命上限50%",priceType:"软计费点",itemAlias:"TOOL12",icon:"weapon/item3"},{id:12,name:"直接过关",price:10,des:"直接过关",priceType:"软计费点",itemAlias:"TOOL13",icon:"weapon/item0"},{id:13,name:"特惠大礼包",price:10,des:"攻击、生命耐久加成50%再送12500金币",priceType:"软计费点",itemAlias:"TOOL14",icon:"weapon/item0"},{id:14,name:"角色升级",price:10,des:"人物角色升级",priceType:"软计费点",itemAlias:"TOOL15",icon:"weapon/item0"},{id:15,name:"关卡开启",price:6,des:"第四关弹出关卡开启",priceType:"硬计费点",itemAlias:"TOOL16",icon:"weapon/item0"},{id:16,name:"22500金币",price:10,des:"可用来购买武器",priceType:"软计费点",itemAlias:"TOOL8",icon:"weapon/item0"}],o.ALL_SHOP_ITEM_DATA_MAP={};for(var i=0,a=o.ALL_SHOP_ITEM_DATA;i<a.length;i++){var r=a[i];o.ALL_SHOP_ITEM_DATA_MAP[r.id]=r}cc._RF.pop()},{}],ShopWeapon:[function(e,t,o){"use strict";cc._RF.push(t,"05d02a7N7hPubXwlZ4mzRI7","ShopWeapon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money1=null,t.money2=null,t.money3=null,t.money4=null,t}return __extends(t,e),t.prototype.start=function(){this.initOnlyMoney(n.ShopItemType.黄金重狙枪,this.money1),this.initOnlyMoney(n.ShopItemType.火箭炮,this.money2),this.initOnlyMoney(n.ShopItemType.火力喷射炮,this.money3),this.initOnlyMoney(n.ShopItemType.特惠大礼包,this.money4)},t.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},t.prototype.onFormClick=function(){cc.director.resume(),a.onButtonClicked(),this.node.destroy()},t.prototype.onBtn1Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.超级大礼包)},t.prototype.onBtn2Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.黄金重狙枪)},t.prototype.onBtn3Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.火箭炮)},t.prototype.onBtn4Click=function(){cc.director.resume(),a.onButtonClicked(),this.buyItem(n.ShopItemType.火力喷射炮)},t.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([s(cc.Label)],t.prototype,"money1",void 0),__decorate([s(cc.Label)],t.prototype,"money2",void 0),__decorate([s(cc.Label)],t.prototype,"money3",void 0),__decorate([s(cc.Label)],t.prototype,"money4",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Shop:[function(e,t,o){"use strict";cc._RF.push(t,"68d32DuO0hCMoSww3pIoyMP","Shop"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../Logic//Player"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.money1=null,t.money2=null,t.money3=null,t.money4=null,t.doubleGoldTime=null,t.goldSprite1=null,t.goldSprite2=null,t.goldSprite3=null,t.goldSpriteFrames1=null,t.goldSpriteFrames12=null,t.goldSpriteFrames2=null,t.goldSpriteFrames22=null,t.goldSpriteFrames3=null,t.goldSpriteFrames32=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.updateDoubleGoldTime(),this.initOnlyMoney(n.ShopItemType.金币22500,this.money1),this.initOnlyMoney(n.ShopItemType.金币12500,this.money2),this.initOnlyMoney(n.ShopItemType.金币8000,this.money3),this.initOnlyMoney(n.ShopItemType.特惠大礼包,this.money4)},t.prototype.updateDoubleGoldTime=function(){var e=a.Player.Instance.getShopTime();if(0==e)this.doubleGoldTime.string="",this.goldSprite1.spriteFrame=this.goldSpriteFrames1,this.goldSprite2.spriteFrame=this.goldSpriteFrames2,this.goldSprite3.spriteFrame=this.goldSpriteFrames3;else{var t=Math.floor(e/1e3)%60,o=Math.floor(e/1e3/60)%60,n=Math.floor(e/1e3/60/60)%60;this.doubleGoldTime.string=n+";"+o+";"+t,this.goldSprite1.spriteFrame=this.goldSpriteFrames12,this.goldSprite2.spriteFrame=this.goldSpriteFrames22,this.goldSprite3.spriteFrame=this.goldSpriteFrames32}},t.prototype.update=function(e){this.updateDoubleGoldTime()},t.prototype.initOnlyMoney=function(e,t){var o=n.ALL_SHOP_ITEM_DATA_MAP[e];t.string=""+o.price},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},t.prototype.onBtn1Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.超级大礼包)},t.prototype.onBtn2Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币22500)},t.prototype.onBtn3Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币12500)},t.prototype.onBtn4Click=function(){r.onButtonClicked(),this.buyItem(n.ShopItemType.金币8000)},t.prototype.buyItem=function(e){i.PlayerShop.Instance.buyByRMB(e,this.node)},__decorate([c(cc.Label)],t.prototype,"money1",void 0),__decorate([c(cc.Label)],t.prototype,"money2",void 0),__decorate([c(cc.Label)],t.prototype,"money3",void 0),__decorate([c(cc.Label)],t.prototype,"money4",void 0),__decorate([c(cc.Label)],t.prototype,"doubleGoldTime",void 0),__decorate([c(cc.Sprite)],t.prototype,"goldSprite1",void 0),__decorate([c(cc.Sprite)],t.prototype,"goldSprite2",void 0),__decorate([c(cc.Sprite)],t.prototype,"goldSprite3",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames1",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames12",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames2",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames22",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames3",void 0),__decorate([c(cc.SpriteFrame)],t.prototype,"goldSpriteFrames32",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic//Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],SkillData:[function(e,t,o){"use strict";var n,i;cc._RF.push(t,"1ae102oaXFNDaZ6PFRLiapQ","SkillData"),Object.defineProperty(o,"__esModule",{value:!0}),(n=o.SMState||(o.SMState={}))[n.IDLE=0]="IDLE",n[n.JUMP=1]="JUMP",n[n.BLOCKED=2]="BLOCKED",n[n.BLOCKED_J=3]="BLOCKED_J",n[n.LYING=4]="LYING",(i=o.SMVariable||(o.SMVariable={}))[i.Input_WalkDir=0]="Input_WalkDir",i[i.Input_Jump=1]="Input_Jump",i[i.Input_Attack1=2]="Input_Attack1",i[i.Input_Attack2=3]="Input_Attack2",i[i.Input_ChangeWeapon=4]="Input_ChangeWeapon",i[i.Trigger_SkillID=5]="Trigger_SkillID",i[i.Trigger_HitBySkillID=6]="Trigger_HitBySkillID",i[i.Trigger_AnimationFinished=7]="Trigger_AnimationFinished",i[i.SkillID=8]="SkillID",i[i.HitBySkillID=9]="HitBySkillID",i[i.BlockedReason=10]="BlockedReason",i[i.PositionY=11]="PositionY",i[i.SpeedX=12]="SpeedX",i[i.SpeedY=13]="SpeedY",i[i.LyingCountDown=14]="LyingCountDown",i[i.IceFireCountDown=15]="IceFireCountDown",i[i.FlyKickCountDown=16]="FlyKickCountDown",i[i.IsBlowedHigh=17]="IsBlowedHigh",o.ALL_SKILL_DATA=[],o.ALL_SKILL_DATA_MAP={},o.loadSkillData=function(){o.ALL_SKILL_DATA.length>0||cc.loader.loadRes("excel_json/SkillData",function(e,t){if(e)console.log(e);else{for(var n=t[0],i={},a=0;a<n.length;++a)i[n[a]]=a;for(var r=0,l=t[1];r<l.length;r++){var s=l[r];(u={skillId:s[i.skillId],groupId:s[i.groupId],animName:s[i.animName],beHitAnimName:s[i.beHitAnimName],beHitDieAnimName:s[i.beHitDieAnimName],moveSpeed:s[i.moveSpeed]||0,beHitMoveSpeed:s[i.beHitMoveSpeed]||0,power:s[i.power]||0,availableStates:s[i.availableStates],inputKey:s[i.inputKey],inputPriority:s[i.inputPriority],blowPower:s[i.blowPower],special:s[i.special],equipid:s[i.equipid],gunAnimName:s[i.gunAnimName]}).availableStates=u.availableStates.split(","),o.ALL_SKILL_DATA.push(u)}o.ALL_SKILL_DATA.sort(function(e,t){return t.inputPriority!=e.inputPriority?t.inputPriority-e.inputPriority:e.skillId-t.skillId});for(var c=0,p=o.ALL_SKILL_DATA;c<p.length;c++){var u=p[c];o.ALL_SKILL_DATA_MAP[u.skillId]=u}}})},cc._RF.pop()},{}],SpriteAnim:[function(e,t,o){"use strict";cc._RF.push(t,"42e43GCeslGwaY29ROqWquG","SpriteAnim"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(e,t,o){this.frames=e,this.fps=t,this.autoDelete=o,this.index=0,this.second=0,this.sprite=this.getComponent(cc.Sprite),this.sprite.spriteFrame=e[0]},t.prototype.update=function(e){this.second+=e;var t=Math.floor(this.second*this.fps);t!=this.index&&(this.index=t,t<this.frames.length?this.sprite.spriteFrame=this.frames[t]:this.autoDelete&&this.node.removeFromParent())},t=__decorate([i],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],StateMachine:[function(e,t,o){"use strict";cc._RF.push(t,"8aef9SelaFDtIjS67FHcCS0","StateMachine"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this._registeredStates={},this._currentState=null,this._variables={},this.debugLogName=null}return e.prototype.registerState=function(e){this._registeredStates[e]={stateId:e,changes:[]}},e.prototype.registerStateChange=function(e,t,o,n){if(e instanceof Array)for(var i=0,a=e;i<a.length;i++){var r=a[i];this._registeredStates[r].changes.push({nextStateId:t,condition:o,actionAfterChange:n})}else this._registeredStates[e].changes.push({nextStateId:t,condition:o,actionAfterChange:n})},e.prototype.getCurrentStateId=function(){return this._currentState.stateId},e.prototype.setState=function(e){this._currentState=this._registeredStates[e]},e.prototype.setVariable=function(e,t){this._variables[e]=t},e.prototype.getVariable=function(e){return this._variables[e]},e.prototype.getVariableAndClear=function(e){var t=this._variables[e];return this._variables[e]=0,t},e.prototype.checkStateChange=function(){if(!this._currentState)return!1;for(var e=0,t=this._currentState.changes;e<t.length;e++){var o=t[e];if(!o.condition||o.condition()){var n=this._currentState.stateId;return this.setState(o.nextStateId),this.debugLogName&&console.log(this.debugLogName+" setState "+o.nextStateId),o.actionAfterChange&&o.actionAfterChange(n),!0}}return!1},e}();o.StateMachine=n,cc._RF.pop()},{}],UICommon:[function(e,t,o){"use strict";cc._RF.push(t,"2b7f1wMGw5KP7njCAfjq/S4","UICommon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AudioMgr");o.onButtonClicked=function(){n.myAudioMgr.playSFX("button.ogg")},o.recursiveFindNode=function e(t,o){var n=t.getChildByName(o);if(n)return n;for(var i=t.children,a=0;a<i.length;++a)if(n=e(i[a],o))return n;return null},o.switchToScene=function(e,t){switch(void 0===t&&(t=null),console.log("will switch to scene "+e),e){case"Begin":case"Weapon":case"Test":case"Loading":cc.director.loadScene(e,function(){console.log("scene "+e+" loaded"),t&&t()});break;default:console.log("warning unknown scene name "+e)}},o.setSpriteFromRawRes=function(e,t){null!=e&&null!=t||console.log("setSpriteFromRawRes error c="+e+" sprite="+t),cc.loader.loadRes(e,cc.SpriteFrame,function(e,o){e?console.log(e):o&&(t.spriteFrame=o)})},cc._RF.pop()},{"./AudioMgr":"AudioMgr"}],Weapon0:[function(e,t,o){"use strict";cc._RF.push(t,"4b6bbAgEAxN/4UaR0+iVS4/","Weapon0"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/GunData"),i=e("../Logic/Player"),a=e("../Logic/PlayerShop"),r=e("../UICommon"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gunSprite=null,t.nameLabel=null,t.atkLabel=null,t.valueLabel=null,t.priceLabel=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.init=function(e){this._gunType=e;var t=n.ALL_GUN_DATA_MAP[e];this.nameLabel.string=t.name,this.atkLabel.string=""+t.atk,this.valueLabel.string=""+t.value,this.priceLabel.string=t.price+"金币",r.setSpriteFromRawRes(t.icon,this.gunSprite),this.gunSprite.sizeMode=cc.Sprite.SizeMode.RAW},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},t.prototype.onBuyClick=function(){r.onButtonClicked(),this.node.destroy(),n.ALL_GUN_DATA_MAP[this._gunType].price>i.Player.Instance.get(i.PlayerAttr.金币)?a.PlayerShop.Instance.showShopUI("shop"):a.PlayerShop.Instance.buyGunByCoin(this._gunType)},__decorate([c(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([c(cc.Label)],t.prototype,"nameLabel",void 0),__decorate([c(cc.Label)],t.prototype,"atkLabel",void 0),__decorate([c(cc.Label)],t.prototype,"valueLabel",void 0),__decorate([c(cc.Label)],t.prototype,"priceLabel",void 0),t=__decorate([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../Data/GunData":"GunData","../Logic/Player":"Player","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Weapon1:[function(e,t,o){"use strict";cc._RF.push(t,"2079f0WvMtKuZNhgN3h7TKz","Weapon1"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Data/ShopData"),i=e("../Logic/PlayerShop"),a=e("../UICommon"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gunSprite=null,t.desLabel=null,t.priceLabel=null,t}return __extends(t,e),t.prototype.init=function(e){this._shopItemType=e;var t=n.ALL_SHOP_ITEM_DATA_MAP[e];this.desLabel.string=t.des,this.priceLabel.string=t.price+"元",a.setSpriteFromRawRes(t.icon,this.gunSprite)},t.prototype.onFormClick=function(){a.onButtonClicked(),this.node.destroy()},t.prototype.onBuyClick=function(){a.onButtonClicked(),i.PlayerShop.Instance.buyByRMB(this._shopItemType,this.node)},__decorate([s(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([s(cc.Label)],t.prototype,"desLabel",void 0),__decorate([s(cc.Label)],t.prototype,"priceLabel",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Data/ShopData":"ShopData","../Logic/PlayerShop":"PlayerShop","../UICommon":"UICommon"}],Weapon:[function(e,t,o){"use strict";cc._RF.push(t,"efc40OHBKlHKqTtPS6m8HUx","Weapon"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/Player"),i=e("../Data/GunData"),a=e("../Data/ShopData"),r=e("../UICommon"),l=e("../Logic/PlayerWeapon"),s=e("../Logic/PlayerShop"),c=e("../Logic/PlayerBattle"),p=e("../Logic/PlayerLvl"),u=cc._decorator,h=u.ccclass,d=u.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textLabelRightUI=null,t.gunSpriteRightUI=null,t.atkLabelRightUI=null,t.valueLabelRightUI=null,t.priceLabelRightUI=null,t.moneyLabel=null,t.lifeLabel=null,t.gunSprite=null,t.levelUpBtn=null,t.shopBtn=null,t.weaponShopBtn=null,t.weaponShopUI=null,t.weapon0UI=null,t.weapon1UI=null,t.doubleGoldTime=null,t.curSelectWeaponIndex=0,t}return __extends(t,e),t.prototype.onLoad=function(){n.Player.Instance.addListener(this),l.PlayerWeapon.Instance.addGunListener(this),l.PlayerWeapon.Instance.addBuffListener(this),this.curSelectWeaponIndex=0},t.prototype.onDestroy=function(){n.Player.Instance.removeListener(this),l.PlayerWeapon.Instance.removeGunListener(this),l.PlayerWeapon.Instance.removeBuffListener(this)},t.prototype.start=function(){this.doScaleAction(this.levelUpBtn),this.doScaleAction(this.shopBtn),this.doScaleAction(this.weaponShopBtn),this.updateWeapons(),this.updateMoney(),this.updateLife(),s.PlayerShop.Instance.showShopUI("shop"),this.textLabelRightUI.node.active=!1,this.updateDoubleGoldTime()},t.prototype.update=function(e){this.updateDoubleGoldTime()},t.prototype.updateDoubleGoldTime=function(){var e=n.Player.Instance.getShopTime();if(0==e)this.doubleGoldTime.string="";else{var t=Math.floor(e/1e3)%60,o=Math.floor(e/1e3/60)%60,i=Math.floor(e/1e3/60/60)%60;this.doubleGoldTime.string=i+";"+o+";"+t}},t.prototype.onPlayerAttrNotify=function(e,t){n.PlayerAttr.金币==e&&(this.moneyLabel.string=""+t)},t.prototype.onPlayGetGunNotify=function(e){if(this.updateWeapons(),l.PlayerWeapon.Instance.isHaveGun(e)){this.showRightUI(e,!0),this.curSelectWeaponIndex=e;var t=this.node.getChildByName(""+this.curSelectWeaponIndex);null!=t&&this.doScaleAction(t)}},t.prototype.onPlayGetBuffNotify=function(e){this.updateLife(),0!=this.curSelectWeaponIndex&&this.updateRightUI(this.curSelectWeaponIndex)},t.prototype.updateWeapons=function(){for(var e=1;e<13;e++){var t=this.node.getChildByName(""+e).getComponent(cc.Button),o=l.PlayerWeapon.Instance.isHaveGun(e)?cc.Color.WHITE:cc.Color.GRAY;t.normalColor=o,t.pressedColor=o,t.hoverColor=o,t.disabledColor=o}},t.prototype.updateMoney=function(){var e=n.Player.Instance.get(n.PlayerAttr.金币);this.moneyLabel.string=""+e},t.prototype.updateLife=function(){var e=n.Player.Instance.getHp();this.lifeLabel.string=""+e},t.prototype.doScaleAction=function(e){e.stopAllActions(),e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))))},t.prototype.showRightUI=function(e,t){this.textLabelRightUI.node.active=t,t&&this.updateRightUI(e)},t.prototype.updateRightUI=function(e){if(l.PlayerWeapon.Instance.isHaveGun(e)){var t=l.PlayerWeapon.Instance.getOwnGun(e);this.textLabelRightUI.string=""+t.name,this.atkLabelRightUI.string=""+t.atk,r.setSpriteFromRawRes(t.icon,this.gunSprite),this.gunSprite.sizeMode=cc.Sprite.SizeMode.RAW;var o=l.PlayerWeapon.Instance.getGunLocal(e);this.valueLabelRightUI.string=o.valueDurability+"/"+t.value;var n=l.PlayerWeapon.Instance.getRepairGunCostCoin(e);this.priceLabelRightUI.string=n+"金币"}},t.prototype.onFormClick=function(){r.onButtonClicked(),this.node.destroy()},t.prototype.onLevelUplick=function(){r.onButtonClicked(),p.PlayerLvl.Instance.showLvlUpUI()},t.prototype.onShopClick=function(){r.onButtonClicked(),s.PlayerShop.Instance.showShopUI("shop")},t.prototype.onWeaponShopClick=function(){r.onButtonClicked(),this.node.addChild(cc.instantiate(this.weaponShopUI))},t.prototype.onWeaponClick=function(e){if(r.onButtonClicked(),0!=this.curSelectWeaponIndex){var t=this.node.getChildByName(""+this.curSelectWeaponIndex);this.curSelectWeaponIndex=0,null!=t&&t.stopAllActions()}if(l.PlayerWeapon.Instance.isHaveGun(e))return this.showRightUI(e,!0),this.curSelectWeaponIndex=e,void(null!=(t=this.node.getChildByName(""+this.curSelectWeaponIndex))&&this.doScaleAction(t));if(this.showRightUI(e,!1),s.PlayerShop.Instance.gunTypeToShopType(e)>0)this.node.addChild(cc.instantiate(this.weaponShopUI));else{var o=cc.instantiate(this.weapon0UI);this.node.addChild(o),o.getComponent("Weapon0").init(e)}},t.prototype.onWeapon1Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.黄瓜)},t.prototype.onWeapon2Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.辣椒)},t.prototype.onWeapon3Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.火影初级)},t.prototype.onWeapon4Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.火影中级)},t.prototype.onWeapon5Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.火影高级)},t.prototype.onWeapon6Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.光影初极)},t.prototype.onWeapon7Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.光影中级)},t.prototype.onWeapon8Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.光影高级)},t.prototype.onWeapon9Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.火力喷射炮)},t.prototype.onWeapon10Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.黄金重狙枪)},t.prototype.onWeapon11Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.火箭炮)},t.prototype.onWeapon12Click=function(){r.onButtonClicked(),this.onWeaponClick(i.GunType.Spas光线弹)},t.prototype.onWeaponRMBClick=function(e){var t=cc.instantiate(this.weapon1UI);this.node.addChild(t),t.getComponent("Weapon1").init(e)},t.prototype.onAtkUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.全攻击加成)},t.prototype.onBulletUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.耐久加成)},t.prototype.onBloodUpClick=function(){r.onButtonClicked(),this.onWeaponRMBClick(a.ShopItemType.生命加成)},t.prototype.onSupplyClick=function(){r.onButtonClicked(),0!=this.curSelectWeaponIndex&&(l.PlayerWeapon.Instance.getRepairGunCostCoin(this.curSelectWeaponIndex)>n.Player.Instance.get(n.PlayerAttr.金币)?s.PlayerShop.Instance.showShopUI("shop"):(l.PlayerWeapon.Instance.RepairGun(this.curSelectWeaponIndex),this.updateRightUI(this.curSelectWeaponIndex)))},t.prototype.onEnterClick=function(){r.onButtonClicked(),c.PlayerBattle.Instance.changeStatus(c.BattleStatus.BattleStatus_Load)},__decorate([d(cc.Label)],t.prototype,"textLabelRightUI",void 0),__decorate([d(cc.Sprite)],t.prototype,"gunSpriteRightUI",void 0),__decorate([d(cc.Label)],t.prototype,"atkLabelRightUI",void 0),__decorate([d(cc.Label)],t.prototype,"valueLabelRightUI",void 0),__decorate([d(cc.Label)],t.prototype,"priceLabelRightUI",void 0),__decorate([d(cc.Label)],t.prototype,"moneyLabel",void 0),__decorate([d(cc.Label)],t.prototype,"lifeLabel",void 0),__decorate([d(cc.Sprite)],t.prototype,"gunSprite",void 0),__decorate([d(cc.Node)],t.prototype,"levelUpBtn",void 0),__decorate([d(cc.Node)],t.prototype,"shopBtn",void 0),__decorate([d(cc.Node)],t.prototype,"weaponShopBtn",void 0),__decorate([d(cc.Prefab)],t.prototype,"weaponShopUI",void 0),__decorate([d(cc.Prefab)],t.prototype,"weapon0UI",void 0),__decorate([d(cc.Prefab)],t.prototype,"weapon1UI",void 0),__decorate([d(cc.Label)],t.prototype,"doubleGoldTime",void 0),t=__decorate([h],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../Data/GunData":"GunData","../Data/ShopData":"ShopData","../Logic/Player":"Player","../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerLvl":"PlayerLvl","../Logic/PlayerShop":"PlayerShop","../Logic/PlayerWeapon":"PlayerWeapon","../UICommon":"UICommon"}],Win:[function(e,t,o){"use strict";cc._RF.push(t,"ca7c6vsokpD2L0x1KL0zlqJ","Win"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Logic/PlayerBattle"),i=e("../UICommon"),a=e("../Logic/PlayerLvl"),r=cc._decorator,l=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.killLabel=null,t.goldLabel=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=n.PlayerBattle.Instance.getBattleWinResult(),t=e.killNum,o=e.getGold;this.killLabel.string=""+t,this.goldLabel.string=""+o},t.prototype.onContinueClick=function(){i.onButtonClicked(),this.node.destroy(),n.PlayerBattle.Instance.changeStatus(n.BattleStatus.BattleStatus_NextBattle)},t.prototype.onLevelUpClick=function(){i.onButtonClicked(),a.PlayerLvl.Instance.showLvlUpUI()},__decorate([s(cc.Label)],t.prototype,"killLabel",void 0),__decorate([s(cc.Label)],t.prototype,"goldLabel",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle","../Logic/PlayerLvl":"PlayerLvl","../UICommon":"UICommon"}],comp_UIShowAct:[function(e,t,o){"use strict";cc._RF.push(t,"e42ebYfOLVNDp/YmCirtH3c","comp_UIShowAct"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a=e("../Logic/PlayerBattle"),r=cc._decorator,l=r.ccclass,s=r.property;(i=n||(n={}))[i.act_scale_center=1]="act_scale_center",i[i.act_scale_leftbottom=2]="act_scale_leftbottom";var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actNode=null,t.actType=n.act_scale_center,t.updateTime=0,t}return __extends(t,e),t.prototype.start=function(){var e=cc.director.getScene();e&&cc.isValid(e)&&"Test"==e.name&&a.PlayerBattle.Instance.setPause(this.node)},t.prototype.onDestroy=function(){var e=cc.director.getScene();e&&cc.isValid(e)&&"Test"==e.name&&a.PlayerBattle.Instance.removePause(this.node)},t.prototype.update=function(e){if(0==this.updateTime)this.updateTime++,this.actNode.opacity=0;else if(1==this.updateTime)switch(this.updateTime++,this.actNode.opacity=255,this.actType){case n.act_scale_center:this.actNode.setScale(.2),this.actNode.runAction(cc.sequence(cc.scaleTo(.15,1),cc.moveBy(.12,0,10),cc.moveBy(.12,0,-10)));break;case n.act_scale_leftbottom:this.actNode.setScale(.2),this.actNode.setPosition((.2*this.actNode.width-this.node.width)/2,(.2*this.actNode.height-this.node.height)/2),this.actNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(.15,1),cc.moveTo(.15,0,0)),cc.moveBy(.12,0,10),cc.moveBy(.12,0,-10)))}},__decorate([s(cc.Node)],t.prototype,"actNode",void 0),__decorate([s],t.prototype,"actType",void 0),t=__decorate([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"../Logic/PlayerBattle":"PlayerBattle"}]},{},["AudioMgr","Bullet","ControlHeroByKeyboard","ControlHeroByTouch","AchieveData","GunData","HelpData","LevelData","ShopData","DragonBonesConfig","EquipData","LocalData","Player","PlayerAchieve","PlayerBattle","PlayerLvl","PlayerShop","PlayerWeapon","Map","RoleBase","RoleEnemy","RoleHero","SkillData","SpriteAnim","StateMachine","UICommon","About","Achievement","Achievement1","Begin","Begin1","DailyBonus","FenShen","Game","GameBegin","GunBuy","Help","Help1","LevelUp","Loading","Music","Pause","Present","Present1","Present2","Revive","Shop","ShopWeapon","Weapon","Weapon0","Weapon1","Win","comp_UIShowAct"]);